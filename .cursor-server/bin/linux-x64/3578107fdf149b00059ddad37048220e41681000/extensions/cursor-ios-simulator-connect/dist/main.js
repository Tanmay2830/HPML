/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={82:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,a.registerResolver)(h,f),(0,a.registerResolver)(p,f)};const n=r(9278),s=r(5034),i=r(131),o=r(4097),a=r(9302),c=r(8996),l=r(3822),d=r(267);function u(e){d.trace(i.LogVerbosity.DEBUG,"ip_resolver",e)}const h="ipv4",p="ipv6";class f{constructor(e,t,r){var s;this.listener=t,this.endpoints=[],this.error=null,this.hasReturnedResult=!1,u("Resolver constructed for target "+(0,l.uriToString)(e));const a=[];if(e.scheme!==h&&e.scheme!==p)return void(this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new o.Metadata});const d=e.path.split(",");for(const t of d){const r=(0,l.splitHostPort)(t);if(null===r)return void(this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new o.Metadata});if(e.scheme===h&&!(0,n.isIPv4)(r.host)||e.scheme===p&&!(0,n.isIPv6)(r.host))return void(this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new o.Metadata});a.push({host:r.host,port:null!==(s=r.port)&&void 0!==s?s:443})}this.endpoints=a.map(e=>({addresses:[e]})),u("Parsed "+e.scheme+" address list "+a.map(c.subchannelAddressToString))}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener((0,s.statusOrFromError)(this.error),{},null,""):this.listener((0,s.statusOrFromValue)(this.endpoints),{},null,"")}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}},96:(e,t,r)=>{e.exports=s,s.sync=function(e,t){return i(n.statSync(e),t)};var n=r(9896);function s(e,t,r){n.stat(e,function(e,n){r(e,!e&&i(n,t))})}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,s=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),o=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8);return r&parseInt("001",8)||r&c&&s===o||r&a&&n===i||r&(a|c)&&0===i}(e,t)}},131:(e,t)=>{"use strict";var r,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(s||(t.Propagate=s={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r(4097),s=r(131);var i;!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(i||(t.PickResultType=i={})),t.UnavailablePicker=class{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata},e)}pick(e){return{pickResultType:i.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}},t.QueuePicker=class{constructor(e,t){this.loadBalancer=e,this.childPicker=t,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),this.childPicker?this.childPicker.pick(e):{pickResultType:i.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}},222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=void 0;const r=e=>Math.floor(e/2),n=e=>2*e+1,s=e=>2*e+2;t.PriorityQueue=class{constructor(e=(e,t)=>e>t){this.comparator=e,this.heap=[]}size(){return this.heap.length}isEmpty(){return 0==this.size()}peek(){return this.heap[0]}push(...e){return e.forEach(e=>{this.heap.push(e),this.siftUp()}),this.size()}pop(){const e=this.peek(),t=this.size()-1;return t>0&&this.swap(0,t),this.heap.pop(),this.siftDown(),e}replace(e){const t=this.peek();return this.heap[0]=e,this.siftDown(),t}greater(e,t){return this.comparator(this.heap[e],this.heap[t])}swap(e,t){[this.heap[e],this.heap[t]]=[this.heap[t],this.heap[e]]}siftUp(){let e=this.size()-1;for(;e>0&&this.greater(e,r(e));)this.swap(e,r(e)),e=r(e)}siftDown(){let e=0;for(;n(e)<this.size()&&this.greater(n(e),e)||s(e)<this.size()&&this.greater(s(e),e);){let t=s(e)<this.size()&&this.greater(s(e),n(e))?s(e):n(e);this.swap(e,t),e=t}}}},246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSubchannelChannel=void 0;const n=r(5572),s=r(9503),i=r(4987),o=r(463),a=r(131),c=r(6067),l=r(6308),d=r(1703),u=r(4097),h=r(9302),p=r(3822);class f{constructor(e,t,r,n,s){var i,o;this.subchannel=e,this.method=t,this.options=n,this.callNumber=s,this.childCall=null,this.pendingMessage=null,this.readPending=!1,this.halfClosePending=!1,this.pendingStatus=null,this.readFilterPending=!1,this.writeFilterPending=!1;const c=this.method.split("/");let d="";c.length>=2&&(d=c[1]);const u=null!==(o=null===(i=(0,p.splitHostPort)(this.options.host))||void 0===i?void 0:i.host)&&void 0!==o?o:"localhost";this.serviceUrl=`https://${u}/${d}`;const h=(0,l.getRelativeTimeout)(n.deadline);h!==1/0&&(h<=0?this.cancelWithStatus(a.Status.DEADLINE_EXCEEDED,"Deadline exceeded"):setTimeout(()=>{this.cancelWithStatus(a.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},h)),this.filterStack=r.createFilter()}cancelWithStatus(e,t){this.childCall?this.childCall.cancelWithStatus(e,t):this.pendingStatus={code:e,details:t,metadata:new u.Metadata}}getPeer(){var e,t;return null!==(t=null===(e=this.childCall)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.subchannel.getAddress()}async start(e,t){if(this.pendingStatus)return void t.onReceiveStatus(this.pendingStatus);if(this.subchannel.getConnectivityState()!==o.ConnectivityState.READY)return void t.onReceiveStatus({code:a.Status.UNAVAILABLE,details:"Subchannel not ready",metadata:new u.Metadata});const r=await this.filterStack.sendMetadata(Promise.resolve(e));let n;try{n=await this.subchannel.getCallCredentials().generateMetadata({method_name:this.method,service_url:this.serviceUrl})}catch(e){const r=e,{code:n,details:s}=(0,c.restrictControlPlaneStatusCode)("number"==typeof r.code?r.code:a.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${r.message}`);return void t.onReceiveStatus({code:n,details:s,metadata:new u.Metadata})}n.merge(r);const s={onReceiveMetadata:async e=>{t.onReceiveMetadata(await this.filterStack.receiveMetadata(e))},onReceiveMessage:async e=>{this.readFilterPending=!0;const r=await this.filterStack.receiveMessage(e);this.readFilterPending=!1,t.onReceiveMessage(r),this.pendingStatus&&t.onReceiveStatus(this.pendingStatus)},onReceiveStatus:async e=>{const r=await this.filterStack.receiveTrailers(e);this.readFilterPending?this.pendingStatus=r:t.onReceiveStatus(r)}};this.childCall=this.subchannel.createCall(n,this.options.host,this.method,s),this.readPending&&this.childCall.startRead(),this.pendingMessage&&this.childCall.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.halfClosePending&&!this.writeFilterPending&&this.childCall.halfClose()}async sendMessageWithContext(e,t){this.writeFilterPending=!0;const r=await this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags}));this.writeFilterPending=!1,this.childCall?(this.childCall.sendMessageWithContext(e,r.message),this.halfClosePending&&this.childCall.halfClose()):this.pendingMessage={context:e,message:r.message}}startRead(){this.childCall?this.childCall.startRead():this.readPending=!0}halfClose(){this.childCall&&!this.writeFilterPending?this.childCall.halfClose():this.halfClosePending=!0}getCallNumber(){return this.callNumber}setCredentials(e){throw new Error("Method not implemented.")}getAuthContext(){return this.childCall?this.childCall.getAuthContext():null}}t.SingleSubchannelChannel=class{constructor(e,t,r){this.subchannel=e,this.target=t,this.channelzEnabled=!1,this.channelzTrace=new s.ChannelzTrace,this.callTracker=new s.ChannelzCallTracker,this.childrenTracker=new s.ChannelzChildrenTracker,this.channelzEnabled=0!==r["grpc.enable_channelz"],this.channelzRef=(0,s.registerChannelzChannel)((0,p.uriToString)(t),()=>({target:`${(0,p.uriToString)(t)} (${e.getAddress()})`,state:this.subchannel.getConnectivityState(),trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),this.filterStackFactory=new d.FilterStackFactory([new i.CompressionFilterFactory(this,r)])}close(){this.channelzEnabled&&this.childrenTracker.unrefChild(this.subchannel.getChannelzRef()),(0,s.unregisterChannelzRef)(this.channelzRef)}getTarget(){return(0,p.uriToString)(this.target)}getConnectivityState(e){throw new Error("Method not implemented.")}watchConnectivityState(e,t,r){throw new Error("Method not implemented.")}getChannelzRef(){return this.channelzRef}createCall(e,t){const r={deadline:t,host:(0,h.getDefaultAuthority)(this.target),flags:a.Propagate.DEFAULTS,parentCall:null};return new f(this.subchannel,e,this.filterStackFactory,r,(0,n.getNextCallNumber)())}}},267:(e,t,r)=>{"use strict";var n,s,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0,t.trace=function(e,r,n){g(r)&&(0,t.log)(e,(new Date).toISOString()+" | v"+l+" "+c.pid+" | "+r+" | "+n)},t.isTracerEnabled=g;const a=r(131),c=r(932),l=r(9943).rE;let d={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},u=a.LogVerbosity.ERROR;switch((null!==(s=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==s?s:"").toUpperCase()){case"DEBUG":u=a.LogVerbosity.DEBUG;break;case"INFO":u=a.LogVerbosity.INFO;break;case"ERROR":u=a.LogVerbosity.ERROR;break;case"NONE":u=a.LogVerbosity.NONE}t.getLogger=()=>d,t.setLogger=e=>{d=e},t.setLoggerVerbosity=e=>{u=e},t.log=(e,...t)=>{let r;if(e>=u){switch(e){case a.LogVerbosity.DEBUG:r=d.debug;break;case a.LogVerbosity.INFO:r=d.info;break;case a.LogVerbosity.ERROR:r=d.error}r||(r=d.error),r&&r.bind(d)(...t)}};const h=null!==(o=null!==(i=process.env.GRPC_NODE_TRACE)&&void 0!==i?i:process.env.GRPC_TRACE)&&void 0!==o?o:"",p=new Set,f=new Set;for(const e of h.split(","))e.startsWith("-")?f.add(e.substring(1)):p.add(e);const m=p.has("all");function g(e){return!f.has(e)&&(m||p.has(e))}},302:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1085),s=r(3789),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:i,schemaCode:o,it:a}=e,c=a.opts.unicodeRegExp?"u":"",l=r?s._`(new RegExp(${o}, ${c}))`:(0,n.usePattern)(e,i);e.fail$data(s._`!${l}.test(${t})`)}};t.default=i},303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3043);class s extends Error{constructor(e,t,r,s){super(s||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=s},305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,n.registerResolver)("unix",i)};const n=r(9302),s=r(5034);class i{constructor(e,t,r){let n;this.listener=t,this.hasReturnedResult=!1,this.endpoints=[],n=""===e.authority?"/"+e.path:e.path,this.endpoints=[{addresses:[{path:n}]}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener,(0,s.statusOrFromValue)(this.endpoints),{},null,""))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return"localhost"}}},329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:s,$data:i,schema:o,schemaCode:a,it:c}=e,{opts:l,errSchemaPath:d,schemaEnv:u,self:h}=c;l.validateFormats&&(i?function(){const i=r.scopeValue("formats",{ref:h.formats,code:l.code.formats}),o=r.const("fDef",n._`${i}[${a}]`),c=r.let("fType"),d=r.let("format");r.if(n._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,()=>r.assign(c,n._`${o}.type || "string"`).assign(d,n._`${o}.validate`),()=>r.assign(c,n._`"string"`).assign(d,o)),e.fail$data((0,n.or)(!1===l.strictSchema?n.nil:n._`${a} && !${d}`,function(){const e=u.$async?n._`(${o}.async ? await ${d}(${s}) : ${d}(${s}))`:n._`${d}(${s})`,r=n._`(typeof ${d} == "function" ? ${e} : ${d}.test(${s}))`;return n._`${d} && ${d} !== true && ${c} === ${t} && !${r}`}()))}():function(){const i=h.formats[o];if(!i)return void function(){if(!1!==l.strictSchema)throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${d}"`}h.logger.warn(e())}();if(!0===i)return;const[a,c,p]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):l.code.formats?n._`${l.code.formats}${(0,n.getProperty)(o)}`:void 0,s=r.scopeValue("formats",{key:o,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,n._`${s}.validate`]}(i);a===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!u.$async)throw new Error("async format in sync schema");return n._`await ${p}(${s})`}return"function"==typeof c?n._`${p}(${s})`:n._`${p}.test(${s})`}())}())}};t.default=s},340:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:i,it:o}=e;if((0,s.alwaysValidSchema)(o,r))return;const a=t.name("valid");t.forIn("key",i,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,n.not)(a),()=>{e.error(!0),o.allErrors||t.break()})}),e.ok(a)}};t.default=i},342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=t.createCertificateProviderChannelCredentials=t.FileWatcherCertificateProvider=t.createCertificateProviderServerCredentials=t.createServerCredentialsWithInterceptors=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.statusOrFromError=t.statusOrFromValue=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.EndpointMap=t.endpointHasAddress=t.endpointToString=t.subchannelAddressToString=t.LeafLoadBalancer=t.isLoadBalancerNameRegistered=t.parseLoadBalancingConfig=t.selectLbConfigFromList=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.parseDuration=t.durationToMs=t.splitHostPort=t.uriToString=t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(267);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var s=r(9302);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return s.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return s.createResolver}}),Object.defineProperty(t,"CHANNEL_ARGS_CONFIG_SELECTOR_KEY",{enumerable:!0,get:function(){return s.CHANNEL_ARGS_CONFIG_SELECTOR_KEY}});var i=r(3822);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return i.uriToString}}),Object.defineProperty(t,"splitHostPort",{enumerable:!0,get:function(){return i.splitHostPort}});var o=r(4700);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return o.durationToMs}}),Object.defineProperty(t,"parseDuration",{enumerable:!0,get:function(){return o.parseDuration}});var a=r(3956);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return a.BackoffTimeout}});var c=r(8923);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return c.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return c.registerLoadBalancerType}}),Object.defineProperty(t,"selectLbConfigFromList",{enumerable:!0,get:function(){return c.selectLbConfigFromList}}),Object.defineProperty(t,"parseLoadBalancingConfig",{enumerable:!0,get:function(){return c.parseLoadBalancingConfig}}),Object.defineProperty(t,"isLoadBalancerNameRegistered",{enumerable:!0,get:function(){return c.isLoadBalancerNameRegistered}});var l=r(6486);Object.defineProperty(t,"LeafLoadBalancer",{enumerable:!0,get:function(){return l.LeafLoadBalancer}});var d=r(8996);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return d.subchannelAddressToString}}),Object.defineProperty(t,"endpointToString",{enumerable:!0,get:function(){return d.endpointToString}}),Object.defineProperty(t,"endpointHasAddress",{enumerable:!0,get:function(){return d.endpointHasAddress}}),Object.defineProperty(t,"EndpointMap",{enumerable:!0,get:function(){return d.EndpointMap}});var u=r(533);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return u.ChildLoadBalancerHandler}});var h=r(178);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return h.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return h.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return h.PickResultType}});var p=r(5034);Object.defineProperty(t,"statusOrFromValue",{enumerable:!0,get:function(){return p.statusOrFromValue}}),Object.defineProperty(t,"statusOrFromError",{enumerable:!0,get:function(){return p.statusOrFromError}});var f=r(2558);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return f.BaseFilter}});var m=r(1703);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return m.FilterStackFactory}});var g=r(2661);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return g.registerAdminService}});var y=r(2379);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return y.BaseSubchannelWrapper}});var v=r(8692);Object.defineProperty(t,"createServerCredentialsWithInterceptors",{enumerable:!0,get:function(){return v.createServerCredentialsWithInterceptors}}),Object.defineProperty(t,"createCertificateProviderServerCredentials",{enumerable:!0,get:function(){return v.createCertificateProviderServerCredentials}});var _=r(5819);Object.defineProperty(t,"FileWatcherCertificateProvider",{enumerable:!0,get:function(){return _.FileWatcherCertificateProvider}});var b=r(7434);Object.defineProperty(t,"createCertificateProviderChannelCredentials",{enumerable:!0,get:function(){return b.createCertificateProviderChannelCredentials}});var w=r(8899);Object.defineProperty(t,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:!0,get:function(){return w.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})},343:(e,t,r)=>{"use strict";const{isUUID:n}=r(4834),s=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,i=["http","https","ws","wss","urn","urn:uuid"];function o(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function a(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function c(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const l={scheme:"http",domainHost:!0,parse:a,serialize:c},d={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=o(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(o(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},u={http:l,https:{scheme:"https",domainHost:l.domainHost,parse:a,serialize:c},ws:d,wss:{scheme:"wss",domainHost:d.domainHost,parse:d.parse,serialize:d.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(s);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=h(`${n}:${t.nid||e.nid}`);e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=h(`${r}:${t.nid||n}`);s&&(e=s.serialize(e,t));const i=e,o=e.nss;return i.path=`${n||t.nid}:${o}`,t.skipEscape=!0,i},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&n(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function h(e){return e&&(u[e]||u[e.toLowerCase()])||void 0}Object.setPrototypeOf(u,null),e.exports={wsIsSecure:o,SCHEMES:u,isValidSchemeName:function(e){return-1!==i.indexOf(e)},getSchemeHandler:h}},344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7103),s=r(9045),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,s.default];t.default=i},361:(e,t,r)=>{"use strict";var n=t,s=r(3262),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1085),s=r(3789),i=r(6735),o=r(7083),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:c,errsCount:l,it:d}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,o.alwaysValidSchema)(d,r))return;const p=(0,n.allSchemaProperties)(a.properties),f=(0,n.allSchemaProperties)(a.patternProperties);function m(e){t.code(s._`delete ${c}[${e}]`)}function g(n){if("all"===h.removeAdditional||h.removeAdditional&&!1===r)m(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(u||t.break());if("object"==typeof r&&!(0,o.alwaysValidSchema)(d,r)){const r=t.name("valid");"failing"===h.removeAdditional?(y(n,r,!1),t.if((0,s.not)(r),()=>{e.reset(),m(n)})):(y(n,r),u||t.if((0,s.not)(r),()=>t.break()))}}}function y(t,r,n){const s={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===n&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}t.forIn("key",c,r=>{p.length||f.length?t.if(function(r){let i;if(p.length>8){const e=(0,o.schemaRefOrVal)(d,a.properties,"properties");i=(0,n.isOwnProperty)(t,e,r)}else i=p.length?(0,s.or)(...p.map(e=>s._`${r} === ${e}`)):s.nil;return f.length&&(i=(0,s.or)(i,...f.map(t=>s._`${(0,n.usePattern)(e,t)}.test(${r})`))),(0,s.not)(i)}(r),()=>g(r)):g(r)}),e.ok(s._`${l} === ${i.default.errors}`)}};t.default=a},420:(e,t,r)=>{"use strict";e.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var c=e._fieldsArray[n].resolve(),l="m"+s.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",i(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),o(t,c,n,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",i(c,"array"))("for(var i=0;i<%s.length;++i){",l),o(t,c,n,l+"[i]")("}");else{if(c.partOf){var d=s.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",d)}o(t,c,n,l)}c.optional&&t("}")}return t("return null")};var n=r(5643),s=r(3262);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,s){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",s)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",i(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}},438:(e,t,r)=>{e.exports=i,i.sync=function(e,t){return s(n.statSync(e),e,t)};var n=r(9896);function s(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var s=r[n].toLowerCase();if(s&&e.substr(-s.length).toLowerCase()===s)return!0}return!1}(t,r)}function i(e,t,r){n.stat(e,function(n,i){r(n,!n&&s(i,e,t))})}},450:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=n.operators,i={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},o={message:({keyword:e,schemaCode:t})=>n.str`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${i[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data(n._`${r} ${i[t].fail} ${s} || isNaN(${r})`)}};t.default=a},463:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},527:e=>{"use strict";e.exports=u;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*/]+ */,i=/^\s*\*?\/*/,o=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(c,function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}})}function u(e,c){e=e.toString();var l=0,u=e.length,h=1,p=0,f={},m=[],g=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(t){return e.charAt(t)}function _(t,r,n){var a,l={type:e.charAt(t++),lineEmpty:!1,leading:n},d=t-(c?2:3);do{if(--d<0||"\n"===(a=e.charAt(d))){l.lineEmpty=!0;break}}while(" "===a||"\t"===a);for(var u=e.substring(t,r).split(o),m=0;m<u.length;++m)u[m]=u[m].replace(c?i:s,"").trim();l.text=u.join("\n").trim(),f[h]=l,p=h}function b(t){var r=w(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function w(e){for(var t=e;t<u&&"\n"!==v(t);)t++;return t}function S(){if(m.length>0)return m.shift();if(g)return function(){var t="'"===g?n:r;t.lastIndex=l-1;var s=t.exec(e);if(!s)throw y("string");return l=t.lastIndex,E(g),g=null,d(s[1])}();var s,i,o,p,f,S=0===l;do{if(l===u)return null;for(s=!1;a.test(o=v(l));)if("\n"===o&&(S=!0,++h),++l===u)return null;if("/"===v(l)){if(++l===u)throw y("comment");if("/"===v(l))if(c){if(p=l,f=!1,b(l-1)){f=!0;do{if((l=w(l))===u)break;if(l++,!S)break}while(b(l))}else l=Math.min(u,w(l)+1);f&&(_(p,l,S),S=!0),h++,s=!0}else{for(f="/"===v(p=l+1);"\n"!==v(++l);)if(l===u)return null;++l,f&&(_(p,l-1,S),S=!0),++h,s=!0}else{if("*"!==(o=v(l)))return"/";p=l+1,f=c||"*"===v(p);do{if("\n"===o&&++h,++l===u)throw y("comment");i=o,o=v(l)}while("*"!==i||"/"!==o);++l,f&&(_(p,l-2,S),S=!0),s=!0}}}while(s);var C=l;if(t.lastIndex=0,!t.test(v(C++)))for(;C<u&&!t.test(v(C));)++C;var T=e.substring(l,l=C);return'"'!==T&&"'"!==T||(g=T),T}function E(e){m.push(e)}function C(){if(!m.length){var e=S();if(null===e)return null;E(e)}return m[0]}return Object.defineProperty({next:S,peek:C,push:E,skip:function(e,t){var r=C();if(r===e)return S(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=f[h-1],delete f[h-1],t&&(c||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(p<e&&C(),t=f[e],delete f[e],!t||t.lineEmpty||!c&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return h}})}u.unescape=d},533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;const n=r(8923),s=r(463);t.ChildLoadBalancerHandler=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t,r){var n;if(this.calledByPendingChild()){if(e===s.ConnectivityState.CONNECTING)return;null===(n=this.parent.currentChild)||void 0===n||n.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t,r)}requestReresolution(){var e;const t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r,s){let i;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){const e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;return this.latestConfig=t,i.updateAddressList(e,t,r,s)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return"child_load_balancer_helper"}}},647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(9981),s=r(781),i=r(5870),o=r(2546),a=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var d=r(3697);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=r(6596);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=r(3781);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=r(7346);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.ServerMetricRecorder=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r(2267);Object.defineProperty(t,"CallCredentials",{enumerable:!0,get:function(){return n.CallCredentials}});const s=r(3653);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return s.ChannelImplementation}});const i=r(5179);Object.defineProperty(t,"compressionAlgorithms",{enumerable:!0,get:function(){return i.CompressionAlgorithms}});const o=r(463);Object.defineProperty(t,"connectivityState",{enumerable:!0,get:function(){return o.ConnectivityState}});const a=r(7434);Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return a.ChannelCredentials}});const c=r(5563);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return c.Client}});const l=r(131);Object.defineProperty(t,"logVerbosity",{enumerable:!0,get:function(){return l.LogVerbosity}}),Object.defineProperty(t,"status",{enumerable:!0,get:function(){return l.Status}}),Object.defineProperty(t,"propagate",{enumerable:!0,get:function(){return l.Propagate}});const d=r(267),u=r(4056);Object.defineProperty(t,"loadPackageDefinition",{enumerable:!0,get:function(){return u.loadPackageDefinition}}),Object.defineProperty(t,"makeClientConstructor",{enumerable:!0,get:function(){return u.makeClientConstructor}}),Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:!0,get:function(){return u.makeClientConstructor}});const h=r(4097);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return h.Metadata}});const p=r(5943);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return p.Server}});const f=r(8692);Object.defineProperty(t,"ServerCredentials",{enumerable:!0,get:function(){return f.ServerCredentials}});const m=r(2284);Object.defineProperty(t,"StatusBuilder",{enumerable:!0,get:function(){return m.StatusBuilder}}),t.credentials={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},t.closeClient=e=>e.close(),t.waitForClientReady=(e,t,r)=>e.waitForReady(t,r),t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.setLogger=e=>{d.setLogger(e)},t.setLogVerbosity=e=>{d.setLoggerVerbosity(e)},t.getClientChannel=e=>c.Client.prototype.getChannel.call(e);var g=r(3952);Object.defineProperty(t,"ListenerBuilder",{enumerable:!0,get:function(){return g.ListenerBuilder}}),Object.defineProperty(t,"RequesterBuilder",{enumerable:!0,get:function(){return g.RequesterBuilder}}),Object.defineProperty(t,"InterceptingCall",{enumerable:!0,get:function(){return g.InterceptingCall}}),Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:!0,get:function(){return g.InterceptorConfigurationError}});var y=r(9503);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return y.getChannelzServiceDefinition}}),Object.defineProperty(t,"getChannelzHandlers",{enumerable:!0,get:function(){return y.getChannelzHandlers}});var v=r(2661);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:!0,get:function(){return v.addAdminServicesToServer}});var _=r(4892);Object.defineProperty(t,"ServerListenerBuilder",{enumerable:!0,get:function(){return _.ServerListenerBuilder}}),Object.defineProperty(t,"ResponderBuilder",{enumerable:!0,get:function(){return _.ResponderBuilder}}),Object.defineProperty(t,"ServerInterceptingCall",{enumerable:!0,get:function(){return _.ServerInterceptingCall}});var b=r(2921);Object.defineProperty(t,"ServerMetricRecorder",{enumerable:!0,get:function(){return b.ServerMetricRecorder}});const w=r(342);t.experimental=w;const S=r(6700),E=r(305),C=r(82),T=r(6486),k=r(1563),P=r(9012),$=r(4117),O=r(9503);S.setup(),E.setup(),C.setup(),T.setup(),k.setup(),P.setup(),$.setup(),O.setup()},744:(e,t,r)=>{"use strict";var n=t,s=r(5643),i=r(3262);function o(e,t,r,n){var i=!1;if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",n);for(var o=t.resolvedType.values,a=Object.keys(o),c=0;c<a.length;++c)o[a[c]]!==t.typeDefault||i||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),i=!0),e("case%j:",a[c])("case %i:",o[a[c]])("m%s=%j",n,o[a[c]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=i.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof s||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof s||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?o:c).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",i.safeProp(n[l].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),l=0;l<o.length;++l)r("d%s={}",i.safeProp(o[l].name));r("}")}if(c.length){for(r("if(o.defaults){"),l=0;l<c.length;++l){var d=c[l],u=i.safeProp(d.name);if(d.resolvedType instanceof s)r("d%s=o.enums===String?%j:%j",u,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else r("d%s=%j",u,d.typeDefault)}r("}")}var p=!1;for(l=0;l<t.length;++l){d=t[l];var f=e._fieldsArray.indexOf(d);u=i.safeProp(d.name),d.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),a(r,d,f,u+"[ks2[j]]")("}")):d.repeated?(r("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),a(r,d,f,u+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",u,d.name),a(r,d,f,u),d.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),r("}")}return r("return d")}},781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2365),s=r(5105),i=r(5215),o=r(6545),a=r(6836),c=[n.default,s.default,(0,i.default)(),o.default,a.metadataVocabulary,a.contentVocabulary];t.default=c},818:(e,t,r)=>{"use strict";e.exports=i;var n=r(3449);(i.prototype=Object.create(n.prototype)).constructor=i;var s=r(3610);function i(){n.call(this)}function o(e,t,r){e.length<40?s.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},857:e=>{"use strict";e.exports=require("os")},866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7083),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=s},883:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0,t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER="true"===(null!==(r=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)&&void 0!==r?r:"false")},932:e=>{"use strict";e.exports=require("process")},978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(9048),s=r(2017),i=r(2775),o=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(a.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(c))return!0;if("object"==typeof r&&c(r))return!0}return!1}function l(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!o.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],e=>t+=l(e)),t===1/0))return 1/0}return t}function d(e,t="",r){!1!==r&&(t=p(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function p(e){return e?e.replace(h,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,r){return r=p(r),e.resolve(t,r)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,o=p(e[r]||t),a={"":o},c=d(n,o,!1),l={},u=new Set;return i(e,{allKeys:!0},(e,t,n,s)=>{if(void 0===s)return;const i=c+t;let o=a[s];function d(t){const r=this.opts.uriResolver.resolve;if(t=p(o?r(o,t):t),u.has(t))throw m(t);u.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==p(i)&&("#"===t[0]?(h(e,l[t],t),l[t]=e):this.refs[t]=i),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);d.call(this,`#${e}`)}}"string"==typeof e[r]&&(o=d.call(this,e[r])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),a[t]=o}),l;function h(e,t,r){if(void 0!==t&&!s(e,t))throw m(r)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},1070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:i,data:o,it:a}=e;let c,l;const{minContains:d,maxContains:u}=i;a.opts.next?(c=void 0===d?1:d,l=u):c=1;const h=t.const("len",n._`${o}.length`);if(e.setParams({min:c,max:l}),void 0===l&&0===c)return void(0,s.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==l&&c>l)return(0,s.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(a,r)){let t=n._`${h} >= ${c}`;return void 0!==l&&(t=n._`${t} && ${h} <= ${l}`),void e.pass(t)}a.items=!0;const p=t.name("valid");function f(){const e=t.name("_valid"),r=t.let("count",0);m(e,()=>t.if(e,()=>function(e){t.code(n._`${e}++`),void 0===l?t.if(n._`${e} >= ${c}`,()=>t.assign(p,!0).break()):(t.if(n._`${e} > ${l}`,()=>t.assign(p,!1).break()),1===c?t.assign(p,!0):t.if(n._`${e} >= ${c}`,()=>t.assign(p,!0)))}(r)))}function m(r,n){t.forRange("i",0,h,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},r),n()})}void 0===l&&1===c?m(p,()=>t.if(p,()=>t.break())):0===c?(t.let(p,!0),void 0!==l&&t.if(n._`${o}.length > 0`,f)):(t.let(p,!1),f()),e.result(p,()=>e.reset())}};t.default=i},1080:(e,t,r)=>{"use strict";e.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),d=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof n?"int32":l.type,h=s.basic[u];t="m"+i.safeProp(l.name),l.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|s.mapKey[l.keyType],l.keyType),void 0===h?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,t),r("}")("}")):l.repeated?(r("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==s.packed[u]?r("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",u,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===h?o(r,l,d,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,u,t)),r("}")):(l.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===h?o(r,l,d,t):r("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,u,t))}return r("return w")};var n=r(5643),s=r(361),i=r(3262);function o(e,t,r,n){return t.delimited?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},1085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(3789),s=r(7083),i=r(6735),o=r(7083);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function c(e,t,r){return n._`${a(e)}.call(${t}, ${r})`}function l(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} === undefined`;return s?(0,n.or)(i,(0,n.not)(c(e,t,r))):i}function d(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:s,it:i}=e;r.if(l(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},s,i){return(0,n.or)(...s.map(s=>(0,n.and)(l(e,t,s,r.ownProperties),n._`${i} = ${s}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=c,t.propertyInData=function(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return s?n._`${i} && ${c(e,t,r)}`:i},t.noPropertyInData=l,t.allSchemaProperties=d,t.schemaProperties=function(e,t){return d(t).filter(r=>!(0,s.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:o,errorPath:a},it:c},l,d,u){const h=u?n._`${e}, ${t}, ${s}${o}`:t,p=[[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,a)],[i.default.parentData,c.parentData],[i.default.parentDataProperty,c.parentDataProperty],[i.default.rootData,i.default.rootData]];c.opts.dynamicRef&&p.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const f=n._`${h}, ${r.object(...p)}`;return d!==n.nil?n._`${l}.call(${d}, ${f})`:n._`${l}(${f})`};const u=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(r,s);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:n._`${"new RegExp"===i.code?u:(0,o.useFunc)(e,i)}(${r}, ${s})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:i,it:o}=e,a=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return c(()=>t.assign(e,!1)),e}return t.var(a,!0),c(()=>t.break()),a;function c(o){const c=t.const("len",n._`${r}.length`);t.forRange("i",0,c,r=>{e.subschema({keyword:i,dataProp:r,dataPropType:s.Type.Num},a),t.if((0,n.not)(a),o)})}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:i,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,s.alwaysValidSchema)(o,e))&&!o.opts.unevaluated)return;const a=t.let("valid",!1),c=t.name("_valid");t.block(()=>r.forEach((r,s)=>{const o=e.subschema({keyword:i,schemaProp:s,compositeRule:!0},c);t.assign(a,n._`${a} || ${c}`),e.mergeValidEvaluated(o,c)||t.if((0,n.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},1140:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>n(e,t))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const s=t.RULES.types[n];return s&&!0!==s&&r(e,s)},t.shouldUseGroup=r,t.shouldUseRule=n},1147:(e,t,r)=>{var n;function s(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(r,n){s(e,t||{},function(e,t){e?n(e):r(t)})})}n(e,t||{},function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)})}r(9896),n="win32"===process.platform||global.TESTING_WINDOWS?r(438):r(96),e.exports=s,s.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},1184:function(e,t,r){"use strict";var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){if("darwin"!==process.platform)return void console.log("iOS Simulator MCP provider is only available on macOS");const t=a.window.createOutputChannel("Cursor iOS Simulator Connect");g=new l.ExtensionLogger(t);const r=a.window.registerWebviewPanelSerializer(d.SimulatorWebviewPanel.viewType,{async deserializeWebviewPanel(t,r){if(!v){v=new c.IosSimulatorController(g,e);try{await v.initialize()}catch(e){g?.warn("idb_companion initialization failed during restore",e)}}w=d.SimulatorWebviewPanel.restore(t,e.extensionUri,v,g),w.onDispose?.(()=>{w=null})}});e.subscriptions.push(r);const n=a.commands.registerCommand("cursor-ios-simulator-connect.showLog",()=>{g?.show()}),s=a.commands.registerCommand("cursor-ios-simulator-connect.openDockedView",async()=>{if(!g)return;if(w)return void w.reveal();if(!v){v=new c.IosSimulatorController(g,e);try{await v.initialize()}catch(e){g.warn("idb_companion initialization failed, some features may be limited",e)}}let t=await v.getBootedDevices();if(0===t.length){const e=await a.window.withProgress({location:a.ProgressLocation.Notification,title:"iOS Simulator: Starting simulator...",cancellable:!1},async()=>v.bootFirstAvailableSimulator());if(!e.success)return void a.window.showWarningMessage(e.error||"Failed to start iOS Simulator. Please launch one from Xcode.");if(await new Promise(e=>setTimeout(e,3e3)),t=await v.getBootedDevices(),0===t.length)return void a.window.showWarningMessage("Simulator is starting. Please try again in a few seconds.");a.window.showInformationMessage(`Started iOS Simulator: ${e.name}`)}w=d.SimulatorWebviewPanel.create(e.extensionUri,v,g),w.onDispose?.(()=>{w=null})});e.subscriptions.push(t,n,s);const i=async()=>{b&&await b,b=(async()=>{const t=p();if(t&&!m){_=new u.XcodeBuildMcpManager(g,e.extensionUri.fsPath);try{await _.start()}catch(e){return g?.error("XcodeBuildMCP initialization failed",e),await _.dispose(),void(_=null)}if(!p())return await _.dispose(),void(_=null);v=new c.IosSimulatorController(g,e);try{await v.initialize()}catch(e){g?.warn("idb_companion initialization failed, video streaming may be limited",e)}m=new f(_,g),y=a.cursor.registerMcpProvider(m),g?.info("iOS Simulator MCP provider registered with XcodeBuildMCP")}else!t&&m&&(y&&(y.dispose(),y=null),_&&(await _.dispose(),_=null),v&&(await v.dispose(),v=null),m=null,g?.info("iOS Simulator MCP provider unregistered"))})();try{await b}finally{b=null}};i();const o=a.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration(h)&&i()});e.subscriptions.push(o)},t.deactivate=async function(){b&&await b,y&&(y.dispose(),y=null),_&&(await _.dispose(),_=null),v&&(await v.dispose(),v=null),m&&(await m.dispose(),m=null),g=null};const a=o(r(1398)),c=r(9004),l=r(8377),d=r(8392),u=r(7757),h="cursor.iosSimulator.enabled";function p(){return a.workspace.getConfiguration().get(h,!1)}class f{constructor(e,t){this.xcodeBuildMcpManager=e,this.logger=t,this.id="cursor-ios-simulator-connect",this.featureGateName="ios_simulator_mcp_provider",this.name="XcodeBuildMCP",this.instructions="XcodeBuildMCP is an MCP server that provides tools for Xcode project management, iOS simulator control, and UI testing. Use these tools to interact with iOS applications running in the simulator.\n\nKey capabilities:\n- Build and run iOS projects\n- Control iOS simulators (boot, list, manage)\n- UI testing: tap, swipe, type text, describe UI elements\n- Take screenshots\n- Manage app lifecycle\n\nFor UI interactions, use describe_ui first to get precise element coordinates before using tap/swipe actions. Do not guess coordinates from screenshots."}async listOfferings(){try{const[e,t,r]=await Promise.all([this.xcodeBuildMcpManager.listTools(),this.xcodeBuildMcpManager.listPrompts(),this.xcodeBuildMcpManager.listResources()]);return{tools:e,prompts:t,resources:r}}catch(e){return void this.logger.error("Failed to list offerings from XcodeBuildMCP",e)}}async callTool(e,t){return this.xcodeBuildMcpManager.callTool(e,t)}async dispose(){}}let m=null,g=null,y=null,v=null,_=null,b=null,w=null},1234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i=r(5311),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:o,schemaCode:a,schema:c}=e;o||c&&"object"==typeof c?e.fail$data(n._`!${(0,s.useFunc)(t,i.default)}(${r}, ${a})`):e.fail(n._`${c} !== ${r}`)}};t.default=o},1238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r(9896),s=r(6928),i=r(2549);function o(e,t){const r=e.resolvePath;e.resolvePath=(e,i)=>{if(s.isAbsolute(i))return i;for(const e of t){const t=s.join(e,i);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${i} not found in any of the include paths ${t}`),r(e,i)}}t.loadProtosWithOptions=async function(e,t){const r=new i.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));o(r,t.includeDirs)}const n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){const r=new i.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");o(r,t.includeDirs)}const n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){const e=r(5434),t=r(3951),n=r(2939),s=r(6710);i.common("api",e.nested.google.nested.protobuf.nested),i.common("descriptor",t.nested.google.nested.protobuf.nested),i.common("source_context",n.nested.google.nested.protobuf.nested),i.common("type",s.nested.google.nested.protobuf.nested)}},1273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(3789),s=r(7083),i=r(1085);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const s=1===t?"property":"properties";return n.str`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>n._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);a(e,t),c(e,r)}};function a(e,t=e.schema){const{gen:r,data:s,it:o}=e;if(0===Object.keys(t).length)return;const a=r.let("missing");for(const c in t){const l=t[c];if(0===l.length)continue;const d=(0,i.propertyInData)(r,s,c,o.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),o.allErrors?r.if(d,()=>{for(const t of l)(0,i.checkReportMissingProp)(e,t)}):(r.if(n._`${d} && (${(0,i.checkMissingProp)(e,l,a)})`),(0,i.reportMissingProp)(e,a),r.else())}}function c(e,t=e.schema){const{gen:r,data:n,keyword:o,it:a}=e,c=r.name("valid");for(const l in t)(0,s.alwaysValidSchema)(a,t[l])||(r.if((0,i.propertyInData)(r,n,l,a.opts.ownProperties),()=>{const t=e.subschema({keyword:o,schemaProp:l},c);e.mergeValidEvaluated(t,c)},()=>r.var(c,!0)),e.ok(c))}t.validatePropertyDeps=a,t.validateSchemaDeps=c,t.default=o},1304:(e,t,r)=>{"use strict";e.exports=u;var n=r(7209);((u.prototype=Object.create(n.prototype)).constructor=u).className="Namespace";var s,i,o,a=r(1344),c=r(3262),l=r(1457);function d(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function u(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function h(e){e._nestedArray=null,e._lookupCache={};for(var t=e;t=t.parent;)t._lookupCache={};return e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=d,u.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),u.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?s.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?i.fromJSON:void 0!==t.id?a.fromJSON:u.fromJSON)(r[n],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof s||e instanceof l||e instanceof o||e instanceof i||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof s||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};this.nested[e.name]=e,this instanceof s||this instanceof i||this instanceof o||this instanceof a||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var c=this;c=c.parent;)c._needsRecursiveFeatureResolution=!0,c._needsRecursiveResolve=!0;return e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof u))throw Error("path conflicts with non-namespace objects")}else r.add(r=new u(n))}return t&&r.addJSON(t),r},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,t=0;for(this.resolve();t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this._needsRecursiveResolve=!1,this},u.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,n.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},u.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;var n=e.join(".");if(""===e[0])return this.root.lookup(e.slice(1),t);var s=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+n];if(s&&(!t||t.indexOf(s.constructor)>-1))return s;if((s=this._lookupImpl(e,n))&&(!t||t.indexOf(s.constructor)>-1))return s;if(r)return null;for(var i=this;i.parent;){if((s=i.parent._lookupImpl(e,n))&&(!t||t.indexOf(s.constructor)>-1))return s;i=i.parent}return null},u.prototype._lookupImpl=function(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t))return this._lookupCache[t];var r=this.get(e[0]),n=null;if(r)1===e.length?n=r:r instanceof u&&(e=e.slice(1),n=r._lookupImpl(e,e.join(".")));else for(var s=0;s<this.nestedArray.length;++s)this._nestedArray[s]instanceof u&&(r=this._nestedArray[s]._lookupImpl(e,t))&&(n=r);return this._lookupCache[t]=n,n},u.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,r){s=e,i=t,o=r}},1344:(e,t,r)=>{"use strict";e.exports=l;var n=r(7209);((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var s,i=r(5643),o=r(361),a=r(3262),c=/^required|optional|repeated$/;function l(e,t,r,s,i,l,d){if(a.isObject(s)?(d=i,l=s,s=i=void 0):a.isObject(i)&&(d=l,l=i,i=void 0),n.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==s&&!c.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=d}l.fromJSON=function(e,t){var r=new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);return t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},Object.defineProperty(l.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(l.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(l.prototype,"delimited",{get:function(){return this.resolvedType instanceof s&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(l.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(l.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),l.prototype.setOption=function(e,t,r){return n.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.prototype._inferLegacyProtoFeatures=function(e){if("proto2"!==e&&"proto3"!==e)return{};var t={};if("required"===this.rule&&(t.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===o.defaults[this.type]){var r=this.parent.get(this.type.split(".").pop());r&&r instanceof s&&r.group&&(t.message_encoding="DELIMITED")}return!0===this.getOption("packed")?t.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&(t.repeated_field_encoding="EXPANDED"),t},l.prototype._resolveFeatures=function(e){return n.prototype._resolveFeatures.call(this,this._edition||e)},l.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,i){a.decorateType(s.constructor).add(new l(i,e,t,r,{default:n}))}},l._configure=function(e){s=e}},1385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;const n=r(463),s=r(3956),i=r(267),o=r(131),a=r(3822),c=r(8996),l=r(9503),d=r(246);t.Subchannel=class{constructor(e,t,r,i,o){var a;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.connector=o,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.dataProducers=new Map,this.subchannelChannel=null;const d={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new s.BackoffTimeout(()=>{this.handleBackoffTimer()},d),this.backoffTimeout.unref(),this.subchannelAddressString=(0,c.subchannelAddressToString)(t),this.keepaliveTime=null!==(a=r["grpc.keepalive_time_ms"])&&void 0!==a?a:-1,0===r["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new l.ChannelzTraceStub,this.callTracker=new l.ChannelzCallTrackerStub,this.childrenTracker=new l.ChannelzChildrenTrackerStub,this.streamTracker=new l.ChannelzCallTrackerStub):(this.channelzTrace=new l.ChannelzTrace,this.callTracker=new l.ChannelzCallTracker,this.childrenTracker=new l.ChannelzChildrenTracker,this.streamTracker=new l.ChannelzCallTracker),this.channelzRef=(0,l.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2)),this.secureConnector=i._createSecureConnector(e,r)}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){i.trace(o.LogVerbosity.DEBUG,"subchannel","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){i.trace(o.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,2147483647);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,i.log(o.LogVerbosity.ERROR,`Connection to ${(0,a.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var s,i;if(-1===e.indexOf(this.connectivityState))return!1;r?this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]+' with error "'+r+'"'):this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);const o=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(s=this.transport)||void 0===s||s.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(i=this.transport)||void 0===i||i.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of this.stateListeners)e(this,o,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzTrace.addTrace("CT_INFO","Shutting down"),(0,l.unregisterChannelzRef)(this.channelzRef),this.secureConnector.destroy(),process.nextTick(()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:e=>{e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,t,r,n,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState===n.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return!0}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}getCallCredentials(){return this.secureConnector.getCallCredentials()}getChannel(){return this.subchannelChannel||(this.subchannelChannel=new d.SingleSubchannelChannel(this,this.channelTarget,this.options)),this.subchannelChannel}addDataWatcher(e){throw new Error("Not implemented")}getOrCreateDataProducer(e,t){const r=this.dataProducers.get(e);if(r)return r;const n=t(this);return this.dataProducers.set(e,n),n}removeDataProducer(e){this.dataProducers.delete(e)}}},1395:(e,t,r)=>{"use strict";const n=r(7521);e.exports=(e="")=>{const t=e.match(n);if(!t)return null;const[r,s]=t[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return"env"===i?s:s?`${i} ${s}`:i}},1398:e=>{"use strict";e.exports=require("vscode")},1426:(e,t,r)=>{"use strict";const n=r(6928),s=r(6911),i=r(9376);function o(e,t){const r=e.options.env||process.env,o=process.cwd(),a=null!=e.options.cwd,c=a&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let l;try{l=s.sync(e.command,{path:r[i({env:r})],pathExt:t?n.delimiter:void 0})}catch(e){}finally{c&&process.chdir(o)}return l&&(l=n.resolve(a?e.options.cwd:"",l)),l}e.exports=function(e){return o(e)||o(e,!0)}},1430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(6596),s=r(3781),i=r(6670),o=r(978),a=r(9048),c=r(3697);class l{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,o.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function d(e){const t=h.call(this,e);if(t)return t;const r=(0,o.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:l}=this.opts.code,{ownProperties:d}=this.opts,u=new n.CodeGen(this.scope,{es5:a,lines:l,ownProperties:d});let p;e.$async&&(p=u.scopeValue("Error",{ref:s.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const f=u.scopeName("validate");e.validateName=f;const m={gen:u,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,c.validateFunctionCode)(m),u.optimize(this.opts.code.optimize);const t=u.toString();g=`${u.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const r=new Function(`${i.default.self}`,`${i.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:f,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=m;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function u(e){return(0,o.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function h(e){for(const t of this._compilations)if(p(t,e))return t}function p(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||m.call(this,e,t)}function m(e,t){const r=this.opts.uriResolver.parse(t),n=(0,o._getFullPath)(this.opts.uriResolver,r);let s=(0,o.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return y.call(this,r,e);const i=(0,o.normalizeId)(n),a=this.refs[i]||this.schemas[i];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),i===(0,o.normalizeId)(t)){const{schema:t}=a,{schemaId:r}=this.opts,n=t[r];return n&&(s=(0,o.resolveUrl)(this.opts.uriResolver,s,n)),new l({schema:t,schemaId:r,root:e,baseId:s})}return y.call(this,r,a)}}t.SchemaEnv=l,t.compileSchema=d,t.resolveRef=function(e,t,r){var n;r=(0,o.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=f.call(this,e,r);if(void 0===i){const s=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:o}=this.opts;s&&(i=new l({schema:s,schemaId:o,root:e,baseId:t}))}return void 0!==i?e.refs[r]=u.call(this,i):void 0},t.getCompilingSchema=h,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:r,root:n}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,a.unescapeFragment)(n)];if(void 0===e)return;const s="object"==typeof(r=e)&&r[this.opts.schemaId];!g.has(n)&&s&&(t=(0,o.resolveUrl)(this.opts.uriResolver,t,s))}let i;if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){const e=(0,o.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=m.call(this,n,e)}const{schemaId:c}=this.opts;return i=i||new l({schema:r,schemaId:c,root:n,baseId:t}),i.schema!==i.root.schema?i:void 0}},1447:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,s=null,i=[],o=0;t<r;)(n=e[t++])<128?i[o++]=n:n>191&&n<224?i[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[o++]=55296+(n>>10),i[o++]=56320+(1023&n)):i[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,i.slice(0,o))),s.join("")):String.fromCharCode.apply(String,i.slice(0,o))},r.write=function(e,t,r){for(var n,s,i=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(s=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&s),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},1457:(e,t,r)=>{"use strict";e.exports=o;var n=r(7209);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var s=r(1344),i=r(3262);function o(e,t,r,s){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},Object.defineProperty(o.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var e=this.fieldsArray[0];return null!=e.options&&!0===e.options.proto3_optional}}),o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},1464:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},1526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9048),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,n.alwaysValidSchema)(s,r))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=s},1544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=void 0,t.callErrorFromStatus=function(e,t){const r=`${e.code} ${i.Status[e.code]}: ${e.details}`,n=`${new Error(r).stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:n})};const n=r(4434),s=r(2203),i=r(131);class o extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(i.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}}t.ClientUnaryCallImpl=o;class a extends s.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(i.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=a;class c extends s.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(i.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_write(e,t,r){var n;const s={callback:r},i=Number(t);Number.isNaN(i)||(s.flags=i),null===(n=this.call)||void 0===n||n.sendMessageWithContext(s,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=c;class l extends s.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(i.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;const s={callback:r},i=Number(t);Number.isNaN(i)||(s.flags=i),null===(n=this.call)||void 0===n||n.sendMessageWithContext(s,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=l},1563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoundRobinLoadBalancer=void 0,t.setup=function(){(0,n.registerLoadBalancerType)(u,f,h)};const n=r(8923),s=r(463),i=r(178),o=r(267),a=r(131),c=r(8996),l=r(6486);function d(e){o.trace(a.LogVerbosity.DEBUG,"round_robin",e)}const u="round_robin";class h{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new h}}class p{constructor(e,t=0){this.children=e,this.nextIndex=t}pick(e){const t=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,t.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}}class f{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=s.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=!1,this.lastError=null,this.childChannelControlHelper=(0,n.createChildChannelControlHelper)(e,{updateState:(e,t,r)=>{this.currentState===s.ConnectivityState.READY&&e!==s.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),r&&(this.lastError=r),this.calculateAndUpdateState()}})}countChildrenWithState(e){return this.children.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(!this.updatesPaused){if(this.countChildrenWithState(s.ConnectivityState.READY)>0){const e=this.children.filter(e=>e.getConnectivityState()===s.ConnectivityState.READY);let t=0;if(null!==this.currentReadyPicker){const r=this.currentReadyPicker.peekNextEndpoint();t=e.findIndex(e=>(0,c.endpointEqual)(e.getEndpoint(),r)),t<0&&(t=0)}this.updateState(s.ConnectivityState.READY,new p(e.map(e=>({endpoint:e.getEndpoint(),picker:e.getPicker()})),t),null)}else if(this.countChildrenWithState(s.ConnectivityState.CONNECTING)>0)this.updateState(s.ConnectivityState.CONNECTING,new i.QueuePicker(this),null);else if(this.countChildrenWithState(s.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.IDLE,new i.QueuePicker(this),null);for(const e of this.children)e.getConnectivityState()===s.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,t,r){d(s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children)e.destroy();this.children=[]}updateAddressList(e,t,r,n){if(!(t instanceof h))return!1;if(!e.ok)return 0===this.children.length&&this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker(e.error),e.error.details),!0;const o=Math.random()*e.value.length|0,a=function(e,t){return[...e.slice(t),...e.slice(0,t)]}(e.value,o);if(this.resetSubchannelList(),0===a.length){const e=`No addresses resolved. Resolution note: ${n}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:e}),e)}d("Connect to endpoint list "+a.map(c.endpointToString)),this.updatesPaused=!0,this.children=a.map(e=>new l.LeafLoadBalancer(e,this.childChannelControlHelper,r,n));for(const e of this.children)e.startConnecting();return this.updatesPaused=!1,this.calculateAndUpdateState(),!0}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return u}}t.RoundRobinLoadBalancer=f},1584:(e,t,r)=>{"use strict";var n;r.d(t,{fd:()=>s}),Symbol("ZodOutput"),Symbol("ZodInput");(n=globalThis).__zod_globalRegistry??(n.__zod_globalRegistry=new class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}});const s=globalThis.__zod_globalRegistry},1665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(1085).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},1703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=n},1808:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},1828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9877),s=r(6596),i=r(9048),o=r(5311),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:a,schema:c,parentSchema:l,schemaCode:d,it:u}=e;if(!a&&!c)return;const h=t.let("valid"),p=l.items?(0,n.getSchemaTypes)(l.items):[];function f(i,o){const a=t.name("item"),c=(0,n.checkDataTypes)(p,a,u.opts.strictNumbers,n.DataType.Wrong),l=t.const("indices",s._`{}`);t.for(s._`;${i}--;`,()=>{t.let(a,s._`${r}[${i}]`),t.if(c,s._`continue`),p.length>1&&t.if(s._`typeof ${a} == "string"`,s._`${a} += "_"`),t.if(s._`typeof ${l}[${a}] == "number"`,()=>{t.assign(o,s._`${l}[${a}]`),e.error(),t.assign(h,!1).break()}).code(s._`${l}[${a}] = ${i}`)})}function m(n,a){const c=(0,i.useFunc)(t,o.default),l=t.name("outer");t.label(l).for(s._`;${n}--;`,()=>t.for(s._`${a} = ${n}; ${a}--;`,()=>t.if(s._`${c}(${r}[${n}], ${r}[${a}])`,()=>{e.error(),t.assign(h,!1).break(l)})))}e.block$data(h,function(){const n=t.let("i",s._`${r}.length`),i=t.let("j");e.setParams({i:n,j:i}),t.assign(h,!0),t.if(s._`${n} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?f:m)(n,i))},s._`${d} === false`),e.ok(h)}};t.default=a},1943:e=>{"use strict";e.exports=require("fs/promises")},1980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(6596),s=r(9048),i=r(6670),o=r(9048);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function c(e,t,r){return n._`${a(e)}.call(${t}, ${r})`}function l(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} === undefined`;return s?(0,n.or)(i,(0,n.not)(c(e,t,r))):i}function d(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:s,it:i}=e;r.if(l(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},s,i){return(0,n.or)(...s.map(s=>(0,n.and)(l(e,t,s,r.ownProperties),n._`${i} = ${s}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=c,t.propertyInData=function(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return s?n._`${i} && ${c(e,t,r)}`:i},t.noPropertyInData=l,t.allSchemaProperties=d,t.schemaProperties=function(e,t){return d(t).filter(r=>!(0,s.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:o,errorPath:a},it:c},l,d,u){const h=u?n._`${e}, ${t}, ${s}${o}`:t,p=[[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,a)],[i.default.parentData,c.parentData],[i.default.parentDataProperty,c.parentDataProperty],[i.default.rootData,i.default.rootData]];c.opts.dynamicRef&&p.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const f=n._`${h}, ${r.object(...p)}`;return d!==n.nil?n._`${l}.call(${d}, ${f})`:n._`${l}(${f})`};const u=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(r,s);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:n._`${"new RegExp"===i.code?u:(0,o.useFunc)(e,i)}(${r}, ${s})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:i,it:o}=e,a=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return c(()=>t.assign(e,!1)),e}return t.var(a,!0),c(()=>t.break()),a;function c(o){const c=t.const("len",n._`${r}.length`);t.forRange("i",0,c,r=>{e.subschema({keyword:i,dataProp:r,dataPropType:s.Type.Num},a),t.if((0,n.not)(a),o)})}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:i,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,s.alwaysValidSchema)(o,e))&&!o.opts.unevaluated)return;const a=t.let("valid",!1),c=t.name("_valid");t.block(()=>r.forEach((r,s)=>{const o=e.subschema({keyword:i,schemaProp:s,compositeRule:!0},c);t.assign(a,n._`${a} || ${c}`),e.mergeValidEvaluated(o,c)||t.if((0,n.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i=r(6158),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:o,it:a}=e,c="maxLength"===t?n.operators.GT:n.operators.LT,l=!1===a.opts.unicode?n._`${r}.length`:n._`${(0,s.useFunc)(e.gen,i.default)}(${r})`;e.fail$data(n._`${l} ${c} ${o}`)}};t.default=o},2014:(e,t,r)=>{"use strict";const n=r(6928),s=r(1426),i=r(4483),o=r(9182),a="win32"===process.platform,c=/\.(?:com|exe)$/i,l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const d={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?d:function(e){if(!a)return e;const t=function(e){e.file=s(e);const t=e.file&&o(e.file);return t?(e.args.unshift(e.file),e.command=t,s(e)):e.file}(e),r=!c.test(t);if(e.options.forceShell||r){const r=l.test(t);e.command=n.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map(e=>i.argument(e,r));const s=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${s}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}(d)}},2017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!==s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!==s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;0!==s--;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},2028:e=>{var t,r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\ud800-\\udfff",i="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",a="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",l="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="["+s+"]",p="["+u+"]",f="["+i+o+"]",m="\\d+",g="["+a+"]",y="["+c+"]",v="[^"+s+u+m+a+c+l+"]",_="\\ud83c[\\udffb-\\udfff]",b="[^"+s+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",E="["+l+"]",C="\\u200d",T="(?:"+y+"|"+v+")",k="(?:"+E+"|"+v+")",P="(?:['](?:d|ll|m|re|s|t|ve))?",$="(?:['](?:D|LL|M|RE|S|T|VE))?",O="(?:"+f+"|"+_+")?",x="["+d+"]?",N=x+O+"(?:"+C+"(?:"+[b,w,S].join("|")+")"+x+O+")*",R="(?:"+[g,w,S].join("|")+")"+N,I="(?:"+[b+f+"?",f,w,S,h].join("|")+")",A=RegExp("[']","g"),M=RegExp(f,"g"),j=RegExp(_+"(?="+_+")|"+I+N,"g"),z=RegExp([E+"?"+y+"+"+P+"(?="+[p,E,"$"].join("|")+")",k+"+"+$+"(?="+[p,E+T,"$"].join("|")+")",E+"?"+T+"+"+P,E+"+"+$,m,R].join("|"),"g"),D=RegExp("["+C+s+i+o+d+"]"),L=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,F="object"==typeof global&&global&&global.Object===Object&&global,U="object"==typeof self&&self&&self.Object===Object&&self,B=F||U||Function("return this")(),q=(t={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},function(e){return null==t?void 0:t[e]});function V(e){return D.test(e)}var H=Object.prototype.toString,Z=B.Symbol,W=Z?Z.prototype:void 0,G=W?W.toString:void 0;function K(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==H.call(e)}(e))return G?G.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}var J,Y=(J=function(e,t,r){return t=t.toLowerCase(),e+(r?X(K(t).toLowerCase()):t)},function(e){return function(e,t,r){for(var n=-1,s=e?e.length:0;++n<s;)r=t(r,e[n],n,e);return r}(function(e,t){return e=K(e),void 0===t?function(e){return L.test(e)}(e)?function(e){return e.match(z)||[]}(e):function(e){return e.match(r)||[]}(e):e.match(t)||[]}(function(e){return(e=K(e))&&e.replace(n,q).replace(M,"")}(e).replace(A,"")),J,"")}),X=function(e){var t,r,n,s,i=V(e=K(e))?function(e){return V(e)?function(e){return e.match(j)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,o=i?i[0]:e.charAt(0),a=i?(t=i,r=1,s=t.length,n=void 0===n?s:n,!r&&n>=s?t:function(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}(t,r,n)).join(""):e.slice(1);return o.toUpperCase()+a};e.exports=Y},2095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;const n=r(5675),s=r(4756),i=r(9503),o=r(131),a=r(7803),c=r(267),l=r(9302),d=r(8996),u=r(3822),h=r(9278),p=r(5486),f=r(5572),m="transport",g=r(9943).rE,{HTTP2_HEADER_AUTHORITY:y,HTTP2_HEADER_CONTENT_TYPE:v,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:b,HTTP2_HEADER_TE:w,HTTP2_HEADER_USER_AGENT:S}=n.constants,E=Buffer.from("too_many_pings","ascii");class C{constructor(e,t,r,o){this.session=e,this.options=r,this.remoteName=o,this.keepaliveTimer=null,this.pendingSendKeepalivePing=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,d.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.streamTracker=new i.ChannelzCallTrackerStub):this.streamTracker=new i.ChannelzCallTracker,this.channelzRef=(0,i.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${g}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),this.keepaliveTimeMs="grpc.keepalive_time_ms"in r?r["grpc.keepalive_time_ms"]:-1,this.keepaliveTimeoutMs="grpc.keepalive_timeout_ms"in r?r["grpc.keepalive_timeout_ms"]:2e4,this.keepaliveWithoutCalls="grpc.keepalive_permit_without_calls"in r&&1===r["grpc.keepalive_permit_without_calls"],e.once("close",()=>{this.trace("session closed"),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let s=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(E)&&(s=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(s)}),e.once("error",e=>{this.trace("connection closed with error "+e.message),this.handleDisconnect()}),e.socket.once("close",e=>{this.trace("connection closed. hadError="+e),this.handleDisconnect()}),c.isTracerEnabled(m)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer(),e.socket instanceof s.TLSSocket?this.authContext={transportSecurityType:"ssl",sslPeerCertificate:e.socket.getPeerCertificate()}:this.authContext={}}getChannelzInfo(){var e,t,r;const n=this.session.socket,s=n.remoteAddress?(0,d.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,i=n.localAddress?(0,d.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let o;if(this.session.encrypted){const t=n,r=t.getCipher(),s=t.getCertificate(),i=t.getPeerCertificate();o={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:i&&"raw"in i?i.raw:null}}else o=null;return{remoteAddress:s,localAddress:i,security:o,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){c.trace(o.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){c.trace(o.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){c.trace(o.LogVerbosity.DEBUG,"transport_flowctrl","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){c.trace(o.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(!1);for(const e of this.activeCalls)e.onDisconnect();setImmediate(()=>{this.session.destroy()})}addDisconnectListener(e){this.disconnectListeners.push(e)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(!this.canSendPing())return void(this.pendingSendKeepalivePing=!0);if(this.keepaliveTimer)return void console.error("keepaliveTimeout is not null");this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e);let r="";try{this.session.ping((e,t,r)=>{this.clearKeepaliveTimeout(),e?(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()):(this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer())})||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}r&&(this.keepaliveTrace("Ping send failed: "+r),this.handleDisconnect())}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimer||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.maybeSendPing()},this.keepaliveTimeMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e)))}clearKeepaliveTimeout(){this.keepaliveTimer&&(clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null)}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,s){const i=e.toHttp2Headers();let o,a,c;i[y]=t,i[S]=this.userAgent,i[v]="application/grpc",i[_]="POST",i[b]=r,i[w]="trailers";try{o=this.session.request(i)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=s.addMessageSent)||void 0===e||e.call(s)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=s.addMessageReceived)||void 0===e||e.call(s)},onCallEnd:e=>{var t;null===(t=s.onCallEnd)||void 0===t||t.call(s,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=s.onStreamEnd)||void 0===t||t.call(s,e)}}):a={addMessageSent:()=>{var e;null===(e=s.addMessageSent)||void 0===e||e.call(s)},addMessageReceived:()=>{var e;null===(e=s.addMessageReceived)||void 0===e||e.call(s)},onCallEnd:e=>{var t;null===(t=s.onCallEnd)||void 0===t||t.call(s,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;null===(t=s.onStreamEnd)||void 0===t||t.call(s,e)}},c=new p.Http2SubchannelCall(o,a,n,this,(0,f.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}getAuthContext(){return this.authContext}shutdown(){this.session.close(),(0,i.unregisterChannelzRef)(this.channelzRef)}}t.Http2SubchannelConnector=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){c.trace(o.LogVerbosity.DEBUG,m,(0,u.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r){return this.isShutdown?Promise.reject():e.socket.closed?Promise.reject("Connection closed before starting HTTP/2 handshake"):new Promise((s,i)=>{var o,a,c,d,h,p,f,m;let g=null,y=this.channelTarget;if("grpc.http_connect_target"in r){const e=(0,u.parseUri)(r["grpc.http_connect_target"]);e&&(y=e,g=(0,u.uriToString)(e))}const v=e.secure?"https":"http",_=(0,l.getDefaultAuthority)(y),b=()=>{var e;null===(e=this.session)||void 0===e||e.destroy(),this.session=null,setImmediate(()=>{$||($=!0,i(`${P.trim()} (${(new Date).toISOString()})`))})},w=e=>{var t;null===(t=this.session)||void 0===t||t.destroy(),P=e.message,this.trace("connection failed with error "+P),$||($=!0,i(`${P} (${(new Date).toISOString()})`))},S={createConnection:(t,r)=>e.socket,settings:{initialWindowSize:null!==(d=null!==(o=r["grpc-node.flow_control_window"])&&void 0!==o?o:null===(c=null===(a=n.getDefaultSettings)||void 0===a?void 0:a.call(n))||void 0===c?void 0:c.initialWindowSize)&&void 0!==d?d:65535},maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER,maxSessionMemory:null!==(h=r["grpc-node.max_session_memory"])&&void 0!==h?h:Number.MAX_SAFE_INTEGER},E=n.connect(`${v}://${_}`,S),T=null!==(m=null===(f=null===(p=n.getDefaultSettings)||void 0===p?void 0:p.call(n))||void 0===f?void 0:f.initialWindowSize)&&void 0!==m?m:65535,k=r["grpc-node.flow_control_window"];this.session=E;let P="Failed to connect",$=!1;E.unref(),E.once("remoteSettings",()=>{var n;if(k&&k>T)try{E.setLocalWindowSize(k)}catch(e){const t=k-(null!==(n=E.state.localWindowSize)&&void 0!==n?n:T);t>0&&E.incrementWindowSize(t)}E.removeAllListeners(),e.socket.removeListener("close",b),e.socket.removeListener("error",w),s(new C(E,t,r,g)),this.session=null}),E.once("close",b),E.once("error",w),e.socket.once("close",b),e.socket.once("error",w)})}tcpConnect(e,t){return(0,a.getProxiedConnection)(e,t).then(t=>t||new Promise((t,r)=>{const n=()=>{r(new Error("Socket closed"))},s=e=>{r(e)},i=h.connect(e,()=>{i.removeListener("close",n),i.removeListener("error",s),t(i)});i.once("close",n),i.once("error",s)}))}async connect(e,t,r){if(this.isShutdown)return Promise.reject();let n=null,s=null;const i=(0,d.subchannelAddressToString)(e);try{return this.trace(i+" Waiting for secureConnector to be ready"),await t.waitForReady(),this.trace(i+" secureConnector is ready"),n=await this.tcpConnect(e,r),n.setNoDelay(),this.trace(i+" Established TCP connection"),s=await t.connect(n),this.trace(i+" Established secure connection"),this.createSession(s,e,r)}catch(e){throw null==n||n.destroy(),null==s||s.socket.destroy(),e}}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}},2104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class s extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)c(r,t[n]),r.push(e[++n]);return new s(r)}t._Code=s,t.nil=new s(""),t._=i;const o=new s("+");function a(e,...t){const r=[d(e[0])];let n=0;for(;n<t.length;)r.push(o),c(r,t[n]),r.push(o,d(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new s(r)}function c(e,t){var r;t instanceof s?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:d(Array.isArray(r)?r.join(","):r))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=c,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new s(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},2149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9048),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=s},2203:e=>{"use strict";e.exports=require("stream")},2239:(e,t,r)=>{"use strict";e.exports=s;var n=r(3610);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=s.zero=new s(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new s(r,n)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(n.isString(e)){if(!n.Long)return s.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):i},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?i:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},2250:e=>{"use strict";e.exports=require("dns")},2261:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,s=0;for(;s<t;)n++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},2267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;const n=r(4097);class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;var i;s="getRequestHeaders"in(i=e)&&"function"==typeof i.getRequestHeaders?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>{e?n(e):t?r(t):n(new Error("Headers not set by metadata plugin"))})}),s.then(e=>{const t=new n.Metadata;for(const r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new a}}t.CallCredentials=s;class i extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){const t=new n.Metadata,r=await Promise.all(this.creds.map(t=>t.generateMetadata(e)));for(const e of r)t.merge(e);return t}compose(e){return new i(this.creds.concat([e]))}_equals(e){return this===e||e instanceof i&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new i([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class a extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof a}}},2284:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0,t.StatusBuilder=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){const e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}},2327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1980),s=r(6596),i=r(6670),o=r(9048),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:c,errsCount:l,it:d}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,o.alwaysValidSchema)(d,r))return;const p=(0,n.allSchemaProperties)(a.properties),f=(0,n.allSchemaProperties)(a.patternProperties);function m(e){t.code(s._`delete ${c}[${e}]`)}function g(n){if("all"===h.removeAdditional||h.removeAdditional&&!1===r)m(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(u||t.break());if("object"==typeof r&&!(0,o.alwaysValidSchema)(d,r)){const r=t.name("valid");"failing"===h.removeAdditional?(y(n,r,!1),t.if((0,s.not)(r),()=>{e.reset(),m(n)})):(y(n,r),u||t.if((0,s.not)(r),()=>t.break()))}}}function y(t,r,n){const s={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===n&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}t.forIn("key",c,r=>{p.length||f.length?t.if(function(r){let i;if(p.length>8){const e=(0,o.schemaRefOrVal)(d,a.properties,"properties");i=(0,n.isOwnProperty)(t,e,r)}else i=p.length?(0,s.or)(...p.map(e=>s._`${r} === ${e}`)):s.nil;return f.length&&(i=(0,s.or)(i,...f.map(t=>s._`${(0,n.usePattern)(e,t)}.test(${r})`))),(0,s.not)(i)}(r),()=>g(r)):g(r)}),e.ok(s._`${l} === ${i.default.errors}`)}};t.default=a},2348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(450),s=r(6711),i=r(3875),o=r(302),a=r(8094),c=r(4267),l=r(9347),d=r(2785),u=r(3767),h=r(4715),p=[n.default,s.default,i.default,o.default,a.default,c.default,l.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=p},2363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(6596),s=r(9048);function i(e,t,r){const{gen:i,compositeRule:o,data:a,opts:c}=e;if(void 0===r)return;const l=n._`${a}${(0,n.getProperty)(t)}`;if(o)return void(0,s.checkStrictMode)(e,`default is ignored for: ${l}`);let d=n._`${l} === undefined`;"empty"===c.useDefaults&&(d=n._`${d} || ${l} === null || ${l} === ""`),i.if(d,n._`${l} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach((t,r)=>i(e,r,t.default))}},2365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1464),s=r(3740),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,s.default];t.default=i},2379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0,t.BaseSubchannelWrapper=class{constructor(e){this.child=e,this.healthy=!0,this.healthListeners=new Set,this.refcount=0,this.dataWatchers=new Set,e.addHealthStateWatcher(e=>{this.healthy&&this.updateHealthListeners()})}updateHealthListeners(){for(const e of this.healthListeners)e(this.isHealthy())}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref(),this.refcount+=1}unref(){this.child.unref(),this.refcount-=1,0===this.refcount&&this.destroy()}destroy(){for(const e of this.dataWatchers)e.destroy()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e)}removeHealthStateWatcher(e){this.healthListeners.delete(e)}addDataWatcher(e){e.setSubchannel(this.getRealSubchannel()),this.dataWatchers.add(e)}setHealthy(e){e!==this.healthy&&(this.healthy=e,this.child.isHealthy()&&this.updateHealthListeners())}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}getChannel(){return this.child.getChannel()}}},2394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(7666),s=r(4824),i=r(7013),o=r(2455),a=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var d=r(9810);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=r(3789);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=r(9598);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=r(303);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},2455:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},2482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},2503:(e,t,r)=>{"use strict";function n(e){return e}function s(e){return e}function i(e){}function o(e){throw new Error("Unexpected value in exhaustive check")}function a(e){}function c(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function l(e,t="|"){return e.map(e=>L(e)).join(t)}function d(e,t){return"bigint"==typeof t?t.toString():t}function u(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function h(e){return null==e}function p(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function f(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(0===s&&/\d?e-\d?/.test(n)){const e=n.match(/\d?e-(\d?)/);e?.[1]&&(s=Number.parseInt(e[1]))}const i=r>s?r:s;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}r.r(t),r.d(t,{BIGINT_FORMAT_RANGES:()=>B,Class:()=>de,NUMBER_FORMAT_RANGES:()=>U,aborted:()=>J,allowsEval:()=>$,assert:()=>a,assertEqual:()=>n,assertIs:()=>i,assertNever:()=>o,assertNotEqual:()=>s,assignProp:()=>v,base64ToUint8Array:()=>se,base64urlToUint8Array:()=>oe,cached:()=>u,captureStackTrace:()=>k,cleanEnum:()=>ne,cleanRegex:()=>p,clone:()=>j,cloneDef:()=>b,createTransparentProxy:()=>D,defineLazy:()=>g,esc:()=>C,escapeRegex:()=>M,extend:()=>H,finalizeIssue:()=>Q,floatSafeRemainder:()=>f,getElementAtPath:()=>w,getEnumValues:()=>c,getLengthableOrigin:()=>te,getParsedType:()=>R,getSizableOrigin:()=>ee,hexToUint8Array:()=>ce,isObject:()=>P,isPlainObject:()=>O,issue:()=>re,joinValues:()=>l,jsonStringifyReplacer:()=>d,merge:()=>W,mergeDefs:()=>_,normalizeParams:()=>z,nullish:()=>h,numKeys:()=>N,objectClone:()=>y,omit:()=>V,optionalKeys:()=>F,partial:()=>G,pick:()=>q,prefixIssues:()=>Y,primitiveTypes:()=>A,promiseAllObject:()=>S,propertyKeyTypes:()=>I,randomString:()=>E,required:()=>K,safeExtend:()=>Z,shallowClone:()=>x,slugify:()=>T,stringifyPrimitive:()=>L,uint8ArrayToBase64:()=>ie,uint8ArrayToBase64url:()=>ae,uint8ArrayToHex:()=>le,unwrapMessage:()=>X});const m=Symbol("evaluating");function g(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==m)return void 0===n&&(n=m,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function y(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function v(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function _(...e){const t={};for(const r of e){const e=Object.getOwnPropertyDescriptors(r);Object.assign(t,e)}return Object.defineProperties({},t)}function b(e){return _(e._zod.def)}function w(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function S(e){const t=Object.keys(e),r=t.map(t=>e[t]);return Promise.all(r).then(e=>{const r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function E(e=10){let t="";for(let r=0;r<e;r++)t+="abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())];return t}function C(e){return JSON.stringify(e)}function T(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const k="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function P(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const $=u(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function O(e){if(!1===P(e))return!1;const t=e.constructor;if(void 0===t)return!0;if("function"!=typeof t)return!0;const r=t.prototype;return!1!==P(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function x(e){return O(e)?{...e}:Array.isArray(e)?[...e]:e}function N(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}const R=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":"undefined"!=typeof Map&&e instanceof Map?"map":"undefined"!=typeof Set&&e instanceof Set?"set":"undefined"!=typeof Date&&e instanceof Date?"date":"undefined"!=typeof File&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},I=new Set(["string","number","symbol"]),A=new Set(["string","number","bigint","boolean","symbol","undefined"]);function M(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j(e,t,r){const n=new e._zod.constr(t??e._zod.def);return t&&!r?.parent||(n._zod.parent=e),n}function z(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function D(e){let t;return new Proxy({},{get:(r,n,s)=>(t??(t=e()),Reflect.get(t,n,s)),set:(r,n,s,i)=>(t??(t=e()),Reflect.set(t,n,s,i)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,s)=>(t??(t=e()),Reflect.defineProperty(t,n,s))})}function L(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function F(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}const U={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},B={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function q(e,t){const r=e._zod.def;return j(e,_(e._zod.def,{get shape(){const e={};for(const n in t){if(!(n in r.shape))throw new Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return v(this,"shape",e),e},checks:[]}))}function V(e,t){const r=e._zod.def,n=_(e._zod.def,{get shape(){const n={...e._zod.def.shape};for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return v(this,"shape",n),n},checks:[]});return j(e,n)}function H(e,t){if(!O(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const n=_(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return v(this,"shape",r),r},checks:[]});return j(e,n)}function Z(e,t){if(!O(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return v(this,"shape",r),r},checks:e._zod.def.checks};return j(e,r)}function W(e,t){const r=_(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return v(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return j(e,r)}function G(e,t,r){const n=_(t._zod.def,{get shape(){const n=t._zod.def.shape,s={...n};if(r)for(const t in r){if(!(t in n))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(s[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(const t in n)s[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return v(this,"shape",s),s},checks:[]});return j(t,n)}function K(e,t,r){const n=_(t._zod.def,{get shape(){const n=t._zod.def.shape,s={...n};if(r)for(const t in r){if(!(t in s))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(s[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(const t in n)s[t]=new e({type:"nonoptional",innerType:n[t]});return v(this,"shape",s),s},checks:[]});return j(t,n)}function J(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1}function Y(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function X(e){return"string"==typeof e?e:e?.message}function Q(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const s=X(e.inst?._zod.def?.error?.(e))??X(t?.error?.(e))??X(r.customError?.(e))??X(r.localeError?.(e))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function ee(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function te(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function re(...e){const[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function ne(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function se(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function ie(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function oe(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return se(t+"=".repeat((4-t.length%4)%4))}function ae(e){return ie(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ce(e){const t=e.replace(/^0x/,"");if(t.length%2!=0)throw new Error("Invalid hex string length");const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function le(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class de{constructor(...e){}}},2546:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},2549:(e,t,r)=>{"use strict";e.exports=r(9100)},2551:(e,t,r)=>{"use strict";e.exports=s;var n=r(3610);function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},2558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0,t.BaseFilter=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}},2610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7065),s=r(7394),i=r(7366),o=r(6166),a=r(6925),c=r(1273),l=r(7705),d=r(396),u=r(5581),h=r(8013),p=r(6939),f=r(1665),m=r(9259),g=r(6636),y=r(7567),v=r(866);t.default=function(e=!1){const t=[p.default,f.default,m.default,g.default,y.default,v.default,l.default,d.default,c.default,u.default,h.default];return e?t.push(s.default,o.default):t.push(n.default,i.default),t.push(a.default),t}},2611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;const n=r(463),s=r(131),i=r(6308),o=r(4097),a=r(178),c=r(3822),l=r(267),d=r(6067),u=r(5675);t.LoadBalancingCall=class{constructor(e,t,r,n,s,i,o){var a,l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=s,this.deadline=i,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;const d=this.methodName.split("/");let u="";d.length>=2&&(u=d[1]);const h=null!==(l=null===(a=(0,c.splitHostPort)(this.host))||void 0===a?void 0:a.host)&&void 0!==l?l:"localhost";this.serviceUrl=`https://${h}/${u}`,this.startTime=new Date}getDeadlineInfo(){var e,t;const r=[];return this.childStartTime?(this.childStartTime>this.startTime&&((null===(e=this.metadata)||void 0===e?void 0:e.getOptions().waitForReady)&&r.push("wait_for_ready"),r.push(`LB pick: ${(0,i.formatDateDifference)(this.startTime,this.childStartTime)}`)),r.push(...this.child.getDeadlineInfo()),r):((null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)&&r.push("wait_for_ready"),r.push("Waiting for LB pick"),r)}trace(e){l.trace(s.LogVerbosity.DEBUG,"load_balancing_call","["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());const s=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(s),null===(n=this.onCallEnded)||void 0===n||n.call(this,s.code,s.details,s.metadata)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");const r=this.metadata.clone(),c=this.channel.doPick(r,this.callConfig.pickInformation),l=c.subchannel?"("+c.subchannel.getChannelzRef().id+") "+c.subchannel.getAddress():""+c.subchannel;switch(this.trace("Pick result: "+a.PickResultType[c.pickResultType]+" subchannel: "+l+" status: "+(null===(e=c.status)||void 0===e?void 0:e.code)+" "+(null===(t=c.status)||void 0===t?void 0:t.details)),c.pickResultType){case a.PickResultType.COMPLETE:this.credentials.compose(c.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then(e=>{var t;if(this.ended)this.trace("Credentials metadata generation finished after call ended");else{if(r.merge(e),r.get("authorization").length>1&&this.outputStatus({code:s.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new o.Metadata},"PROCESSED"),c.subchannel.getConnectivityState()!==n.ConnectivityState.READY)return this.trace("Picked subchannel "+l+" has state "+n.ConnectivityState[c.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),void this.doPick();this.deadline!==1/0&&r.set("grpc-timeout",(0,i.getDeadlineTimeoutString)(this.deadline));try{this.child=c.subchannel.getRealSubchannel().createCall(r,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===u.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}}),this.childStartTime=new Date}catch(e){return this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),void this.outputStatus({code:s.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new o.Metadata},"NOT_STARTED")}null===(t=c.onCallStarted)||void 0===t||t.call(c),this.onCallEnded=c.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()}},e=>{const{code:t,details:r}=(0,d.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:s.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new o.Metadata},"PROCESSED")});break;case a.PickResultType.DROP:const{code:e,details:t}=(0,d.restrictControlPlaneStatusCode)(c.status.code,c.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:c.status.metadata},"DROP")});break;case a.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{const{code:e,details:t}=(0,d.restrictControlPlaneStatusCode)(c.status.code,c.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:c.status.metadata},"PROCESSED")})}break;case a.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new o.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}}},2657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(3789),s=r(6735),i=r(1085),o=r(2796);function a(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,n._`${s.parentData}[${s.parentDataProperty}]`))}function c(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:s,schema:i,parentSchema:o,it:a}=e,l=t.macro.call(a.self,i,o,a),d=c(r,s,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const u=r.name("valid");e.subschema({schema:l,schemaPath:n.nil,errSchemaPath:`${a.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;const{gen:l,keyword:d,schema:u,parentSchema:h,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,u,h,f):t.validate,g=c(l,d,m),y=l.let("valid");function v(r=(t.async?n._`await `:n.nil)){const o=f.opts.passContext?s.default.this:s.default.self,a=!("compile"in t&&!p||!1===t.schema);l.assign(y,n._`${r}${(0,i.callValidateCode)(e,g,o,a)}`,t.modifying)}function _(e){var r;l.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:y),e)}e.block$data(y,function(){if(!1===t.errors)v(),t.modifying&&a(e),_(()=>e.error());else{const r=t.async?function(){const e=l.let("ruleErrs",null);return l.try(()=>v(n._`await `),t=>l.assign(y,!1).if(n._`${t} instanceof ${f.ValidationError}`,()=>l.assign(e,n._`${t}.errors`),()=>l.throw(t))),e}():function(){const e=n._`${g}.errors`;return l.assign(e,null),v(n.nil),e}();t.modifying&&a(e),_(()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,()=>{r.assign(s.default.vErrors,n._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,n._`${s.default.vErrors}.length`),(0,o.extendErrors)(e)},()=>e.error())}(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:y)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},2661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(const{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())};const r=[]},2775:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,s,i,o,a,c,l,d,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var p in s(o,a,c,l,d,u,h),o){var f=o[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var m=0;m<f.length;m++)r(e,s,i,f[m],a+"/"+p+"/"+m,c,a,p,o,m)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var g in f)r(e,s,i,f[g],a+"/"+p+"/"+n(g),c,a,p,o,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&r(e,s,i,f,a+"/"+p,c,a,p,o)}i(o,a,c,l,d,u,h)}}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8840),s=r(3789),i=r(7083),o=r(2482),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:a,schema:c,parentSchema:l,schemaCode:d,it:u}=e;if(!a&&!c)return;const h=t.let("valid"),p=l.items?(0,n.getSchemaTypes)(l.items):[];function f(i,o){const a=t.name("item"),c=(0,n.checkDataTypes)(p,a,u.opts.strictNumbers,n.DataType.Wrong),l=t.const("indices",s._`{}`);t.for(s._`;${i}--;`,()=>{t.let(a,s._`${r}[${i}]`),t.if(c,s._`continue`),p.length>1&&t.if(s._`typeof ${a} == "string"`,s._`${a} += "_"`),t.if(s._`typeof ${l}[${a}] == "number"`,()=>{t.assign(o,s._`${l}[${a}]`),e.error(),t.assign(h,!1).break()}).code(s._`${l}[${a}] = ${i}`)})}function m(n,a){const c=(0,i.useFunc)(t,o.default),l=t.name("outer");t.label(l).for(s._`;${n}--;`,()=>t.for(s._`${a} = ${n}; ${a}--;`,()=>t.if(s._`${c}(${r}[${n}], ${r}[${a}])`,()=>{e.error(),t.assign(h,!1).break(l)})))}e.block$data(h,function(){const n=t.let("i",s._`${r}.length`),i=t.let("j");e.setParams({i:n,j:i}),t.assign(h,!0),t.if(s._`${n} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?f:m)(n,i))},s._`${d} === false`),e.ok(h)}};t.default=a},2796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(3789),s=r(7083),i=r(6735);function o(e,t){const r=e.const("err",t);e.if(n._`${i.default.vErrors} === null`,()=>e.assign(i.default.vErrors,n._`[${r}]`),n._`${i.default.vErrors}.push(${r})`),e.code(n._`${i.default.errors}++`)}function a(e,t){const{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${s}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,s,i){const{it:c}=e,{gen:d,compositeRule:u,allErrors:h}=c,p=l(e,r,s);(null!=i?i:u||h)?o(d,p):a(c,n._`[${p}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:s}=e,{gen:c,compositeRule:d,allErrors:u}=s;o(c,l(e,r,n)),d||u||a(s,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(n._`${i.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(n._`${i.default.vErrors}.length`,t),()=>e.assign(i.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:s,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",o,i.default.errors,o=>{e.const(c,n._`${i.default.vErrors}[${o}]`),e.if(n._`${c}.instancePath === undefined`,()=>e.assign(n._`${c}.instancePath`,(0,n.strConcat)(i.default.instancePath,a.errorPath))),e.assign(n._`${c}.schemaPath`,n.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(n._`${c}.schema`,r),e.assign(n._`${c}.data`,s))})};const c={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function l(e,t,r){const{createErrors:s}=e.it;return!1===s?n._`{}`:function(e,t,r={}){const{gen:s,it:o}=e,a=[d(o,r),u(e,r)];return function(e,{params:t,message:r},s){const{keyword:o,data:a,schemaValue:l,it:d}=e,{opts:u,propertyName:h,topSchemaRef:p,schemaPath:f}=d;s.push([c.keyword,o],[c.params,"function"==typeof t?t(e):t||n._`{}`]),u.messages&&s.push([c.message,"function"==typeof r?r(e):r]),u.verbose&&s.push([c.schema,l],[c.parentSchema,n._`${p}${f}`],[i.default.data,a]),h&&s.push([c.propertyName,h])}(e,t,a),s.object(...a)}(e,t,r)}function d({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,r)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let o=i?t:n.str`${t}/${e}`;return r&&(o=n.str`${o}${(0,s.getErrorPath)(r,s.Type.Str)}`),[c.schemaPath,o]}},2876:(e,t,r)=>{"use strict";r.d(t,{TF:()=>Is,gd:()=>Bn,gH:()=>qn,Sq:()=>dn,GU:()=>_i,u9:()=>Ys,K1:()=>Xs,Mg:()=>An,$9:()=>ui,n_:()=>fi,wR:()=>cn,O4:()=>nn,HM:()=>ks,oQ:()=>Ln,Ql:()=>zn,Sc:()=>Dn,Rk:()=>En,OR:()=>an,aE:()=>Ir,xI:()=>zs,Yu:()=>gs,O$:()=>ts,cv:()=>Qn,zR:()=>Fn,a5:()=>Un,WT:()=>Rs,Nh:()=>Ci,tC:()=>Tn,_r:()=>$n,br:()=>Ps,EV:()=>Mr,ve:()=>is,hh:()=>os,Iu:()=>Ar,ki:()=>jn,fH:()=>js,LW:()=>on,lg:()=>en,vo:()=>Xr,ig:()=>rn,bZ:()=>Hr});var n={};r.r(n),r.d(n,{endsWith:()=>o.ERr,gt:()=>o.TxR,gte:()=>o.qmM,includes:()=>o.dRF,length:()=>o.YAm,lowercase:()=>o.hH9,lt:()=>o.AuJ,lte:()=>o.Zm2,maxLength:()=>o.Ebs,maxSize:()=>o.vL7,mime:()=>o.GZZ,minLength:()=>o.m9B,minSize:()=>o.Ndf,multipleOf:()=>o.HiR,negative:()=>o.bRU,nonnegative:()=>o.UIm,nonpositive:()=>o.ejI,normalize:()=>o.loG,overwrite:()=>o.bS9,positive:()=>o.NCA,property:()=>o.Jfo,regex:()=>o.Fkv,size:()=>o.d$Q,slugify:()=>o.TLt,startsWith:()=>o.$S2,toLowerCase:()=>o.Ilv,toUpperCase:()=>o.xYx,trim:()=>o.WN0,uppercase:()=>o.qFb});var s={};r.r(s),r.d(s,{ZodISODate:()=>u,ZodISODateTime:()=>l,ZodISODuration:()=>m,ZodISOTime:()=>p,date:()=>h,datetime:()=>d,duration:()=>g,time:()=>f});var i={};r.r(i),r.d(i,{ZodAny:()=>Qe,ZodArray:()=>lt,ZodBase64:()=>_e,ZodBase64URL:()=>we,ZodBigInt:()=>Be,ZodBigIntFormat:()=>Ve,ZodBoolean:()=>Fe,ZodCIDRv4:()=>me,ZodCIDRv6:()=>ye,ZodCUID:()=>Q,ZodCUID2:()=>te,ZodCatch:()=>rr,ZodCodec:()=>cr,ZodCustom:()=>br,ZodCustomStringFormat:()=>Pe,ZodDate:()=>at,ZodDefault:()=>Gt,ZodDiscriminatedUnion:()=>bt,ZodE164:()=>Ee,ZodEmail:()=>z,ZodEmoji:()=>K,ZodEnum:()=>At,ZodFile:()=>Lt,ZodFunction:()=>vr,ZodGUID:()=>L,ZodIPv4:()=>le,ZodIPv6:()=>pe,ZodIntersection:()=>St,ZodJWT:()=>Te,ZodKSUID:()=>ae,ZodLazy:()=>fr,ZodLiteral:()=>zt,ZodMAC:()=>ue,ZodMap:()=>xt,ZodNaN:()=>sr,ZodNanoID:()=>Y,ZodNever:()=>nt,ZodNonOptional:()=>Xt,ZodNull:()=>Ye,ZodNullable:()=>Ht,ZodNumber:()=>Re,ZodNumberFormat:()=>Ae,ZodObject:()=>ht,ZodOptional:()=>qt,ZodPipe:()=>or,ZodPrefault:()=>Jt,ZodPromise:()=>gr,ZodReadonly:()=>dr,ZodRecord:()=>kt,ZodSet:()=>Rt,ZodString:()=>A,ZodStringFormat:()=>j,ZodSuccess:()=>er,ZodSymbol:()=>We,ZodTemplateLiteral:()=>hr,ZodTransform:()=>Ut,ZodTuple:()=>Ct,ZodType:()=>R,ZodULID:()=>ne,ZodURL:()=>Z,ZodUUID:()=>U,ZodUndefined:()=>Ke,ZodUnion:()=>gt,ZodUnknown:()=>tt,ZodVoid:()=>it,ZodXID:()=>ie,ZodXor:()=>vt,_ZodString:()=>I,_default:()=>Kt,_function:()=>_r,any:()=>et,array:()=>dt,base64:()=>be,base64url:()=>Se,bigint:()=>qe,boolean:()=>Ue,catch:()=>nr,check:()=>wr,cidrv4:()=>ge,cidrv6:()=>ve,codec:()=>lr,cuid:()=>ee,cuid2:()=>re,custom:()=>Sr,date:()=>ct,describe:()=>Tr,discriminatedUnion:()=>wt,e164:()=>Ce,email:()=>D,emoji:()=>J,enum:()=>Mt,file:()=>Ft,float32:()=>je,float64:()=>ze,function:()=>_r,guid:()=>F,hash:()=>Ne,hex:()=>xe,hostname:()=>Oe,httpUrl:()=>G,instanceof:()=>Pr,int:()=>Me,int32:()=>De,int64:()=>He,intersection:()=>Et,ipv4:()=>de,ipv6:()=>fe,json:()=>Or,jwt:()=>ke,keyof:()=>ut,ksuid:()=>ce,lazy:()=>mr,literal:()=>Dt,looseObject:()=>mt,looseRecord:()=>Ot,mac:()=>he,map:()=>Nt,meta:()=>kr,nan:()=>ir,nanoid:()=>X,nativeEnum:()=>jt,never:()=>st,nonoptional:()=>Qt,null:()=>Xe,nullable:()=>Zt,nullish:()=>Wt,number:()=>Ie,object:()=>pt,optional:()=>Vt,partialRecord:()=>$t,pipe:()=>ar,prefault:()=>Yt,preprocess:()=>xr,promise:()=>yr,readonly:()=>ur,record:()=>Pt,refine:()=>Er,set:()=>It,strictObject:()=>ft,string:()=>M,stringFormat:()=>$e,stringbool:()=>$r,success:()=>tr,superRefine:()=>Cr,symbol:()=>Ge,templateLiteral:()=>pr,transform:()=>Bt,tuple:()=>Tt,uint32:()=>Le,uint64:()=>Ze,ulid:()=>se,undefined:()=>Je,union:()=>yt,unknown:()=>rt,url:()=>W,uuid:()=>B,uuidv4:()=>q,uuidv6:()=>V,uuidv7:()=>H,void:()=>ot,xid:()=>oe,xor:()=>_t});var o=r(9803),a=r(9531),c=r(7153);const l=o.xIx("ZodISODateTime",(e,t)=>{o.KoL.init(e,t),j.init(e,t)});function d(e){return o.G1$(l,e)}const u=o.xIx("ZodISODate",(e,t)=>{o.v1L.init(e,t),j.init(e,t)});function h(e){return o.dbS(u,e)}const p=o.xIx("ZodISOTime",(e,t)=>{o.Ax8.init(e,t),j.init(e,t)});function f(e){return o.KnZ(p,e)}const m=o.xIx("ZodISODuration",(e,t)=>{o.$Nv.init(e,t),j.init(e,t)});function g(e){return o.f25(m,e)}var y=r(2503);const v=(e,t)=>{o.a$H.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>o.Wk_(e,t)},flatten:{value:t=>o.JMU(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,y.jsonStringifyReplacer,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,y.jsonStringifyReplacer,2)}},isEmpty:{get:()=>0===e.issues.length}})},_=(o.xIx("ZodError",v),o.xIx("ZodError",v,{Parent:Error})),b=o.Tjm(_),w=o.Rb(_),S=o.Ody(_),E=o.wGr(_),C=o.MvX(_),T=o.e2D(_),k=o.GWO(_),P=o.or4(_),$=o.rhe(_),O=o.VSu(_),x=o.v_W(_),N=o.R3(_),R=o.xIx("ZodType",(e,t)=>(o.W4S.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:(0,c.uE)(e,"input"),output:(0,c.uE)(e,"output")}}),e.toJSONSchema=(0,c.OA)(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(o.ZSL.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>o.o8B(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>b(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>S(e,t,r),e.parseAsync=async(t,r)=>w(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>E(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>C(e,t,r),e.decode=(t,r)=>T(e,t,r),e.encodeAsync=async(t,r)=>k(e,t,r),e.decodeAsync=async(t,r)=>P(e,t,r),e.safeEncode=(t,r)=>$(e,t,r),e.safeDecode=(t,r)=>O(e,t,r),e.safeEncodeAsync=async(t,r)=>x(e,t,r),e.safeDecodeAsync=async(t,r)=>N(e,t,r),e.refine=(t,r)=>e.check(Er(t,r)),e.superRefine=t=>e.check(Cr(t)),e.overwrite=t=>e.check(o.bS9(t)),e.optional=()=>Vt(e),e.nullable=()=>Zt(e),e.nullish=()=>Vt(Zt(e)),e.nonoptional=t=>Qt(e,t),e.array=()=>dt(e),e.or=t=>yt([e,t]),e.and=t=>Et(e,t),e.transform=t=>ar(e,Bt(t)),e.default=t=>Kt(e,t),e.prefault=t=>Yt(e,t),e.catch=t=>nr(e,t),e.pipe=t=>ar(e,t),e.readonly=()=>ur(e),e.describe=t=>{const r=e.clone();return o.fd.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>o.fd.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return o.fd.get(e);const r=e.clone();return o.fd.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),I=o.xIx("_ZodString",(e,t)=>{o.$vM.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.SW(e,t,r,n);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(o.Fkv(...t)),e.includes=(...t)=>e.check(o.dRF(...t)),e.startsWith=(...t)=>e.check(o.$S2(...t)),e.endsWith=(...t)=>e.check(o.ERr(...t)),e.min=(...t)=>e.check(o.m9B(...t)),e.max=(...t)=>e.check(o.Ebs(...t)),e.length=(...t)=>e.check(o.YAm(...t)),e.nonempty=(...t)=>e.check(o.m9B(1,...t)),e.lowercase=t=>e.check(o.hH9(t)),e.uppercase=t=>e.check(o.qFb(t)),e.trim=()=>e.check(o.WN0()),e.normalize=(...t)=>e.check(o.loG(...t)),e.toLowerCase=()=>e.check(o.Ilv()),e.toUpperCase=()=>e.check(o.xYx()),e.slugify=()=>e.check(o.TLt())}),A=o.xIx("ZodString",(e,t)=>{o.$vM.init(e,t),I.init(e,t),e.email=t=>e.check(o.Mue(z,t)),e.url=t=>e.check(o.Fnx(Z,t)),e.jwt=t=>e.check(o.rkn(Te,t)),e.emoji=t=>e.check(o.aCo(K,t)),e.guid=t=>e.check(o.tB6(L,t)),e.uuid=t=>e.check(o.Bem(U,t)),e.uuidv4=t=>e.check(o.nA(U,t)),e.uuidv6=t=>e.check(o.pYI(U,t)),e.uuidv7=t=>e.check(o.wAW(U,t)),e.nanoid=t=>e.check(o.Dl9(Y,t)),e.guid=t=>e.check(o.tB6(L,t)),e.cuid=t=>e.check(o.fsu(Q,t)),e.cuid2=t=>e.check(o.BjO(te,t)),e.ulid=t=>e.check(o.CtB(ne,t)),e.base64=t=>e.check(o.rty(_e,t)),e.base64url=t=>e.check(o.cUp(we,t)),e.xid=t=>e.check(o.Pwh(ie,t)),e.ksuid=t=>e.check(o._zn(ae,t)),e.ipv4=t=>e.check(o.NyF(le,t)),e.ipv6=t=>e.check(o.$O6(pe,t)),e.cidrv4=t=>e.check(o.UyX(me,t)),e.cidrv6=t=>e.check(o.gPm(ye,t)),e.e164=t=>e.check(o.KBX(Ee,t)),e.datetime=t=>e.check(d(t)),e.date=t=>e.check(h(t)),e.time=t=>e.check(f(t)),e.duration=t=>e.check(g(t))});function M(e){return o.Rle(A,e)}const j=o.xIx("ZodStringFormat",(e,t)=>{o.EYA.init(e,t),I.init(e,t)}),z=o.xIx("ZodEmail",(e,t)=>{o.qGO.init(e,t),j.init(e,t)});function D(e){return o.Mue(z,e)}const L=o.xIx("ZodGUID",(e,t)=>{o.Zc9.init(e,t),j.init(e,t)});function F(e){return o.tB6(L,e)}const U=o.xIx("ZodUUID",(e,t)=>{o.Znh.init(e,t),j.init(e,t)});function B(e){return o.Bem(U,e)}function q(e){return o.nA(U,e)}function V(e){return o.pYI(U,e)}function H(e){return o.wAW(U,e)}const Z=o.xIx("ZodURL",(e,t)=>{o.VYh.init(e,t),j.init(e,t)});function W(e){return o.Fnx(Z,e)}function G(e){return o.Fnx(Z,{protocol:/^https?$/,hostname:o.A$I.domain,...o.ZSL.normalizeParams(e)})}const K=o.xIx("ZodEmoji",(e,t)=>{o.cG4.init(e,t),j.init(e,t)});function J(e){return o.aCo(K,e)}const Y=o.xIx("ZodNanoID",(e,t)=>{o.Pyd.init(e,t),j.init(e,t)});function X(e){return o.Dl9(Y,e)}const Q=o.xIx("ZodCUID",(e,t)=>{o.bl8.init(e,t),j.init(e,t)});function ee(e){return o.fsu(Q,e)}const te=o.xIx("ZodCUID2",(e,t)=>{o.Zu1.init(e,t),j.init(e,t)});function re(e){return o.BjO(te,e)}const ne=o.xIx("ZodULID",(e,t)=>{o.g5t.init(e,t),j.init(e,t)});function se(e){return o.CtB(ne,e)}const ie=o.xIx("ZodXID",(e,t)=>{o.TFq.init(e,t),j.init(e,t)});function oe(e){return o.Pwh(ie,e)}const ae=o.xIx("ZodKSUID",(e,t)=>{o.GYt.init(e,t),j.init(e,t)});function ce(e){return o._zn(ae,e)}const le=o.xIx("ZodIPv4",(e,t)=>{o.Lc$.init(e,t),j.init(e,t)});function de(e){return o.NyF(le,e)}const ue=o.xIx("ZodMAC",(e,t)=>{o.rOG.init(e,t),j.init(e,t)});function he(e){return o.R8V(ue,e)}const pe=o.xIx("ZodIPv6",(e,t)=>{o.ZyE.init(e,t),j.init(e,t)});function fe(e){return o.$O6(pe,e)}const me=o.xIx("ZodCIDRv4",(e,t)=>{o.CI7.init(e,t),j.init(e,t)});function ge(e){return o.UyX(me,e)}const ye=o.xIx("ZodCIDRv6",(e,t)=>{o.CnV.init(e,t),j.init(e,t)});function ve(e){return o.gPm(ye,e)}const _e=o.xIx("ZodBase64",(e,t)=>{o.Dqv.init(e,t),j.init(e,t)});function be(e){return o.rty(_e,e)}const we=o.xIx("ZodBase64URL",(e,t)=>{o.CQL.init(e,t),j.init(e,t)});function Se(e){return o.cUp(we,e)}const Ee=o.xIx("ZodE164",(e,t)=>{o.Oyg.init(e,t),j.init(e,t)});function Ce(e){return o.KBX(Ee,e)}const Te=o.xIx("ZodJWT",(e,t)=>{o.h80.init(e,t),j.init(e,t)});function ke(e){return o.rkn(Te,e)}const Pe=o.xIx("ZodCustomStringFormat",(e,t)=>{o.ZQQ.init(e,t),j.init(e,t)});function $e(e,t,r={}){return o.Af7(Pe,e,t,r)}function Oe(e){return o.Af7(Pe,"hostname",o.A$I.hostname,e)}function xe(e){return o.Af7(Pe,"hex",o.A$I.hex,e)}function Ne(e,t){const r=`${e}_${t?.enc??"hex"}`,n=o.A$I[r];if(!n)throw new Error(`Unrecognized hash format: ${r}`);return o.Af7(Pe,r,n,t)}const Re=o.xIx("ZodNumber",(e,t)=>{o.vzu.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Wg(e,t,r,n),e.gt=(t,r)=>e.check(o.TxR(t,r)),e.gte=(t,r)=>e.check(o.qmM(t,r)),e.min=(t,r)=>e.check(o.qmM(t,r)),e.lt=(t,r)=>e.check(o.AuJ(t,r)),e.lte=(t,r)=>e.check(o.Zm2(t,r)),e.max=(t,r)=>e.check(o.Zm2(t,r)),e.int=t=>e.check(Me(t)),e.safe=t=>e.check(Me(t)),e.positive=t=>e.check(o.TxR(0,t)),e.nonnegative=t=>e.check(o.qmM(0,t)),e.negative=t=>e.check(o.AuJ(0,t)),e.nonpositive=t=>e.check(o.Zm2(0,t)),e.multipleOf=(t,r)=>e.check(o.HiR(t,r)),e.step=(t,r)=>e.check(o.HiR(t,r)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ie(e){return o.F7R(Re,e)}const Ae=o.xIx("ZodNumberFormat",(e,t)=>{o.Iab.init(e,t),Re.init(e,t)});function Me(e){return o.LKT(Ae,e)}function je(e){return o.HLV(Ae,e)}function ze(e){return o.g6z(Ae,e)}function De(e){return o.swT(Ae,e)}function Le(e){return o.Pay(Ae,e)}const Fe=o.xIx("ZodBoolean",(e,t)=>{o.sFi.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.dO(e,t,r,n)});function Ue(e){return o._Le(Fe,e)}const Be=o.xIx("ZodBigInt",(e,t)=>{o.BNI.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Y8(e,t,r,n),e.gte=(t,r)=>e.check(o.qmM(t,r)),e.min=(t,r)=>e.check(o.qmM(t,r)),e.gt=(t,r)=>e.check(o.TxR(t,r)),e.gte=(t,r)=>e.check(o.qmM(t,r)),e.min=(t,r)=>e.check(o.qmM(t,r)),e.lt=(t,r)=>e.check(o.AuJ(t,r)),e.lte=(t,r)=>e.check(o.Zm2(t,r)),e.max=(t,r)=>e.check(o.Zm2(t,r)),e.positive=t=>e.check(o.TxR(BigInt(0),t)),e.negative=t=>e.check(o.AuJ(BigInt(0),t)),e.nonpositive=t=>e.check(o.Zm2(BigInt(0),t)),e.nonnegative=t=>e.check(o.qmM(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(o.HiR(t,r));const r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function qe(e){return o.z$y(Be,e)}const Ve=o.xIx("ZodBigIntFormat",(e,t)=>{o.ITd.init(e,t),Be.init(e,t)});function He(e){return o.Jg2(Ve,e)}function Ze(e){return o.ii$(Ve,e)}const We=o.xIx("ZodSymbol",(e,t)=>{o.U5g.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.fg(e,t,r,n)});function Ge(e){return o.W7i(We,e)}const Ke=o.xIx("ZodUndefined",(e,t)=>{o.Mvl.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.BU(e,t,r,n)});function Je(e){return o.E4e(Ke,e)}const Ye=o.xIx("ZodNull",(e,t)=>{o.x89.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.In(e,t,r,n)});function Xe(e){return o.jwX(Ye,e)}const Qe=o.xIx("ZodAny",(e,t)=>{o.Gb0.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.NX(e,t,r,n)});function et(){return o.KA8(Qe)}const tt=o.xIx("ZodUnknown",(e,t)=>{o.GPR.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.NV(e,t,r,n)});function rt(){return o.emL(tt)}const nt=o.xIx("ZodNever",(e,t)=>{o.Umr.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.RH(e,t,r,n)});function st(e){return o.G8g(nt,e)}const it=o.xIx("ZodVoid",(e,t)=>{o.WHP.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.vn(e,t,r,n)});function ot(e){return o.OCf(it,e)}const at=o.xIx("ZodDate",(e,t)=>{o.o5y.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Fl(e,t,r,n),e.min=(t,r)=>e.check(o.qmM(t,r)),e.max=(t,r)=>e.check(o.Zm2(t,r));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function ct(e){return o.YY6(at,e)}const lt=o.xIx("ZodArray",(e,t)=>{o.$ps.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.cY(e,t,r,n),e.element=t.element,e.min=(t,r)=>e.check(o.m9B(t,r)),e.nonempty=t=>e.check(o.m9B(1,t)),e.max=(t,r)=>e.check(o.Ebs(t,r)),e.length=(t,r)=>e.check(o.YAm(t,r)),e.unwrap=()=>e.element});function dt(e,t){return o.dZg(lt,e,t)}function ut(e){const t=e._zod.def.shape;return Mt(Object.keys(t))}const ht=o.xIx("ZodObject",(e,t)=>{o.waU.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Ec(e,t,r,n),o.ZSL.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>Mt(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:rt()}),e.loose=()=>e.clone({...e._zod.def,catchall:rt()}),e.strict=()=>e.clone({...e._zod.def,catchall:st()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>o.ZSL.extend(e,t),e.safeExtend=t=>o.ZSL.safeExtend(e,t),e.merge=t=>o.ZSL.merge(e,t),e.pick=t=>o.ZSL.pick(e,t),e.omit=t=>o.ZSL.omit(e,t),e.partial=(...t)=>o.ZSL.partial(qt,e,t[0]),e.required=(...t)=>o.ZSL.required(Xt,e,t[0])});function pt(e,t){const r={type:"object",shape:e??{},...o.ZSL.normalizeParams(t)};return new ht(r)}function ft(e,t){return new ht({type:"object",shape:e,catchall:st(),...o.ZSL.normalizeParams(t)})}function mt(e,t){return new ht({type:"object",shape:e,catchall:rt(),...o.ZSL.normalizeParams(t)})}const gt=o.xIx("ZodUnion",(e,t)=>{o.L8w.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.iC(e,t,r,n),e.options=t.options});function yt(e,t){return new gt({type:"union",options:e,...o.ZSL.normalizeParams(t)})}const vt=o.xIx("ZodXor",(e,t)=>{gt.init(e,t),o.pm8.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.iC(e,t,r,n),e.options=t.options});function _t(e,t){return new vt({type:"union",options:e,inclusive:!1,...o.ZSL.normalizeParams(t)})}const bt=o.xIx("ZodDiscriminatedUnion",(e,t)=>{gt.init(e,t),o.P0p.init(e,t)});function wt(e,t,r){return new bt({type:"union",options:t,discriminator:e,...o.ZSL.normalizeParams(r)})}const St=o.xIx("ZodIntersection",(e,t)=>{o.LJA.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.i_(e,t,r,n)});function Et(e,t){return new St({type:"intersection",left:e,right:t})}const Ct=o.xIx("ZodTuple",(e,t)=>{o.G3x.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.CN(e,t,r,n),e.rest=t=>e.clone({...e._zod.def,rest:t})});function Tt(e,t,r){const n=t instanceof o.W4S,s=n?r:t;return new Ct({type:"tuple",items:e,rest:n?t:null,...o.ZSL.normalizeParams(s)})}const kt=o.xIx("ZodRecord",(e,t)=>{o.hax.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.GC(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function Pt(e,t,r){return new kt({type:"record",keyType:e,valueType:t,...o.ZSL.normalizeParams(r)})}function $t(e,t,r){const n=o.o8B(e);return n._zod.values=void 0,new kt({type:"record",keyType:n,valueType:t,...o.ZSL.normalizeParams(r)})}function Ot(e,t,r){return new kt({type:"record",keyType:e,valueType:t,mode:"loose",...o.ZSL.normalizeParams(r)})}const xt=o.xIx("ZodMap",(e,t)=>{o.eb8.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.jq(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function Nt(e,t,r){return new xt({type:"map",keyType:e,valueType:t,...o.ZSL.normalizeParams(r)})}const Rt=o.xIx("ZodSet",(e,t)=>{o.Oie.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.zH(e,t,r,n),e.min=(...t)=>e.check(o.Ndf(...t)),e.nonempty=t=>e.check(o.Ndf(1,t)),e.max=(...t)=>e.check(o.vL7(...t)),e.size=(...t)=>e.check(o.d$Q(...t))});function It(e,t){return new Rt({type:"set",valueType:e,...o.ZSL.normalizeParams(t)})}const At=o.xIx("ZodEnum",(e,t)=>{o.VOE.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.C0(e,t,r,n),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{const s={};for(const n of e){if(!r.has(n))throw new Error(`Key ${n} not found in enum`);s[n]=t.entries[n]}return new At({...t,checks:[],...o.ZSL.normalizeParams(n),entries:s})},e.exclude=(e,n)=>{const s={...t.entries};for(const t of e){if(!r.has(t))throw new Error(`Key ${t} not found in enum`);delete s[t]}return new At({...t,checks:[],...o.ZSL.normalizeParams(n),entries:s})}});function Mt(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new At({type:"enum",entries:r,...o.ZSL.normalizeParams(t)})}function jt(e,t){return new At({type:"enum",entries:e,...o.ZSL.normalizeParams(t)})}const zt=o.xIx("ZodLiteral",(e,t)=>{o.nuC.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Yv(e,t,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Dt(e,t){return new zt({type:"literal",values:Array.isArray(e)?e:[e],...o.ZSL.normalizeParams(t)})}const Lt=o.xIx("ZodFile",(e,t)=>{o.CTp.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.H1(e,t,r,n),e.min=(t,r)=>e.check(o.Ndf(t,r)),e.max=(t,r)=>e.check(o.vL7(t,r)),e.mime=(t,r)=>e.check(o.GZZ(Array.isArray(t)?t:[t],r))});function Ft(e){return o.K2(Lt,e)}const Ut=o.xIx("ZodTransform",(e,t)=>{o.Wc_.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.xi(e,t,r,n),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new o.cV1(e.constructor.name);r.addIssue=n=>{if("string"==typeof n)r.issues.push(o.ZSL.issue(n,r.value,t));else{const t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),r.issues.push(o.ZSL.issue(t))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(e=>(r.value=e,r)):(r.value=s,r)}});function Bt(e){return new Ut({type:"transform",transform:e})}const qt=o.xIx("ZodOptional",(e,t)=>{o.igI.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.$k(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function Vt(e){return new qt({type:"optional",innerType:e})}const Ht=o.xIx("ZodNullable",(e,t)=>{o.ZQr.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.yq(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function Zt(e){return new Ht({type:"nullable",innerType:e})}function Wt(e){return Vt(Zt(e))}const Gt=o.xIx("ZodDefault",(e,t)=>{o.rvF.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.mh(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Kt(e,t){return new Gt({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():o.ZSL.shallowClone(t)}})}const Jt=o.xIx("ZodPrefault",(e,t)=>{o.VFw.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.A(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function Yt(e,t){return new Jt({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():o.ZSL.shallowClone(t)}})}const Xt=o.xIx("ZodNonOptional",(e,t)=>{o.N$X.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.cR(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function Qt(e,t){return new Xt({type:"nonoptional",innerType:e,...o.ZSL.normalizeParams(t)})}const er=o.xIx("ZodSuccess",(e,t)=>{o.Dws.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.aw(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function tr(e){return new er({type:"success",innerType:e})}const rr=o.xIx("ZodCatch",(e,t)=>{o.t$E.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Q9(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function nr(e,t){return new rr({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}const sr=o.xIx("ZodNaN",(e,t)=>{o.zPy.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Kj(e,t,r,n)});function ir(e){return o.L4d(sr,e)}const or=o.xIx("ZodPipe",(e,t)=>{o._mk.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.fs(e,t,r,n),e.in=t.in,e.out=t.out});function ar(e,t){return new or({type:"pipe",in:e,out:t})}const cr=o.xIx("ZodCodec",(e,t)=>{or.init(e,t),o.YYK.init(e,t)});function lr(e,t,r){return new cr({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}const dr=o.xIx("ZodReadonly",(e,t)=>{o.Sbs.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.$X(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function ur(e){return new dr({type:"readonly",innerType:e})}const hr=o.xIx("ZodTemplateLiteral",(e,t)=>{o.da_.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Cv(e,t,r,n)});function pr(e,t){return new hr({type:"template_literal",parts:e,...o.ZSL.normalizeParams(t)})}const fr=o.xIx("ZodLazy",(e,t)=>{o.kU.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.Tr(e,t,r,n),e.unwrap=()=>e._zod.def.getter()});function mr(e){return new fr({type:"lazy",getter:e})}const gr=o.xIx("ZodPromise",(e,t)=>{o.hAA.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.CX(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function yr(e){return new gr({type:"promise",innerType:e})}const vr=o.xIx("ZodFunction",(e,t)=>{o._AQ.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.bq(e,t,r,n)});function _r(e){return new vr({type:"function",input:Array.isArray(e?.input)?Tt(e?.input):e?.input??dt(rt()),output:e?.output??rt()})}const br=o.xIx("ZodCustom",(e,t)=>{o.b03.init(e,t),R.init(e,t),e._zod.processJSONSchema=(t,r,n)=>a.A6(e,t,r,n)});function wr(e){const t=new o.QPK({check:"custom"});return t._zod.check=e,t}function Sr(e,t){return o.FOv(br,e??(()=>!0),t)}function Er(e,t={}){return o.fUZ(br,e,t)}function Cr(e){return o.MBo(e)}const Tr=o.q0y,kr=o.mIj;function Pr(e,t={error:`Input not instance of ${e.name}`}){const r=new br({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...o.ZSL.normalizeParams(t)});return r._zod.bag.Class=e,r}const $r=(...e)=>o.fIQ({Codec:cr,Boolean:Fe,String:A},...e);function Or(e){const t=mr(()=>yt([M(e),Ie(),Ue(),Xe(),dt(t),Pt(M(),t)]));return t}function xr(e,t){return ar(Bt(e),t)}var Nr;Nr||(Nr={});var Rr=r(9952);r(3549),(0,o.$WB)((0,Rr.A)());const Ir="2025-11-25",Ar=[Ir,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],Mr="io.modelcontextprotocol/related-task",jr="2.0",zr=Sr(e=>null!==e&&("object"==typeof e||"function"==typeof e)),Dr=yt([M(),Ie().int()]),Lr=M(),Fr=(mt({ttl:yt([Ie(),Xe()]).optional(),pollInterval:Ie().optional()}),pt({ttl:Ie().optional()})),Ur=pt({taskId:M()}),Br=mt({progressToken:Dr.optional(),[Mr]:Ur.optional()}),qr=pt({_meta:Br.optional()}),Vr=qr.extend({task:Fr.optional()}),Hr=e=>Vr.safeParse(e).success,Zr=pt({method:M(),params:qr.loose().optional()}),Wr=pt({_meta:Br.optional()}),Gr=pt({method:M(),params:Wr.loose().optional()}),Kr=mt({_meta:Br.optional()}),Jr=yt([M(),Ie().int()]),Yr=pt({jsonrpc:Dt(jr),id:Jr,...Zr.shape}).strict(),Xr=e=>Yr.safeParse(e).success,Qr=pt({jsonrpc:Dt(jr),...Gr.shape}).strict(),en=e=>Qr.safeParse(e).success,tn=pt({jsonrpc:Dt(jr),id:Jr,result:Kr}).strict(),rn=e=>tn.safeParse(e).success;var nn;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(nn||(nn={}));const sn=pt({jsonrpc:Dt(jr),id:Jr.optional(),error:pt({code:Ie().int(),message:M(),data:rt().optional()})}).strict(),on=e=>sn.safeParse(e).success,an=yt([Yr,Qr,tn,sn]),cn=(yt([tn,sn]),Kr.strict()),ln=Wr.extend({requestId:Jr.optional(),reason:M().optional()}),dn=Gr.extend({method:Dt("notifications/cancelled"),params:ln}),un=pt({src:M(),mimeType:M().optional(),sizes:dt(M()).optional(),theme:Mt(["light","dark"]).optional()}),hn=pt({icons:dt(un).optional()}),pn=pt({name:M(),title:M().optional()}),fn=pn.extend({...pn.shape,...hn.shape,version:M(),websiteUrl:M().optional(),description:M().optional()}),mn=Et(pt({applyDefaults:Ue().optional()}),Pt(M(),rt())),gn=xr(e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,Et(pt({form:mn.optional(),url:zr.optional()}),Pt(M(),rt()).optional())),yn=mt({list:zr.optional(),cancel:zr.optional(),requests:mt({sampling:mt({createMessage:zr.optional()}).optional(),elicitation:mt({create:zr.optional()}).optional()}).optional()}),vn=mt({list:zr.optional(),cancel:zr.optional(),requests:mt({tools:mt({call:zr.optional()}).optional()}).optional()}),_n=pt({experimental:Pt(M(),zr).optional(),sampling:pt({context:zr.optional(),tools:zr.optional()}).optional(),elicitation:gn.optional(),roots:pt({listChanged:Ue().optional()}).optional(),tasks:yn.optional()}),bn=qr.extend({protocolVersion:M(),capabilities:_n,clientInfo:fn}),wn=Zr.extend({method:Dt("initialize"),params:bn}),Sn=pt({experimental:Pt(M(),zr).optional(),logging:zr.optional(),completions:zr.optional(),prompts:pt({listChanged:Ue().optional()}).optional(),resources:pt({subscribe:Ue().optional(),listChanged:Ue().optional()}).optional(),tools:pt({listChanged:Ue().optional()}).optional(),tasks:vn.optional()}),En=Kr.extend({protocolVersion:M(),capabilities:Sn,serverInfo:fn,instructions:M().optional()}),Cn=Gr.extend({method:Dt("notifications/initialized"),params:Wr.optional()}),Tn=Zr.extend({method:Dt("ping"),params:qr.optional()}),kn=pt({progress:Ie(),total:Vt(Ie()),message:Vt(M())}),Pn=pt({...Wr.shape,...kn.shape,progressToken:Dr}),$n=Gr.extend({method:Dt("notifications/progress"),params:Pn}),On=qr.extend({cursor:Lr.optional()}),xn=Zr.extend({params:On.optional()}),Nn=Kr.extend({nextCursor:Lr.optional()}),Rn=Mt(["working","input_required","completed","failed","cancelled"]),In=pt({taskId:M(),status:Rn,ttl:yt([Ie(),Xe()]),createdAt:M(),lastUpdatedAt:M(),pollInterval:Vt(Ie()),statusMessage:Vt(M())}),An=Kr.extend({task:In}),Mn=Wr.merge(In),jn=Gr.extend({method:Dt("notifications/tasks/status"),params:Mn}),zn=Zr.extend({method:Dt("tasks/get"),params:qr.extend({taskId:M()})}),Dn=Kr.merge(In),Ln=Zr.extend({method:Dt("tasks/result"),params:qr.extend({taskId:M()})}),Fn=(Kr.loose(),xn.extend({method:Dt("tasks/list")})),Un=Nn.extend({tasks:dt(In)}),Bn=Zr.extend({method:Dt("tasks/cancel"),params:qr.extend({taskId:M()})}),qn=Kr.merge(In),Vn=pt({uri:M(),mimeType:Vt(M()),_meta:Pt(M(),rt()).optional()}),Hn=Vn.extend({text:M()}),Zn=M().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),Wn=Vn.extend({blob:Zn}),Gn=Mt(["user","assistant"]),Kn=pt({audience:dt(Gn).optional(),priority:Ie().min(0).max(1).optional(),lastModified:d({offset:!0}).optional()}),Jn=pt({...pn.shape,...hn.shape,uri:M(),description:Vt(M()),mimeType:Vt(M()),annotations:Kn.optional(),_meta:Vt(mt({}))}),Yn=pt({...pn.shape,...hn.shape,uriTemplate:M(),description:Vt(M()),mimeType:Vt(M()),annotations:Kn.optional(),_meta:Vt(mt({}))}),Xn=xn.extend({method:Dt("resources/list")}),Qn=Nn.extend({resources:dt(Jn)}),es=xn.extend({method:Dt("resources/templates/list")}),ts=Nn.extend({resourceTemplates:dt(Yn)}),rs=qr.extend({uri:M()}),ns=rs,ss=Zr.extend({method:Dt("resources/read"),params:ns}),is=Kr.extend({contents:dt(yt([Hn,Wn]))}),os=Gr.extend({method:Dt("notifications/resources/list_changed"),params:Wr.optional()}),as=rs,cs=Zr.extend({method:Dt("resources/subscribe"),params:as}),ls=rs,ds=Zr.extend({method:Dt("resources/unsubscribe"),params:ls}),us=Wr.extend({uri:M()}),hs=Gr.extend({method:Dt("notifications/resources/updated"),params:us}),ps=pt({name:M(),description:Vt(M()),required:Vt(Ue())}),fs=pt({...pn.shape,...hn.shape,description:Vt(M()),arguments:Vt(dt(ps)),_meta:Vt(mt({}))}),ms=xn.extend({method:Dt("prompts/list")}),gs=Nn.extend({prompts:dt(fs)}),ys=qr.extend({name:M(),arguments:Pt(M(),M()).optional()}),vs=Zr.extend({method:Dt("prompts/get"),params:ys}),_s=pt({type:Dt("text"),text:M(),annotations:Kn.optional(),_meta:Pt(M(),rt()).optional()}),bs=pt({type:Dt("image"),data:Zn,mimeType:M(),annotations:Kn.optional(),_meta:Pt(M(),rt()).optional()}),ws=pt({type:Dt("audio"),data:Zn,mimeType:M(),annotations:Kn.optional(),_meta:Pt(M(),rt()).optional()}),Ss=pt({type:Dt("tool_use"),name:M(),id:M(),input:Pt(M(),rt()),_meta:Pt(M(),rt()).optional()}),Es=pt({type:Dt("resource"),resource:yt([Hn,Wn]),annotations:Kn.optional(),_meta:Pt(M(),rt()).optional()}),Cs=yt([_s,bs,ws,Jn.extend({type:Dt("resource_link")}),Es]),Ts=pt({role:Gn,content:Cs}),ks=Kr.extend({description:M().optional(),messages:dt(Ts)}),Ps=Gr.extend({method:Dt("notifications/prompts/list_changed"),params:Wr.optional()}),$s=pt({title:M().optional(),readOnlyHint:Ue().optional(),destructiveHint:Ue().optional(),idempotentHint:Ue().optional(),openWorldHint:Ue().optional()}),Os=pt({taskSupport:Mt(["required","optional","forbidden"]).optional()}),xs=pt({...pn.shape,...hn.shape,description:M().optional(),inputSchema:pt({type:Dt("object"),properties:Pt(M(),zr).optional(),required:dt(M()).optional()}).catchall(rt()),outputSchema:pt({type:Dt("object"),properties:Pt(M(),zr).optional(),required:dt(M()).optional()}).catchall(rt()).optional(),annotations:$s.optional(),execution:Os.optional(),_meta:Pt(M(),rt()).optional()}),Ns=xn.extend({method:Dt("tools/list")}),Rs=Nn.extend({tools:dt(xs)}),Is=Kr.extend({content:dt(Cs).default([]),structuredContent:Pt(M(),rt()).optional(),isError:Ue().optional()}),As=(Is.or(Kr.extend({toolResult:rt()})),Vr.extend({name:M(),arguments:Pt(M(),rt()).optional()})),Ms=Zr.extend({method:Dt("tools/call"),params:As}),js=Gr.extend({method:Dt("notifications/tools/list_changed"),params:Wr.optional()}),zs=pt({autoRefresh:Ue().default(!0),debounceMs:Ie().int().nonnegative().default(300)}),Ds=Mt(["debug","info","notice","warning","error","critical","alert","emergency"]),Ls=qr.extend({level:Ds}),Fs=Zr.extend({method:Dt("logging/setLevel"),params:Ls}),Us=Wr.extend({level:Ds,logger:M().optional(),data:rt()}),Bs=Gr.extend({method:Dt("notifications/message"),params:Us}),qs=pt({name:M().optional()}),Vs=pt({hints:dt(qs).optional(),costPriority:Ie().min(0).max(1).optional(),speedPriority:Ie().min(0).max(1).optional(),intelligencePriority:Ie().min(0).max(1).optional()}),Hs=pt({mode:Mt(["auto","required","none"]).optional()}),Zs=pt({type:Dt("tool_result"),toolUseId:M().describe("The unique identifier for the corresponding tool call."),content:dt(Cs).default([]),structuredContent:pt({}).loose().optional(),isError:Ue().optional(),_meta:Pt(M(),rt()).optional()}),Ws=wt("type",[_s,bs,ws]),Gs=wt("type",[_s,bs,ws,Ss,Zs]),Ks=pt({role:Gn,content:yt([Gs,dt(Gs)]),_meta:Pt(M(),rt()).optional()}),Js=Vr.extend({messages:dt(Ks),modelPreferences:Vs.optional(),systemPrompt:M().optional(),includeContext:Mt(["none","thisServer","allServers"]).optional(),temperature:Ie().optional(),maxTokens:Ie().int(),stopSequences:dt(M()).optional(),metadata:zr.optional(),tools:dt(xs).optional(),toolChoice:Hs.optional()}),Ys=Zr.extend({method:Dt("sampling/createMessage"),params:Js}),Xs=Kr.extend({model:M(),stopReason:Vt(Mt(["endTurn","stopSequence","maxTokens"]).or(M())),role:Gn,content:Ws}),Qs=Kr.extend({model:M(),stopReason:Vt(Mt(["endTurn","stopSequence","maxTokens","toolUse"]).or(M())),role:Gn,content:yt([Gs,dt(Gs)])}),ei=pt({type:Dt("boolean"),title:M().optional(),description:M().optional(),default:Ue().optional()}),ti=pt({type:Dt("string"),title:M().optional(),description:M().optional(),minLength:Ie().optional(),maxLength:Ie().optional(),format:Mt(["email","uri","date","date-time"]).optional(),default:M().optional()}),ri=pt({type:Mt(["number","integer"]),title:M().optional(),description:M().optional(),minimum:Ie().optional(),maximum:Ie().optional(),default:Ie().optional()}),ni=pt({type:Dt("string"),title:M().optional(),description:M().optional(),enum:dt(M()),default:M().optional()}),si=pt({type:Dt("string"),title:M().optional(),description:M().optional(),oneOf:dt(pt({const:M(),title:M()})),default:M().optional()}),ii=pt({type:Dt("string"),title:M().optional(),description:M().optional(),enum:dt(M()),enumNames:dt(M()).optional(),default:M().optional()}),oi=yt([ni,si]),ai=yt([pt({type:Dt("array"),title:M().optional(),description:M().optional(),minItems:Ie().optional(),maxItems:Ie().optional(),items:pt({type:Dt("string"),enum:dt(M())}),default:dt(M()).optional()}),pt({type:Dt("array"),title:M().optional(),description:M().optional(),minItems:Ie().optional(),maxItems:Ie().optional(),items:pt({anyOf:dt(pt({const:M(),title:M()}))}),default:dt(M()).optional()})]),ci=yt([ii,oi,ai]),li=yt([ci,ei,ti,ri]),di=yt([Vr.extend({mode:Dt("form").optional(),message:M(),requestedSchema:pt({type:Dt("object"),properties:Pt(M(),li),required:dt(M()).optional()})}),Vr.extend({mode:Dt("url"),message:M(),elicitationId:M(),url:M().url()})]),ui=Zr.extend({method:Dt("elicitation/create"),params:di}),hi=Wr.extend({elicitationId:M()}),pi=Gr.extend({method:Dt("notifications/elicitation/complete"),params:hi}),fi=Kr.extend({action:Mt(["accept","decline","cancel"]),content:xr(e=>null===e?void 0:e,Pt(M(),yt([M(),Ie(),Ue(),dt(M())])).optional())}),mi=pt({type:Dt("ref/resource"),uri:M()}),gi=pt({type:Dt("ref/prompt"),name:M()}),yi=qr.extend({ref:yt([gi,mi]),argument:pt({name:M(),value:M()}),context:pt({arguments:Pt(M(),M()).optional()}).optional()}),vi=Zr.extend({method:Dt("completion/complete"),params:yi}),_i=Kr.extend({completion:mt({values:dt(M()).max(100),total:Vt(Ie().int()),hasMore:Vt(Ue())})}),bi=pt({uri:M().startsWith("file://"),name:M().optional(),_meta:Pt(M(),rt()).optional()}),wi=Zr.extend({method:Dt("roots/list"),params:qr.optional()}),Si=Kr.extend({roots:dt(bi)}),Ei=Gr.extend({method:Dt("notifications/roots/list_changed"),params:Wr.optional()});yt([Tn,wn,vi,Fs,vs,ms,Xn,es,ss,cs,ds,Ms,Ns,zn,Ln,Fn,Bn]),yt([dn,$n,Cn,Ei,jn]),yt([cn,Xs,Qs,fi,Si,Dn,Un,An]),yt([Tn,Ys,ui,wi,zn,Ln,Fn,Bn]),yt([dn,$n,Bs,hs,os,js,Ps,jn,pi]),yt([cn,En,_i,ks,gs,Qn,ts,is,Is,Rs,Dn,Un,An]);class Ci extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,t,r){if(e===nn.UrlElicitationRequired&&r){const e=r;if(e.elicitations)return new Ti(e.elicitations,t)}return new Ci(e,t,r)}}class Ti extends Ci{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(nn.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}}},2884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(329).default];t.default=n},2921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrcaOobMetricsSubchannelWrapper=t.GRPC_METRICS_HEADER=t.ServerMetricRecorder=t.PerRequestMetricRecorder=void 0,t.createOrcaClient=h,t.createMetricsReader=function(e,r){return(n,s,i)=>{let o=i.getOpaque(p);if(o)e(o);else{const r=i.get(t.GRPC_METRICS_HEADER);r.length>0&&(o=u().xds.data.orca.v3.OrcaLoadReport.deserialize(r[0]),e(o),i.setOpaque(p,o))}r&&r(n,s,i)}};const n=r(4056),s=r(4700),i=r(7434),o=r(2379),a=r(131),c=r(3956),l=r(463),d=null;function u(){if(d)return d;const e=(0,r(5085).Yi)("xds/service/orca/v3/orca.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto/xds`,`${__dirname}/../../proto/protoc-gen-validate`]});return(0,n.loadPackageDefinition)(e)}function h(e){return new(0,u().xds.service.orca.v3.OpenRcaService)("unused",i.ChannelCredentials.createInsecure(),{channelOverride:e})}t.PerRequestMetricRecorder=class{constructor(){this.message={}}recordRequestCostMetric(e,t){this.message.request_cost||(this.message.request_cost={}),this.message.request_cost[e]=t}recordUtilizationMetric(e,t){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=t}recordNamedMetric(e,t){this.message.named_metrics||(this.message.named_metrics={}),this.message.named_metrics[e]=t}recordCPUUtilizationMetric(e){this.message.cpu_utilization=e}recordMemoryUtilizationMetric(e){this.message.mem_utilization=e}recordApplicationUtilizationMetric(e){this.message.application_utilization=e}recordQpsMetric(e){this.message.rps_fractional=e}recordEpsMetric(e){this.message.eps=e}serialize(){return u().xds.data.orca.v3.OrcaLoadReport.serialize(this.message)}},t.ServerMetricRecorder=class{constructor(){this.message={},this.serviceImplementation={StreamCoreMetrics:e=>{const t=e.request.report_interval?(0,s.durationToMs)((0,s.durationMessageToDuration)(e.request.report_interval)):3e4,r=setInterval(()=>{e.write(this.message)},t);e.on("cancelled",()=>{clearInterval(r)})}}}putUtilizationMetric(e,t){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=t}setAllUtilizationMetrics(e){this.message.utilization=Object.assign({},e)}deleteUtilizationMetric(e){var t;null===(t=this.message.utilization)||void 0===t||delete t[e]}setCpuUtilizationMetric(e){this.message.cpu_utilization=e}deleteCpuUtilizationMetric(){delete this.message.cpu_utilization}setApplicationUtilizationMetric(e){this.message.application_utilization=e}deleteApplicationUtilizationMetric(){delete this.message.application_utilization}setQpsMetric(e){this.message.rps_fractional=e}deleteQpsMetric(){delete this.message.rps_fractional}setEpsMetric(e){this.message.eps=e}deleteEpsMetric(){delete this.message.eps}addToServer(e){const t=u().xds.service.orca.v3.OpenRcaService.service;e.addService(t,this.serviceImplementation)}},t.GRPC_METRICS_HEADER="endpoint-load-metrics-bin";const p="grpc_orca_load_report",f="orca_oob_metrics";class m{constructor(e,t){this.metricsListener=e,this.intervalMs=t,this.dataProducer=null}setSubchannel(e){const t=e.getOrCreateDataProducer(f,v);this.dataProducer=t,t.addDataWatcher(this)}destroy(){var e;null===(e=this.dataProducer)||void 0===e||e.removeDataWatcher(this)}getInterval(){return this.intervalMs}onMetricsUpdate(e){this.metricsListener(e)}}class g{constructor(e){this.subchannel=e,this.dataWatchers=new Set,this.orcaSupported=!0,this.metricsCall=null,this.currentInterval=1/0,this.backoffTimer=new c.BackoffTimeout(()=>this.updateMetricsSubscription()),this.subchannelStateListener=()=>this.updateMetricsSubscription();const t=e.getChannel();this.client=h(t),e.addConnectivityStateListener(this.subchannelStateListener)}addDataWatcher(e){this.dataWatchers.add(e),this.updateMetricsSubscription()}removeDataWatcher(e){var t;this.dataWatchers.delete(e),0===this.dataWatchers.size?(this.subchannel.removeDataProducer(f),null===(t=this.metricsCall)||void 0===t||t.cancel(),this.metricsCall=null,this.client.close(),this.subchannel.removeConnectivityStateListener(this.subchannelStateListener)):this.updateMetricsSubscription()}updateMetricsSubscription(){var e;if(0===this.dataWatchers.size||!this.orcaSupported||this.subchannel.getConnectivityState()!==l.ConnectivityState.READY)return;const t=Math.min(...Array.from(this.dataWatchers).map(e=>e.getInterval()));if(!this.metricsCall||t!==this.currentInterval){null===(e=this.metricsCall)||void 0===e||e.cancel(),this.currentInterval=t;const r=this.client.streamCoreMetrics({report_interval:(0,s.msToDuration)(t)});this.metricsCall=r,r.on("data",e=>{this.dataWatchers.forEach(t=>{t.onMetricsUpdate(e)})}),r.on("error",e=>{this.metricsCall=null,e.code!==a.Status.UNIMPLEMENTED?e.code!==a.Status.CANCELLED&&this.backoffTimer.runOnce():this.orcaSupported=!1})}}}class y extends o.BaseSubchannelWrapper{constructor(e,t,r){super(e),this.addDataWatcher(new m(t,r))}getWrappedSubchannel(){return this.child}}function v(e){return new g(e)}t.OrcaOobMetricsSubchannelWrapper=y},2939:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},2986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(6596),s=r(6670),i=r(1980),o=r(4971);function a(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,n._`${s.parentData}[${s.parentDataProperty}]`))}function c(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:s,schema:i,parentSchema:o,it:a}=e,l=t.macro.call(a.self,i,o,a),d=c(r,s,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const u=r.name("valid");e.subschema({schema:l,schemaPath:n.nil,errSchemaPath:`${a.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;const{gen:l,keyword:d,schema:u,parentSchema:h,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,u,h,f):t.validate,g=c(l,d,m),y=l.let("valid");function v(r=(t.async?n._`await `:n.nil)){const o=f.opts.passContext?s.default.this:s.default.self,a=!("compile"in t&&!p||!1===t.schema);l.assign(y,n._`${r}${(0,i.callValidateCode)(e,g,o,a)}`,t.modifying)}function _(e){var r;l.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:y),e)}e.block$data(y,function(){if(!1===t.errors)v(),t.modifying&&a(e),_(()=>e.error());else{const r=t.async?function(){const e=l.let("ruleErrs",null);return l.try(()=>v(n._`await `),t=>l.assign(y,!1).if(n._`${t} instanceof ${f.ValidationError}`,()=>l.assign(e,n._`${t}.errors`),()=>l.throw(t))),e}():function(){const e=n._`${g}.errors`;return l.assign(e,null),v(n.nil),e}();t.modifying&&a(e),_(()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,()=>{r.assign(s.default.vErrors,n._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,n._`${s.default.vErrors}.length`),(0,o.extendErrors)(e)},()=>e.error())}(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:y)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},3043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(7083),s=r(2017),i=r(7242),o=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(a.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(c))return!0;if("object"==typeof r&&c(r))return!0}return!1}function l(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!o.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],e=>t+=l(e)),t===1/0))return 1/0}return t}function d(e,t="",r){!1!==r&&(t=p(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function p(e){return e?e.replace(h,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,r){return r=p(r),e.resolve(t,r)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,o=p(e[r]||t),a={"":o},c=d(n,o,!1),l={},u=new Set;return i(e,{allKeys:!0},(e,t,n,s)=>{if(void 0===s)return;const i=c+t;let o=a[s];function d(t){const r=this.opts.uriResolver.resolve;if(t=p(o?r(o,t):t),u.has(t))throw m(t);u.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==p(i)&&("#"===t[0]?(h(e,l[t],t),l[t]=e):this.refs[t]=i),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);d.call(this,`#${e}`)}}"string"==typeof e[r]&&(o=d.call(this,e[r])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),a[t]=o}),l;function h(e,t,r){if(void 0!==t&&!s(e,t))throw m(r)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},3106:e=>{"use strict";e.exports=require("zlib")},3135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const n=r(131),s=r(6308),i=r(4097),o=r(267);t.RetryThrottler=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,this.tokens=r?r.tokens*(e/r.maxTokens):e}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}},t.MessageBufferTracker=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-n<e||this.totalLimit-this.totalAllocated<e||(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,0))}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(n<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;const r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};const a="grpc-previous-rpc-attempts";t.RetryingCall=class{constructor(e,t,r,n,s,i,o,a,c){var l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=s,this.deadline=i,this.callNumber=o,this.bufferTracker=a,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;const d=null!==(l=e.getOptions()["grpc-node.retry_max_attempts_limit"])&&void 0!==l?l:5;if(0===e.getOptions()["grpc.enable_retries"])this.state="NO_RETRY",this.maxAttempts=1;else if(t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1)),this.maxAttempts=Math.min(e.maxAttempts,d)}else t.methodConfig.hedgingPolicy?(this.state="HEDGING",this.maxAttempts=Math.min(t.methodConfig.hedgingPolicy.maxAttempts,d)):(this.state="TRANSPARENT_ONLY",this.maxAttempts=1);this.startTime=new Date}getDeadlineInfo(){if(0===this.underlyingCalls.length)return[];const e=[],t=this.underlyingCalls[this.underlyingCalls.length-1];return this.underlyingCalls.length>1&&e.push("previous attempts: "+(this.underlyingCalls.length-1)),t.startTime>this.startTime&&e.push(`time to current attempt start: ${(0,s.formatDateDifference)(this.startTime,t.startTime)}`),e.push(...t.call.getDeadlineInfo()),e}getCallNumber(){return this.callNumber}trace(e){o.trace(n.LogVerbosity.DEBUG,"retrying_call","["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new i.Metadata});for(const{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e;e="COMPLETED"===this.underlyingCalls[this.committedCallIndex].state?this.getNextBufferIndex():this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){const e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){var t,r;if("COMMITTED"!==this.state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",null===(r=(t=this.callConfig).onCommitted)||void 0===r||r.call(t),this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(const[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>{var r;return e===t||e.toString().toLowerCase()===(null===(r=n.Status[t])||void 0===r?void 0:r.toLowerCase())})}getNextRetryJitter(){return Math.random()*(1.2-.8)+.8}getNextRetryBackoffMs(){var e;const t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;const r=this.getNextRetryJitter()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){if("RETRY"!==this.state)return void t(!1);if(this.attempts>=this.maxAttempts)return void t(!1);let r;if(null===e)r=this.getNextRetryBackoffMs();else{if(e<0)return this.state="TRANSPARENT_ONLY",void t(!1);r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout(()=>{var e,r;"RETRY"===this.state?null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r?(t(!0),this.attempts+=1,this.startNewAttempt()):(this.trace("Retry attempt denied by throttling policy"),t(!1)):t(!1)},r)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,s,i;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==n?n:[],e.code)){let n;if(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),null===r)n=0;else{if(r<0)return this.state="TRANSPARENT_ONLY",this.commitCall(t),void this.reportStatus(e);n=r}setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(i=this.retryThrottler)||void 0===i||i.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK)return null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),void this.reportStatus(e);if("NO_RETRY"===this.state)return this.commitCall(t),void this.reportStatus(e);if("COMMITTED"===this.state)return void this.reportStatus(e);const s=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,s):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,s)}}maybeStartHedgingAttempt(){"HEDGING"===this.state&&this.callConfig.methodConfig.hedgingPolicy&&(this.attempts>=this.maxAttempts||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()))}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;const s=null!==(e=n.hedgingDelay)&&void 0!==e?e:"0s",i=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*i),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});const r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(a,`${r}`);let s=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),s=!0,r>0&&n.set(a,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&n.metadata.set(a,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e,t){var r,n;null===(n=(r=this.getBufferEntry(t)).callback)||void 0===n||n.call(r),this.clearSentMessages(),this.underlyingCalls[e].nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if("COMPLETED"===t.state)return;const r=t.nextMessageToSend;if(this.getBufferEntry(r)){const n=this.getBufferEntry(r);switch(n.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e,r)}},n.message.message),"HALF_CLOSE"===this.getBufferEntry(r+1).entryType&&(this.trace("Sending halfClose immediately after message to child ["+t.call.getCallNumber()+"] - optimizing for unary/final message"),t.nextMessageToSend+=1,t.call.halfClose());break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r={message:t,flags:e.flags},n=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:r,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated){process.nextTick(()=>{var t;null===(t=e.callback)||void 0===t||t.call(e)});for(const[e,r]of this.underlyingCalls.entries())"ACTIVE"===r.state&&r.nextMessageToSend===n&&r.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e,n)}},t)}else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;const r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===n&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex,n)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(const e of this.underlyingCalls)"ACTIVE"===(null==e?void 0:e.state)&&e.call.startRead()}halfClose(){this.trace("halfClose called");const e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(t.nextMessageToSend!==e&&t.nextMessageToSend!==e-1||(this.trace("Sending halfClose immediately to child ["+t.call.getCallNumber()+"] - all messages already sent"),t.nextMessageToSend+=1,t.call.halfClose()))}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}getAuthContext(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getAuthContext():null}}},3144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i=r(5311),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:o,schema:a,schemaCode:c,it:l}=e;if(!o&&0===a.length)throw new Error("enum must have non-empty array");const d=a.length>=l.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,s.useFunc)(t,i.default);let p;if(d||o)p=t.let("valid"),e.block$data(p,function(){t.assign(p,!1),t.forOf("v",c,e=>t.if(n._`${h()}(${r}, ${e})`,()=>t.assign(p,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",c);p=(0,n.or)(...a.map((t,s)=>function(e,t){const s=a[t];return"object"==typeof s&&null!==s?n._`${h()}(${r}, ${e}[${t}])`:n._`${r} === ${s}`}(e,s)))}e.pass(p)}};t.default=o},3158:(e,t,r)=>{"use strict";e.exports=i;var n=r(6237);(i.prototype=Object.create(n.prototype)).constructor=i;var s=r(3610);function i(e){n.call(this,e)}i._configure=function(){s.Buffer&&(i.prototype._slice=s.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},3197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r(9896),s=r(6928),i=r(2549);function o(e,t){const r=e.resolvePath;e.resolvePath=(e,i)=>{if(s.isAbsolute(i))return i;for(const e of t){const t=s.join(e,i);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${i} not found in any of the include paths ${t}`),r(e,i)}}t.loadProtosWithOptions=async function(e,t){const r=new i.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));o(r,t.includeDirs)}const n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){const r=new i.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");o(r,t.includeDirs)}const n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){const e=r(5434),t=r(3951),n=r(2939),s=r(6710);i.common("api",e.nested.google.nested.protobuf.nested),i.common("descriptor",t.nested.google.nested.protobuf.nested),i.common("source_context",n.nested.google.nested.protobuf.nested),i.common("type",s.nested.google.nested.protobuf.nested)}},3231:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class s extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)c(r,t[n]),r.push(e[++n]);return new s(r)}t._Code=s,t.nil=new s(""),t._=i;const o=new s("+");function a(e,...t){const r=[d(e[0])];let n=0;for(;n<t.length;)r.push(o),c(r,t[n]),r.push(o,d(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new s(r)}function c(e,t){var r;t instanceof s?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:d(Array.isArray(r)?r.join(","):r))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=c,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new s(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},3262:(e,t,r)=>{"use strict";var n,s,i=e.exports=r(3610),o=r(4529);i.codegen=r(8561),i.fetch=r(5212),i.path=r(9207),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],s=e[r++];void 0!==s&&(t[n]=s)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,function(e,t){return t.toUpperCase()})},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type;n||(n=r(7882));var s=new n(t||e.name);return i.decorateRoot.add(s),s.ctor=e,Object.defineProperty(e,"$type",{value:s,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:s,enumerable:!1}),s};var d=0;i.decorateEnum=function(e){if(e.$type)return e.$type;s||(s=r(5643));var t=new s("Enum"+d++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,r,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,s){var i=r.shift();if("__proto__"===i||"prototype"===i)return t;if(r.length>0)t[i]=e(t[i]||{},r,s);else{var o=t[i];if(o&&n)return t;o&&(s=[].concat(o).concat(s)),t[i]=s}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(5330)))}})},3436:e=>{"use strict";const t="win32"===process.platform;function r(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function n(e,n){return t&&1===e&&!n.file?r(n.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;const s=e.emit;e.emit=function(t,i){if("exit"===t){const t=n(i,r);if(t)return s.call(e,"error",t)}return s.apply(e,arguments)}},verifyENOENT:n,verifyENOENTSync:function(e,n){return t&&1===e&&!n.file?r(n.original,"spawnSync"):null},notFoundError:r}},3449:(e,t,r)=>{"use strict";e.exports=u;var n,s=r(3610),i=s.LongBits,o=s.base64,a=s.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return s.Buffer?function(){return(u.create=function(){return new n})()}:function(){return new u}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}u.create=h(),u.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(u.alloc=s.pool(u.alloc,s.Array.prototype.subarray)),u.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,i.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=i.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var y=s.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var r=u.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},u._configure=function(e){n=e,u.create=h(),n._configure()}},3501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9048),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((t,r)=>{if((0,n.alwaysValidSchema)(s,t))return;const o=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(o)})}};t.default=s},3529:function(e,t,r){"use strict";var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.IdbManager=void 0;const a=o(r(5317)),c=o(r(6982)),l=o(r(1943)),d=o(r(9896)),u=o(r(674)),h=o(r(6340)),p=o(r(5692)),f=o(r(6928)),m=r(9023),g=o(r(1398)),y=(0,m.promisify)(a.execFile),v="1.1.8",_="idb_companion",b="7d6e854dbc0f47243fc26644f5deb586618bd86a31aaf1b933c7b64a84cc56f7",w=`https://github.com/facebook/idb/releases/download/v${v}/idb-companion.universal.tar.gz`,S="3b72cc6a9a5b1a22a188205a84090d3a294347a846180efd755cf1a3c848e3e7",E=3e5;t.IdbManager=class{constructor(e,t,r){this.logger=e,this.globalStoragePath=t,this.extensionPath=r,this.status="not_installed",this.idbPath=null,this.companionProcess=null,this.grpcClient=null,this.grpcSocketPath=null,this.downloadPromise=null,this.currentDeviceUdid=null,this.lastDownloadFailureTime=null,this.protoPath=f.join(r,"resources","idb.proto")}getStatus(){return this.status}async ensureInstalled(){if("ready"===this.status&&this.idbPath)return!0;if(this.downloadPromise){try{await this.downloadPromise}catch{}return"ready"===this.status}if(null!==this.lastDownloadFailureTime){const e=Date.now()-this.lastDownloadFailureTime;if(e<E){const t=Math.ceil((E-e)/1e3);return this.logger.info(`idb_companion download in cooldown, ${t}s remaining`),!1}this.lastDownloadFailureTime=null}const e=this.getFixedBinaryPath();if(await this.fileExists(e))return this.logger.info("Using fixed idb_companion with video streaming support"),this.idbPath=e,this.status="ready",!0;this.downloadPromise=this.downloadFixedIdbCompanion();try{if(await this.downloadPromise,"ready"===this.status)return!0}catch(e){this.logger.warn("Failed to download fixed idb_companion, trying original",e)}finally{this.downloadPromise=null}const t=await this.findSystemIdb();if(t)return this.logger.info("Using system idb_companion (video streaming may not work)"),this.idbPath=t,this.status="ready",!0;const r=this.getCachedBinaryPath();if(await this.fileExists(r))return this.logger.info("Using cached idb_companion (video streaming may not work)"),this.idbPath=r,this.status="ready",!0;this.downloadPromise=this.downloadIdbCompanion();try{return await this.downloadPromise,"ready"===this.status}catch(e){return this.lastDownloadFailureTime=Date.now(),this.logger.error("All idb_companion download attempts failed, entering cooldown period",e),!1}finally{this.downloadPromise=null}}getFixedBinaryPath(){return f.join(this.globalStoragePath,"idb","fixed","bin",_)}getFixedExtractDir(){return f.join(this.globalStoragePath,"idb","fixed")}async downloadFixedIdbCompanion(){this.status="downloading";const e=this.getFixedExtractDir();try{await l.mkdir(e,{recursive:!0});const t=f.join(e,"idb_companion_fixed.tar.gz");await g.window.withProgress({location:g.ProgressLocation.Notification,title:"iOS Simulator: Downloading fixed idb_companion (video streaming support)...",cancellable:!1},async r=>{await this.downloadFile("https://github.com/anysphere/idb/releases/download/v1.1.8-fixed-stream/idb-companion-fixed-video-stream.tar.gz",t,e=>{r.report({increment:e})}),r.report({message:"Verifying checksum..."});const n=await this.computeFileHash(t);if(n!==b)throw await l.unlink(t).catch(()=>{}),new Error(`Checksum verification failed for fixed idb_companion download. Expected: ${b}, Got: ${n}. The download may have been corrupted or tampered with.`);r.report({message:"Extracting..."}),await this.extractTarball(t,e),await l.unlink(t).catch(()=>{});const s=this.getFixedBinaryPath();await l.chmod(s,493),this.idbPath=s,this.status="ready",this.logger.info("Fixed idb_companion installed successfully with video streaming support")})}catch(e){throw this.status="error",this.logger.error("Failed to download fixed idb_companion",e),e}}async findSystemIdb(){const e=["/opt/homebrew/bin/idb_companion","/usr/local/bin/idb_companion"];for(const t of e)if(await this.fileExists(t))return t;try{const{stdout:e}=await y("which",["idb_companion"]),t=e.trim();if(t&&await this.fileExists(t))return t}catch{}return null}getCachedBinaryPath(){return f.join(this.globalStoragePath,"idb",v,"idb-companion.universal","bin",_)}async downloadIdbCompanion(){this.status="downloading";const e=f.join(this.globalStoragePath,"idb",v);try{await l.mkdir(e,{recursive:!0});const t=f.join(e,"idb_companion.tar.gz");await g.window.withProgress({location:g.ProgressLocation.Notification,title:"iOS Simulator: Downloading idb_companion...",cancellable:!1},async r=>{await this.downloadFile(w,t,e=>{r.report({increment:e})}),r.report({message:"Verifying checksum..."});const n=await this.computeFileHash(t);if(n!==S)throw await l.unlink(t).catch(()=>{}),new Error(`Checksum verification failed for idb_companion download. Expected: ${S}, Got: ${n}. The download may have been corrupted or tampered with.`);r.report({message:"Extracting..."}),await this.extractTarball(t,e),await l.unlink(t).catch(()=>{});const s=this.getCachedBinaryPath();await l.chmod(s,493),this.idbPath=s,this.status="ready"})}catch(e){throw this.status="error",this.logger.error("Failed to download idb_companion",e),e}}async computeFileHash(e){return new Promise((t,r)=>{const n=c.createHash("sha256"),s=d.createReadStream(e);s.on("data",e=>{n.update(e)}),s.on("end",()=>{t(n.digest("hex"))}),s.on("error",e=>{r(e)})})}async downloadFile(e,t,r){let n=null;for(let s=0;s<=3;s++){if(s>0){const e=2e3*Math.pow(2,s-1);this.logger.info(`Retrying download (attempt ${s+1}/4) after ${e}ms delay`),await new Promise(t=>setTimeout(t,e))}try{const n=0===s?r:void 0;return void await this.downloadFileOnce(e,t,n)}catch(e){n=e instanceof Error?e:new Error(String(e));const t=n.message;if(!(t.includes("EPROTO")||t.includes("ECONNRESET")||t.includes("ETIMEDOUT")||t.includes("ECONNREFUSED")||t.includes("SSL")||t.includes("socket hang up")||t.includes("HTTP 5")||t.includes("timed out")))throw n;this.logger.warn(`Download attempt ${s+1} failed with retryable error: ${t}`)}}throw n??new Error("Download failed after all retries")}downloadFileOnce(e,t,r){return new Promise((n,s)=>{const i=d.createWriteStream(t);let o=0;const a=e=>{const c=new p.Agent({keepAlive:!1,timeout:3e4}),d=p.get(e,{agent:c},e=>{if(301===e.statusCode||302===e.statusCode){if(e.resume(),o++,o>5)return c.destroy(),i.close(),l.unlink(t).catch(()=>{}),void s(new Error("Too many redirects"));const r=e.headers.location;if(r)return c.destroy(),void a(r)}if(200!==e.statusCode)return e.resume(),c.destroy(),i.close(),l.unlink(t).catch(()=>{}),void s(new Error(`Failed to download: HTTP ${e.statusCode}`));const d=parseInt(e.headers["content-length"]||"0",10);let u=0,h=0;e.on("data",e=>{if(u+=e.length,d>0&&r){const e=Math.floor(u/d*100);e>h&&(r(e-h),h=e)}}),e.on("error",e=>{c.destroy(),i.close(),l.unlink(t).catch(()=>{}),s(e)}),e.pipe(i),i.on("finish",()=>{c.destroy(),i.close(),n()}),i.on("error",e=>{c.destroy(),i.close(),l.unlink(t).catch(()=>{}),s(e)})});d.on("error",e=>{c.destroy(),i.close(),l.unlink(t).catch(()=>{}),s(e)}),d.setTimeout(3e4,()=>{d.destroy(),c.destroy(),i.close(),l.unlink(t).catch(()=>{}),s(new Error("Download request timed out"))})};a(e)})}async extractTarball(e,t){await y("tar",["-xzf",e,"-C",t])}async fileExists(e){try{return await l.access(e),!0}catch{return!1}}async ensureCompanionRunning(e){if(!this.idbPath)throw new Error("idb_companion not installed");if(this.companionProcess&&!this.companionProcess.killed&&this.currentDeviceUdid===e)return;await this.stopCompanion(),this.currentDeviceUdid=e;const t="/tmp/cursor-idb";await l.mkdir(t,{recursive:!0,mode:448});const r=c.randomBytes(8).toString("hex");this.grpcSocketPath=f.join(t,`${r}.sock`),await l.unlink(this.grpcSocketPath).catch(()=>{}),this.companionProcess=a.spawn(this.idbPath,["--udid",e,"--grpc-domain-sock",this.grpcSocketPath],{stdio:["ignore","pipe","pipe"],detached:!1,env:{...process.env,...process.env.DEVELOPER_DIR?{DEVELOPER_DIR:process.env.DEVELOPER_DIR}:{}}}),this.companionProcess.stderr?.on("data",e=>{const t=e.toString().trim();(t.includes("error")||t.includes("Error"))&&this.logger.warn("idb_companion stderr",t)}),this.companionProcess.on("error",e=>{this.logger.error("idb_companion spawn error",e),this.companionProcess=null,this.grpcClient=null}),this.companionProcess.on("exit",e=>{0!==e&&null!==e&&this.logger.warn("idb_companion exited with code",{code:e}),this.companionProcess=null,this.grpcClient=null}),await this.waitForCompanion(),await this.createGrpcClient()}async waitForCompanion(){if(!this.grpcSocketPath)throw new Error("gRPC socket path not set");for(let e=0;e<50;e++){await new Promise(e=>setTimeout(e,100));try{await l.access(this.grpcSocketPath);const e=await Promise.resolve().then(()=>o(r(9278)));if(await new Promise(t=>{const r=new e.Socket;r.setTimeout(200),r.on("connect",()=>{r.destroy(),t(!0)}),r.on("error",()=>{r.destroy(),t(!1)}),r.on("timeout",()=>{r.destroy(),t(!1)}),r.connect(this.grpcSocketPath)}))return}catch{}}throw new Error("Timeout waiting for idb_companion to start")}async createGrpcClient(){if(!this.grpcSocketPath)throw new Error("gRPC socket path not set");try{this.logger.info("Loading idb proto definition");const e=await h.load(this.protoPath,{keepCase:!0,longs:Number,enums:Number,defaults:!0,oneofs:!0});Object.keys(e).filter(e=>e.includes("Service")||e.includes("service")),this.logger.info(`Proto package definition keys: ${Object.keys(e).slice(0,20).join(", ")}`);const t=u.loadPackageDefinition(e);this.logger.info(`Proto descriptor keys: ${Object.keys(t).join(", ")}`);const r=t.idb;if(!r)throw this.logger.error(`idb package not found. Available: ${Object.keys(t).join(", ")}`),new Error("idb package not found in proto");if(this.logger.info(`idb package keys: ${Object.keys(r).join(", ")}`),!r.CompanionService)throw this.logger.error(`CompanionService not found in idb package. Available: ${Object.keys(r).join(", ")}`),new Error("CompanionService not found in proto");const n=r.CompanionService;this.logger.info("CompanionService is: "+typeof n),this.grpcClient=new r.CompanionService(`unix://${this.grpcSocketPath}`,u.credentials.createInsecure());const s=Object.getPrototypeOf(this.grpcClient),i=Object.getOwnPropertyNames(s).filter(e=>"constructor"!==e);this.logger.info(`gRPC client prototype methods: ${i.join(", ")}`)}catch(e){throw this.logger.error("Failed to create gRPC client",e),e}}async stopCompanion(){this.grpcClient&&(this.grpcClient.close(),this.grpcClient=null),this.companionProcess&&!this.companionProcess.killed&&(this.companionProcess.kill(),this.companionProcess=null),this.grpcSocketPath&&(await l.unlink(this.grpcSocketPath).catch(()=>{}),this.grpcSocketPath=null),this.currentDeviceUdid=null}async tap(e,t,r=0,n){try{await this.ensureInstalled();const s=n||await this.getBootedDeviceUdid();if(!s)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(s),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const i=[{press:{action:{touch:{point:{x:e,y:t}}},direction:0}}];return r>0&&i.push({delay:{duration:r/1e3}}),i.push({press:{action:{touch:{point:{x:e,y:t}}},direction:1}}),await this.sendHidEvents(i),{success:!0,x:e,y:t,method:"idb"}}catch(r){return this.logger.error("Tap failed",r),{success:!1,x:e,y:t,error:String(r)}}}async swipe(e,t,r,n,s=300,i){try{await this.ensureInstalled();const o=i||await this.getBootedDeviceUdid();return o?(await this.ensureCompanionRunning(o),this.grpcClient?(await this.sendHidEvents([{swipe:{start:{x:e,y:t},end:{x:r,y:n},delta:2,duration:Math.min(s,100)/1e3}}]),{success:!0,startX:e,startY:t,endX:r,endY:n,method:"idb"}):{success:!1,error:"gRPC client not available"}):{success:!1,error:"No booted simulator found"}}catch(s){return this.logger.error("Swipe failed",s),{success:!1,startX:e,startY:t,endX:r,endY:n,error:String(s)}}}async typeText(e,t){try{await this.ensureInstalled();const r=t||await this.getBootedDeviceUdid();if(!r)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(r),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const n=[],s=225;for(const t of e){const e=this.charToKeyCode(t);e&&(e.shift&&n.push({press:{action:{key:{keycode:s}},direction:0}}),n.push({press:{action:{key:{keycode:e.keyCode}},direction:0}}),n.push({press:{action:{key:{keycode:e.keyCode}},direction:1}}),e.shift&&n.push({press:{action:{key:{keycode:s}},direction:1}}))}return 0===n.length||await this.sendHidEvents(n),{success:!0,text:e,method:"idb"}}catch(t){return this.logger.error("Type failed",t),{success:!1,text:e,error:String(t)}}}charToKeyCode(e){const t=e;if(t>="a"&&t<="z")return{keyCode:t.charCodeAt(0)-"a".charCodeAt(0)+4,shift:!1};if(t>="A"&&t<="Z")return{keyCode:t.charCodeAt(0)-"A".charCodeAt(0)+4,shift:!0};if(t>="1"&&t<="9")return{keyCode:t.charCodeAt(0)-"1".charCodeAt(0)+30,shift:!1};if("0"===t)return{keyCode:39,shift:!1};const r={" ":{keyCode:44,shift:!1},"\n":{keyCode:40,shift:!1},"\t":{keyCode:43,shift:!1},"-":{keyCode:45,shift:!1},_:{keyCode:45,shift:!0},"=":{keyCode:46,shift:!1},"+":{keyCode:46,shift:!0},"[":{keyCode:47,shift:!1},"{":{keyCode:47,shift:!0},"]":{keyCode:48,shift:!1},"}":{keyCode:48,shift:!0},"\\":{keyCode:49,shift:!1},"|":{keyCode:49,shift:!0},";":{keyCode:51,shift:!1},":":{keyCode:51,shift:!0},"'":{keyCode:52,shift:!1},'"':{keyCode:52,shift:!0},"`":{keyCode:53,shift:!1},"~":{keyCode:53,shift:!0},",":{keyCode:54,shift:!1},"<":{keyCode:54,shift:!0},".":{keyCode:55,shift:!1},">":{keyCode:55,shift:!0},"/":{keyCode:56,shift:!1},"?":{keyCode:56,shift:!0},"!":{keyCode:30,shift:!0},"@":{keyCode:31,shift:!0},"#":{keyCode:32,shift:!0},$:{keyCode:33,shift:!0},"%":{keyCode:34,shift:!0},"^":{keyCode:35,shift:!0},"&":{keyCode:36,shift:!0},"*":{keyCode:37,shift:!0},"(":{keyCode:38,shift:!0},")":{keyCode:39,shift:!0}};return r[t]?r[t]:null}async pressKey(e,t){try{await this.ensureInstalled();const r=t||await this.getBootedDeviceUdid();if(!r)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(r),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const n=e.toLowerCase(),s={home:1,lock:2,siri:4,sidebutton:3,applepay:0}[n];if(void 0!==s)return await this.sendHidEvents([{press:{action:{button:{button:s}},direction:0}},{press:{action:{button:{button:s}},direction:1}}]),{success:!0,key:e,method:"idb"};const i={return:40,enter:40,tab:43,space:44,backspace:42,delete:42,escape:41,up:82,down:81,left:80,right:79,end:77,pageup:75,pagedown:78}[n];if(i)return await this.sendHidEvents([{press:{action:{key:{keycode:i}},direction:0}},{press:{action:{key:{keycode:i}},direction:1}}]),{success:!0,key:e,method:"idb"};if(1===e.length){const r=await this.typeText(e,t);return{success:r.success,key:e,method:r.method,error:r.error}}return{success:!1,key:e,error:"Unknown key"}}catch(t){return this.logger.error("Key press failed",t),{success:!1,key:e,error:String(t)}}}async getAccessibilityTree(e=4,t=24,r){try{await this.ensureInstalled();const n=r||await this.getBootedDeviceUdid();if(!n)return{error:"No booted simulator found"};if(await this.ensureCompanionRunning(n),!this.grpcClient)return{error:"gRPC client not available"};const s=await new Promise((e,t)=>{this.grpcClient.accessibility_info({format:"NESTED",point:{x:0,y:0}},(r,n)=>{r?t(r):e(n)})}),i=JSON.parse(s.json),o=this.pruneAccessibilityTree(i,e,t);return{capturedAt:(new Date).toISOString(),tree:o}}catch(e){return this.logger.error("Accessibility snapshot failed",e),{error:String(e)}}}pruneAccessibilityTree(e,t,r,n=0){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.slice(0,r).map(e=>this.pruneAccessibilityTree(e,t,r,n));const s=e,i={};for(const[e,o]of Object.entries(s))if("children"!==e&&"AXChildren"!==e&&"elements"!==e||!Array.isArray(o))i[e]=o;else if(n>=t)o.length>0&&(i[e]=`[${o.length} children omitted - max depth reached]`);else{const s=o.slice(0,r);i[e]=s.map(e=>this.pruneAccessibilityTree(e,t,r,n+1)),o.length>r&&(i[`${e}_truncated`]=o.length-r+" more children omitted")}return i}async sendHidEvents(e){return new Promise((t,r)=>{const n=this.grpcClient.hid((e,n)=>{e?(this.logger.error("HID call error",e),r(e)):t()});n.on("error",e=>{this.logger.error("HID stream error",e)});for(const t of e)n.write(t);n.end()})}async getBootedDeviceUdid(){try{const{stdout:e}=await y("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e);for(const e of Object.values(t.devices))for(const t of e)if("Booted"===t.state)return t.udid}catch(e){this.logger.error("Failed to get booted device",e)}return null}async listDevices(){try{const{stdout:e}=await y("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e),r=[];for(const[e,n]of Object.entries(t.devices))for(const t of n)"Booted"===t.state&&r.push({...t,runtime:e});return r}catch(e){return this.logger.error("Failed to list devices",e),[]}}async listAllDevices(){try{const{stdout:e}=await y("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e),r=[];for(const[e,n]of Object.entries(t.devices))for(const t of n)!1!==t.isAvailable&&r.push({name:t.name,udid:t.udid,state:t.state,runtime:e});return r}catch(e){return this.logger.error("Failed to list all devices",e),[]}}async bootSimulator(e){try{return this.logger.info(`Booting simulator: ${e}`),await y("xcrun",["simctl","boot",e],{timeout:3e4}),await y("open",["-a","Simulator"]),{success:!0}}catch(e){const t=e instanceof Error?e.message:String(e);return t.includes("current state: Booted")?(this.logger.info("Simulator already booted"),{success:!0}):(this.logger.error("Failed to boot simulator",e),{success:!1,error:t})}}async bootFirstAvailableSimulator(){try{const e=await this.listAllDevices(),t=e.filter(e=>e.name.includes("iPhone")&&e.runtime.includes("iOS")).sort((e,t)=>t.name.localeCompare(e.name));if(0===t.length){const t=e.filter(e=>e.runtime.includes("iOS"));if(0===t.length)return{success:!1,error:"No iOS simulators available. Install simulators via Xcode."};const r=t[0];return{...await this.bootSimulator(r.udid),name:r.name,udid:r.udid}}const r=t[0];return{...await this.bootSimulator(r.udid),name:r.name,udid:r.udid}}catch(e){return this.logger.error("Failed to boot first available simulator",e),{success:!1,error:String(e)}}}async screenshot(e){try{await this.ensureInstalled();const t=e||await this.getBootedDeviceUdid();if(!t)return null;if(await this.ensureCompanionRunning(t),!this.grpcClient)return null;const r=Date.now(),n=await new Promise((e,t)=>{this.grpcClient.screenshot({},(r,n)=>{r?t(r):e(n)})}),s=Date.now()-r;return n.image_data&&0!==n.image_data.length?(this.logger.info(`idb screenshot: ${n.image_data.length} bytes, format=${n.image_format}, took ${s}ms`),{imageData:n.image_data,imageFormat:n.image_format||"png"}):(this.logger.warn("idb screenshot returned empty data"),null)}catch(e){return this.logger.warn("idb screenshot error",e),null}}async startVideoStream(e,t,r){try{await this.ensureInstalled();const n=r||await this.getBootedDeviceUdid();if(!n)return this.logger.warn("No booted device for video stream"),null;if(await this.ensureCompanionRunning(n),!this.grpcClient)return this.logger.warn("No gRPC client for video stream"),null;this.logger.info(`Starting video stream: fps=${e.fps??30}, format=${e.format??"mjpeg"}`);const s=this.grpcClient.video_stream();let i=!1,o=0;s.on("data",e=>{if(i)return;const r=e;if(0===o){const e=Object.keys(r);this.logger.info(`Video stream response keys: ${e.join(", ")}`);for(const t of e){const e=r[t];if(e&&"object"==typeof e){const r=Object.keys(e);this.logger.info(`  ${t} keys: ${r.join(", ")}`)}else Buffer.isBuffer(e)?this.logger.info(`  ${t}: Buffer(${e.length})`):this.logger.info(`  ${t}: ${typeof e}`)}}let n;if(r.payload&&"object"==typeof r.payload){const e=r.payload;if(Buffer.isBuffer(e.data))n=e.data;else if(e.source&&"object"==typeof e.source){const t=e.source;Buffer.isBuffer(t.data)&&(n=t.data)}}!n&&Buffer.isBuffer(r.data)&&(n=r.data),n&&n.length>0?(o++,1===o&&this.logger.info(`First video frame received: ${n.length} bytes`),o%100==0&&this.logger.info(`Video stream: ${o} frames received`),t(n)):r.log_output&&Buffer.isBuffer(r.log_output)&&this.logger.info(`Video stream log: ${r.log_output.toString()}`)}),s.on("error",e=>{i||this.logger.warn("Video stream error",e)}),s.on("end",()=>{this.logger.info(`Video stream ended after ${o} frames`)});const a={h264:0,mjpeg:2},c={start:{fps:e.fps??30,format:a[e.format??"mjpeg"]??2,compression_quality:e.quality??.5,scale_factor:e.scale??1}};return s.write(c),{stop:()=>{i||(i=!0,s.write({stop:{}}),s.end())}}}catch(e){return this.logger.error("Failed to start video stream",e),null}}async dispose(){await this.stopCompanion()}}},3549:(e,t,r)=>{"use strict";r(2503),r(9952)},3610:function(e,t,r){"use strict";var n=t;function s(e,t,r){for(var n=Object.keys(t),s=0;s<n.length;++s)void 0!==e[n[s]]&&r||(e[n[s]]=t[n[s]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&s(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(8045),n.base64=r(8839),n.EventEmitter=r(4358),n.float=r(9410),n.inquire=r(4153),n.utf8=r(1447),n.pool=r(9390),n.LongBits=r(2239),n.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=s,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},3653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;const n=r(7434),s=r(8899);t.ChannelImplementation=class{constructor(e,t,r){if("string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.internalChannel=new s.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,s){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,s)}}},3663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1980),s=r(6596),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:i,schemaCode:o,it:a}=e,c=a.opts.unicodeRegExp?"u":"",l=r?s._`(new RegExp(${o}, ${c}))`:(0,n.usePattern)(e,i);e.fail$data(s._`!${l}.test(${t})`)}};t.default=i},3697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(5962),s=r(9877),i=r(1140),o=r(9877),a=r(2363),c=r(2986),l=r(7344),d=r(6596),u=r(6670),h=r(978),p=r(9048),f=r(4971);function m({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,n.$async,()=>{e.code(d._`"use strict"; ${g(r,s)}`),function(e,t){e.if(u.default.valCxt,()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)})}(e,s),e.code(i)}):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(s)}`,n.$async,()=>e.code(g(r,s)).code(i))}function g(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?d._`/*# sourceURL=${r} */`:d.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function _(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function b(e,t){if(e.opts.jtd)return S(e,[],!1,t);const r=(0,s.getSchemaTypes)(e.schema);S(e,r,!(0,s.coerceAndCheckDataType)(e,r),t)}function w({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(!0===s.$comment)e.code(d._`${u.default.self}.logger.log(${i})`);else if("function"==typeof s.$comment){const r=d.str`${n}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${i}, ${r}, ${s}.schema)`)}}function S(e,t,r,n){const{gen:s,schema:a,data:c,allErrors:l,opts:h,self:f}=e,{RULES:m}=f;function g(p){(0,i.shouldUseGroup)(a,p)&&(p.type?(s.if((0,o.checkDataType)(p.type,c,h.strictNumbers)),E(e,p),1===t.length&&t[0]===p.type&&r&&(s.else(),(0,o.reportTypeError)(e)),s.endIf()):E(e,p),l||s.if(d._`${u.default.errors} === ${n||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(a,m)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{C(e.dataTypes,t)||T(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const r=[];for(const n of e.dataTypes)C(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&T(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if("object"==typeof s&&(0,i.shouldUseRule)(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some(e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n})&&T(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),s.block(()=>{for(const e of m.rules)g(e);g(m.post)})):s.block(()=>P(e,"$ref",m.all.$ref.definition))}function E(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,i.shouldUseRule)(n,r)&&P(e,r.keyword,r.definition,t.type)})}function C(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function T(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(_(e),y(e))?function(e){const{schema:t,opts:r,gen:n}=e;m(e,()=>{r.$comment&&t.$comment&&w(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(u.default.vErrors,null),n.let(u.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",d._`${r}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`)),t.if(d._`${e.evaluated}.dynamicItems`,()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`))}(e),b(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if(d._`${u.default.errors} === 0`,()=>t.return(u.default.data),()=>t.throw(d._`new ${s}(${u.default.vErrors})`)):(t.assign(d._`${n}.errors`,u.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof d.Name&&e.assign(d._`${t}.props`,r),n instanceof d.Name&&e.assign(d._`${t}.items`,n)}(e),t.return(d._`${u.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,n.topBoolOrEmptySchema)(e))};class k{constructor(e,t,r){if((0,c.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",x(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,r){this.failResult((0,d.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=d.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:s,def:i}=this;r.if((0,d.or)(d._`${n} === undefined`,t)),e!==d.nil&&r.assign(e,!0),(s.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:s}=this;return(0,d.or)(function(){if(r.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return d._`${(0,o.checkDataTypes)(e,t,s.opts.strictNumbers,o.DataType.Wrong)}`}return d.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return d._`!${r}(${t})`}return d.nil}())}subschema(e,t){const r=(0,l.getSubschema)(this.it,e);(0,l.extendSubschemaData)(r,this.it,e),(0,l.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return function(e,t){v(e)&&(_(e),y(e))?function(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&w(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=n.const("_errs",u.default.errors);b(e,i),n.var(t,d._`${i} === ${u.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=p.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=p.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,d.Name)),!0}}function P(e,t,r,n){const s=new k(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,c.funcKeywordCode)(s,r):"macro"in r?(0,c.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,c.funcKeywordCode)(s,r)}t.KeywordCxt=k;const $=/^\/(?:[^~]|~0|~1)*$/,O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(""===e)return u.default.rootData;if("/"===e[0]){if(!$.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=u.default.rootData}else{const o=O.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+o[1];if(s=o[2],"#"===s){if(a>=t)throw new Error(c("property/index",a));return n[t-a]}if(a>t)throw new Error(c("data",a));if(i=r[t-a],!s)return i}let o=i;const a=s.split("/");for(const e of a)e&&(i=d._`${i}${(0,d.getProperty)((0,p.unescapeJsonPointer)(e))}`,o=d._`${o} && ${i}`);return o;function c(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=x},3740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(7346),s=r(1980),i=r(6596),o=r(6670),a=r(1430),c=r(9048),l={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:o,schemaEnv:c,validateName:l,opts:h,self:p}=s,{root:f}=c;if(("#"===r||"#/"===r)&&o===f.baseId)return function(){if(c===f)return u(e,l,c,c.$async);const r=t.scopeValue("root",{ref:f});return u(e,i._`${r}.validate`,f,f.$async)}();const m=a.resolveRef.call(p,f,o,r);if(void 0===m)throw new n.default(s.opts.uriResolver,o,r);return m instanceof a.SchemaEnv?function(t){const r=d(e,t);u(e,r,t,t.$async)}(m):function(n){const s=t.scopeValue("schema",!0===h.code.source?{ref:n,code:(0,i.stringify)(n)}:{ref:n}),o=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:i.nil,topSchemaRef:s,errSchemaPath:r},o);e.mergeEvaluated(a),e.ok(o)}(m)}};function d(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):i._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,r,n){const{gen:a,it:l}=e,{allErrors:d,schemaEnv:u,opts:h}=l,p=h.passContext?o.default.this:i.nil;function f(e){const t=i._`${e}.errors`;a.assign(o.default.vErrors,i._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),a.assign(o.default.errors,i._`${o.default.vErrors}.length`)}function m(e){var t;if(!l.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==l.props)if(n&&!n.dynamicProps)void 0!==n.props&&(l.props=c.mergeEvaluated.props(a,n.props,l.props));else{const t=a.var("props",i._`${e}.evaluated.props`);l.props=c.mergeEvaluated.props(a,t,l.props,i.Name)}if(!0!==l.items)if(n&&!n.dynamicItems)void 0!==n.items&&(l.items=c.mergeEvaluated.items(a,n.items,l.items));else{const t=a.var("items",i._`${e}.evaluated.items`);l.items=c.mergeEvaluated.items(a,t,l.items,i.Name)}}n?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try(()=>{a.code(i._`await ${(0,s.callValidateCode)(e,t,p)}`),m(t),d||a.assign(r,!0)},e=>{a.if(i._`!(${e} instanceof ${l.ValidationError})`,()=>a.throw(e)),f(e),d||a.assign(r,!1)}),e.ok(r)}():e.result((0,s.callValidateCode)(e,t,p),()=>m(t),()=>f(t))}t.getValidate=d,t.callRef=u,t.default=l},3767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i=r(2482),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:o,schemaCode:a,schema:c}=e;o||c&&"object"==typeof c?e.fail$data(n._`!${(0,s.useFunc)(t,i.default)}(${r}, ${a})`):e.fail(n._`${c} !== ${r}`)}};t.default=o},3781:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},3789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(2104),s=r(5885);var i=r(2104);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var o=r(5885);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class c extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class l extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=N(this.rhs,e,t),this}get names(){return x(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class d extends l{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=N(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const s=r[n];s.optimizeNames(e,t)||(R(e,s.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>O(e,t.names),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class v extends g{}v.kind="else";class _ extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(I(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=N(this.condition,e,t),this}get names(){const e=super.names;return x(e,this.condition),this.else&&O(e,this.else.names),e}}_.kind="if";class b extends g{}b.kind="for";class w extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=N(this.iteration,e,t),this}get names(){return O(super.names,this.iteration.names)}}class S extends b{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=x(super.names,this.from);return x(e,this.to)}}class E extends b{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=N(this.iterable,e,t),this}get names(){return O(super.names,this.iterable.names)}}class C extends g{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class T extends m{render(e){return"return "+super.render(e)}}T.kind="return";class k extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&O(e,this.catch.names),this.finally&&O(e,this.finally.names),e}}class P extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}P.kind="catch";class $ extends g{render(e){return"finally"+super.render(e)}}function O(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function x(e,t){return t instanceof n._CodeOrName?O(e,t.names):e}function N(e,t,r){return e instanceof n.Name?i(e):(s=e)instanceof n._Code&&s._items.some(e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str])?new n._Code(e._items.reduce((e,t)=>(t instanceof n.Name&&(t=i(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e),[])):e;var s;function i(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function R(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function I(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${z(e)}`}$.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const s=this._scope.toName(t);return void 0!==r&&n&&(this._constants[s.str]=r),this._leafNode(new c(e,s,r)),s}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new l(e,t,r))}add(e,r){return this._leafNode(new d(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[r,s]of e)t.length>1&&t.push(","),t.push(r),(r!==s||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,s));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new _(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(_,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,r,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const o=this._scope.toName(e);return this._for(new S(i,o,t,r),()=>n(o))}forOf(e,t,r,i=s.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,t=>{this.var(o,n._`${e}[${t}]`),r(o)})}return this._for(new E("of",i,o,t),()=>r(o))}forIn(e,t,r,i=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const o=this._scope.toName(e);return this._for(new E("in",i,o,t),()=>r(o))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new T;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new k;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new P(e),t(e)}return r&&(this._currNode=n.finally=new $,this.code(r)),this._endBlockNode(P,$)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,s){return this._blockNode(new C(e,t,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=I;const A=j(t.operators.AND);t.and=function(...e){return e.reduce(A)};const M=j(t.operators.OR);function j(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${z(t)} ${e} ${z(r)}`}function z(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(M)}},3822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUri=function(e){const t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}},t.splitHostPort=function(e){if(e.startsWith("[")){const t=e.indexOf("]");if(-1===t)return null;const r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(e.length>t+1){if(":"===e[t+1]){const s=e.substring(t+2);return n.test(s)?{host:r,port:+s}:null}return null}return{host:r}}{const t=e.split(":");return 2===t.length?n.test(t[1])?{host:t[0],port:+t[1]}:null:{host:e}}},t.combineHostPort=function(e){return void 0===e.port?e.host:e.host.includes(":")?`[${e.host}]:${e.port}`:`${e.host}:${e.port}`},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path,t};const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/,n=/^\d+$/},3875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i=r(2261),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:o,it:a}=e,c="maxLength"===t?n.operators.GT:n.operators.LT,l=!1===a.opts.unicode?n._`${r}.length`:n._`${(0,s.useFunc)(e.gen,i.default)}(${r})`;e.fail$data(n._`${l} ${c} ${o}`)}};t.default=o},3929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},3951:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38],"php_generic_services"],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},3952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0,t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let s=[];s=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);const i=Object.assign({},r,{method_definition:t}),o=s.reduceRight((e,t)=>r=>t(r,e),e=>function(e,t,r){const n=function(e,t,r){var n,s;const i=null!==(n=r.deadline)&&void 0!==n?n:1/0,o=r.host,a=null!==(s=r.parent)&&void 0!==s?s:null,c=r.propagate_flags,l=r.credentials,d=e.createCall(t,i,o,a,c);return l&&d.setCredentials(l),d}(e,r.path,t);return r.responseStream?new h(n,r):new u(n,r)}(n,e,t));return o(i)};const n=r(4097),s=r(5034),i=r(131),o=r(9752);class a extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,a)}}t.InterceptorConfigurationError=a,t.ListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}},t.RequesterBuilder=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};const c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},l={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};t.InterceptingCall=class{constructor(e,t){var r,n,s,i;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,this.requester=t?{start:null!==(r=t.start)&&void 0!==r?r:l.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:l.sendMessage,halfClose:null!==(s=t.halfClose)&&void 0!==s?s:l.halfClose,cancel:null!==(i=t.cancel)&&void 0!==i?i:l.cancel}:l}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,i,o,a,l;const d={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(o=null===(i=null==t?void 0:t.onReceiveMessage)||void 0===i?void 0:i.bind(t))&&void 0!==o?o:e=>{},onReceiveStatus:null!==(l=null===(a=null==t?void 0:t.onReceiveStatus)||void 0===a?void 0:a.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,d,(e,t)=>{var r,n,i;let o;if(this.processingMetadata=!1,(0,s.isInterceptingListener)(t))o=t;else{const e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:c.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:c.onReceiveMessage,onReceiveStatus:null!==(i=t.onReceiveStatus)&&void 0!==i?i:c.onReceiveStatus};o=new s.InterceptingListenerImpl(e,d)}this.nextCall.start(e,o),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}getAuthContext(){return this.nextCall.getAuthContext()}};class d{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){return void this.call.cancelWithStatus(i.Status.INTERNAL,`Request message serialization failure: ${(0,o.getErrorMessage)(e)}`)}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var s;let a;try{a=this.methodDefinition.responseDeserialize(e)}catch(e){return r={code:i.Status.INTERNAL,details:`Response message parsing error: ${(0,o.getErrorMessage)(e)}`,metadata:new n.Metadata},void this.call.cancelWithStatus(r.code,r.details)}null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s||s.call(t,a)},onReceiveStatus:e=>{var n,s;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(s=null==t?void 0:t.onReceiveStatus)||void 0===s||s.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}getAuthContext(){return this.call.getAuthContext()}}class u extends d{constructor(e,t){super(e,t)}start(e,t){var r,n;let s=!1;const i={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;s=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;s||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,i),this.call.startRead()}}class h extends d{}},3953:(e,t,r)=>{"use strict";var n,s,i;r.r(t),r.d(t,{Client:()=>Je,getSupportedElicitationModes:()=>Ke}),(i=n||(n={})).assertEqual=e=>{},i.assertIs=function(e){},i.assertNever=function(e){throw new Error},i.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},i.getValidEnumValues=e=>{const t=i.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const n of t)r[n]=e[n];return i.objectValues(r)},i.objectValues=e=>i.objectKeys(e).map(function(t){return e[t]}),i.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},i.find=(e,t)=>{for(const r of e)if(t(r))return r},i.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,i.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},i.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,function(e){e.mergeShapes=(e,t)=>({...e,...t})}(s||(s={}));const o=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),a=e=>{switch(typeof e){case"undefined":return o.undefined;case"string":return o.string;case"number":return Number.isNaN(e)?o.nan:o.number;case"boolean":return o.boolean;case"function":return o.function;case"bigint":return o.bigint;case"symbol":return o.symbol;case"object":return Array.isArray(e)?o.array:null===e?o.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?o.promise:"undefined"!=typeof Map&&e instanceof Map?o.map:"undefined"!=typeof Set&&e instanceof Set?o.set:"undefined"!=typeof Date&&e instanceof Date?o.date:o.object;default:return o.unknown}},c=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class l extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(n);else if("invalid_return_type"===s.code)n(s.returnTypeError);else if("invalid_arguments"===s.code)n(s.argumentsError);else if(0===s.path.length)r._errors.push(t(s));else{let e=r,n=0;for(;n<s.path.length;){const r=s.path[n];n===s.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(s))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof l))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t=Object.create(null),r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}l.create=e=>new l(e);const d=(e,t)=>{let r;switch(e.code){case c.invalid_type:r=e.received===o.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case c.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.joinValues(e.keys,", ")}`;break;case c.invalid_union:r="Invalid input";break;case c.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.joinValues(e.options)}`;break;case c.invalid_enum_value:r=`Invalid enum value. Expected ${n.joinValues(e.options)}, received '${e.received}'`;break;case c.invalid_arguments:r="Invalid function arguments";break;case c.invalid_return_type:r="Invalid function return type";break;case c.invalid_date:r="Invalid date";break;case c.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case c.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case c.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case c.custom:r="Invalid input";break;case c.invalid_intersection_types:r="Intersection results could not be merged";break;case c.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case c.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.assertNever(e)}return{message:r}};let u=d;function h(e,t){const r=u,n=(e=>{const{data:t,path:r,errorMaps:n,issueData:s}=e,i=[...r,...s.path||[]],o={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let a="";const c=n.filter(e=>!!e).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...s,path:i,message:a}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===d?void 0:d].filter(e=>!!e)});e.common.issues.push(n)}class p{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return f;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return p.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:s}=n;if("aborted"===t.status)return f;if("aborted"===s.status)return f;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!n.alwaysSet||(r[t.value]=s.value)}return{status:e.value,value:r}}}const f=Object.freeze({status:"aborted"}),m=e=>({status:"dirty",value:e}),g=e=>({status:"valid",value:e}),y=e=>"aborted"===e.status,v=e=>"dirty"===e.status,_=e=>"valid"===e.status,b=e=>"undefined"!=typeof Promise&&e instanceof Promise;var w;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(w||(w={}));class S{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const E=(e,t)=>{if(_(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new l(e.common.issues);return this._error=t,this._error}}};function C(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:s}:{errorMap:(t,s)=>{const{message:i}=e;return"invalid_enum_value"===t.code?{message:i??s.defaultError}:void 0===s.data?{message:i??n??s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:i??r??s.defaultError}},description:s}}class T{get description(){return this._def.description}_getType(e){return a(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new p,ctx:{common:e.parent.common,data:e.data,parsedType:a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(b(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)},n=this._parseSync({data:e,path:r.path,parent:r});return E(r,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return _(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>_(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:a(e)},n=this._parse({data:e,path:r.path,parent:r}),s=await(b(n)?n:Promise.resolve(n));return E(r,s)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{const s=e(t),i=()=>n.addIssue({code:c.custom,...r(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(e=>!!e||(i(),!1)):!!s||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new Ee({schema:this,typeName:Re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Ce.create(this,this._def)}nullable(){return Te.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ce.create(this)}promise(){return Se.create(this,this._def)}or(e){return ue.create([this,e],this._def)}and(e){return pe.create(this,e,this._def)}transform(e){return new Ee({...C(this._def),schema:this,typeName:Re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ke({...C(this._def),innerType:this,defaultValue:t,typeName:Re.ZodDefault})}brand(){return new Oe({typeName:Re.ZodBranded,type:this,...C(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Pe({...C(this._def),innerType:this,catchValue:t,typeName:Re.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return xe.create(this,e)}readonly(){return Ne.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const k=/^c[^\s-]{8,}$/i,P=/^[0-9a-z]+$/,$=/^[0-9A-HJKMNP-TV-Z]{26}$/i,O=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,x=/^[a-z0-9_-]{21}$/i,N=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,I=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let A;const M=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,z=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,D=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,L=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,F=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,U="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",B=new RegExp(`^${U}$`);function q(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function V(e){return new RegExp(`^${q(e)}$`)}function H(e){let t=`${U}T${q(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Z(e,t){return!("v4"!==t&&t||!M.test(e))||!("v6"!==t&&t||!z.test(e))}function W(e,t){if(!N.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!("object"!=typeof s||null===s||"typ"in s&&"JWT"!==s?.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function G(e,t){return!("v4"!==t&&t||!j.test(e))||!("v6"!==t&&t||!D.test(e))}class K extends T{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==o.string){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.string,received:t.parsedType}),f}const t=new p;let r;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:c.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:c.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const n=e.data.length>s.value,i=e.data.length<s.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?h(r,{code:c.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&h(r,{code:c.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)I.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"email",code:c.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)A||(A=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),A.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"emoji",code:c.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)O.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"uuid",code:c.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)x.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"nanoid",code:c.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)k.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid",code:c.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)P.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid2",code:c.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)$.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ulid",code:c.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),h(r,{validation:"url",code:c.invalid_string,message:s.message}),t.dirty()}else"regex"===s.kind?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"regex",code:c.invalid_string,message:s.message}),t.dirty())):"trim"===s.kind?e.data=e.data.trim():"includes"===s.kind?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty()):"toLowerCase"===s.kind?e.data=e.data.toLowerCase():"toUpperCase"===s.kind?e.data=e.data.toUpperCase():"startsWith"===s.kind?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty()):"endsWith"===s.kind?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty()):"datetime"===s.kind?H(s).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:"datetime",message:s.message}),t.dirty()):"date"===s.kind?B.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:"date",message:s.message}),t.dirty()):"time"===s.kind?V(s).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:c.invalid_string,validation:"time",message:s.message}),t.dirty()):"duration"===s.kind?R.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"duration",code:c.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?Z(e.data,s.version)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ip",code:c.invalid_string,message:s.message}),t.dirty()):"jwt"===s.kind?W(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"jwt",code:c.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?G(e.data,s.version)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cidr",code:c.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?L.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"base64",code:c.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?F.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"base64url",code:c.invalid_string,message:s.message}),t.dirty()):n.assertNever(s);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:c.invalid_string,...w.errToObj(r)})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...w.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...w.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...w.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...w.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...w.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...w.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...w.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...w.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...w.errToObj(t)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new K({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function J(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}K.create=e=>new K({checks:[],typeName:Re.ZodString,coerce:e?.coerce??!1,...C(e)});class Y extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==o.number){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.number,received:t.parsedType}),f}let t;const r=new p;for(const s of this._def.checks)"int"===s.kind?n.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:c.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"multipleOf"===s.kind?0!==J(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:c.not_finite,message:s.message}),r.dirty()):n.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,r,n){return new Y({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:w.toString(n)}]})}_addCheck(e){return new Y({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Y.create=e=>new Y({checks:[],typeName:Re.ZodNumber,coerce:e?.coerce||!1,...C(e)});class X extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==o.bigint)return this._getInvalidInput(e);let t;const r=new p;for(const s of this._def.checks)"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),h(t,{code:c.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):n.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.bigint,received:t.parsedType}),f}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,r,n){return new X({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:w.toString(n)}]})}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}X.create=e=>new X({checks:[],typeName:Re.ZodBigInt,coerce:e?.coerce??!1,...C(e)});class Q extends T{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==o.boolean){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.boolean,received:t.parsedType}),f}return g(e.data)}}Q.create=e=>new Q({typeName:Re.ZodBoolean,coerce:e?.coerce||!1,...C(e)});class ee extends T{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==o.date){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.date,received:t.parsedType}),f}if(Number.isNaN(e.data.getTime()))return h(this._getOrReturnCtx(e),{code:c.invalid_date}),f;const t=new p;let r;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:c.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:c.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):n.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ee.create=e=>new ee({checks:[],coerce:e?.coerce||!1,typeName:Re.ZodDate,...C(e)});class te extends T{_parse(e){if(this._getType(e)!==o.symbol){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.symbol,received:t.parsedType}),f}return g(e.data)}}te.create=e=>new te({typeName:Re.ZodSymbol,...C(e)});class re extends T{_parse(e){if(this._getType(e)!==o.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.undefined,received:t.parsedType}),f}return g(e.data)}}re.create=e=>new re({typeName:Re.ZodUndefined,...C(e)});class ne extends T{_parse(e){if(this._getType(e)!==o.null){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.null,received:t.parsedType}),f}return g(e.data)}}ne.create=e=>new ne({typeName:Re.ZodNull,...C(e)});class se extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return g(e.data)}}se.create=e=>new se({typeName:Re.ZodAny,...C(e)});class ie extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return g(e.data)}}ie.create=e=>new ie({typeName:Re.ZodUnknown,...C(e)});class oe extends T{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.never,received:t.parsedType}),f}}oe.create=e=>new oe({typeName:Re.ZodNever,...C(e)});class ae extends T{_parse(e){if(this._getType(e)!==o.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.void,received:t.parsedType}),f}return g(e.data)}}ae.create=e=>new ae({typeName:Re.ZodVoid,...C(e)});class ce extends T{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==o.array)return h(t,{code:c.invalid_type,expected:o.array,received:t.parsedType}),f;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,s=t.data.length<n.exactLength.value;(e||s)&&(h(t,{code:e?c.too_big:c.too_small,minimum:s?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(h(t,{code:c.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(h(t,{code:c.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new S(t,e,t.path,r)))).then(e=>p.mergeArray(r,e));const s=[...t.data].map((e,r)=>n.type._parseSync(new S(t,e,t.path,r)));return p.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ce({...this._def,minLength:{value:e,message:w.toString(t)}})}max(e,t){return new ce({...this._def,maxLength:{value:e,message:w.toString(t)}})}length(e,t){return new ce({...this._def,exactLength:{value:e,message:w.toString(t)}})}nonempty(e){return this.min(1,e)}}function le(e){if(e instanceof de){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Ce.create(le(n))}return new de({...e._def,shape:()=>t})}return e instanceof ce?new ce({...e._def,type:le(e.element)}):e instanceof Ce?Ce.create(le(e.unwrap())):e instanceof Te?Te.create(le(e.unwrap())):e instanceof fe?fe.create(e.items.map(e=>le(e))):e}ce.create=(e,t)=>new ce({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Re.ZodArray,...C(t)});class de extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=n.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==o.object){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.object,received:t.parsedType}),f}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof oe&&"strip"===this._def.unknownKeys))for(const e in r.data)s.includes(e)||i.push(e);const a=[];for(const e of s){const t=n[e],s=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new S(r,s,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof oe){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(h(r,{code:c.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new S(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of a){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>p.mergeObjectSync(t,e)):p.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new de({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:w.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new de({...this._def,unknownKeys:"strip"})}passthrough(){return new de({...this._def,unknownKeys:"passthrough"})}extend(e){return new de({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new de({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Re.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new de({...this._def,catchall:e})}pick(e){const t={};for(const r of n.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new de({...this._def,shape:()=>t})}omit(e){const t={};for(const r of n.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new de({...this._def,shape:()=>t})}deepPartial(){return le(this)}partial(e){const t={};for(const r of n.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new de({...this._def,shape:()=>t})}required(e){const t={};for(const r of n.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Ce;)e=e._def.innerType;t[r]=e}return new de({...this._def,shape:()=>t})}keyof(){return _e(n.objectKeys(this.shape))}}de.create=(e,t)=>new de({shape:()=>e,unknownKeys:"strip",catchall:oe.create(),typeName:Re.ZodObject,...C(t)}),de.strictCreate=(e,t)=>new de({shape:()=>e,unknownKeys:"strict",catchall:oe.create(),typeName:Re.ZodObject,...C(t)}),de.lazycreate=(e,t)=>new de({shape:e,unknownKeys:"strip",catchall:oe.create(),typeName:Re.ZodObject,...C(t)});class ue extends T{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map(e=>new l(e.ctx.common.issues));return h(t,{code:c.invalid_union,unionErrors:r}),f});{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=n.map(e=>new l(e));return h(t,{code:c.invalid_union,unionErrors:s}),f}}get options(){return this._def.options}}function he(e,t){const r=a(e),s=a(t);if(e===t)return{valid:!0,data:e};if(r===o.object&&s===o.object){const r=n.objectKeys(t),s=n.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(const r of s){const n=he(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===o.array&&s===o.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const s=he(e[n],t[n]);if(!s.valid)return{valid:!1};r.push(s.data)}return{valid:!0,data:r}}return r===o.date&&s===o.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}ue.create=(e,t)=>new ue({options:e,typeName:Re.ZodUnion,...C(t)});class pe extends T{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(y(e)||y(n))return f;const s=he(e.value,n.value);return s.valid?((v(e)||v(n))&&t.dirty(),{status:t.value,value:s.data}):(h(r,{code:c.invalid_intersection_types}),f)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}pe.create=(e,t,r)=>new pe({left:e,right:t,typeName:Re.ZodIntersection,...C(r)});class fe extends T{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.array)return h(r,{code:c.invalid_type,expected:o.array,received:r.parsedType}),f;if(r.data.length<this._def.items.length)return h(r,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),f;!this._def.rest&&r.data.length>this._def.items.length&&(h(r,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new S(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>p.mergeArray(t,e)):p.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new fe({...this._def,rest:e})}}fe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fe({items:e,typeName:Re.ZodTuple,rest:null,...C(t)})};class me extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.map)return h(r,{code:c.invalid_type,expected:o.map,received:r.parsedType}),f;const n=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new S(r,e,r.path,[i,"key"])),value:s._parse(new S(r,t,r.path,[i,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of i){const n=await r.key,s=await r.value;if("aborted"===n.status||"aborted"===s.status)return f;"dirty"!==n.status&&"dirty"!==s.status||t.dirty(),e.set(n.value,s.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of i){const n=r.key,s=r.value;if("aborted"===n.status||"aborted"===s.status)return f;"dirty"!==n.status&&"dirty"!==s.status||t.dirty(),e.set(n.value,s.value)}return{status:t.value,value:e}}}}me.create=(e,t,r)=>new me({valueType:t,keyType:e,typeName:Re.ZodMap,...C(r)});class ge extends T{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.set)return h(r,{code:c.invalid_type,expected:o.set,received:r.parsedType}),f;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(h(r,{code:c.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(h(r,{code:c.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const s=this._def.valueType;function i(e){const r=new Set;for(const n of e){if("aborted"===n.status)return f;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map((e,t)=>s._parse(new S(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>i(e)):i(a)}min(e,t){return new ge({...this._def,minSize:{value:e,message:w.toString(t)}})}max(e,t){return new ge({...this._def,maxSize:{value:e,message:w.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ge.create=(e,t)=>new ge({valueType:e,minSize:null,maxSize:null,typeName:Re.ZodSet,...C(t)});class ye extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ye.create=(e,t)=>new ye({getter:e,typeName:Re.ZodLazy,...C(t)});class ve extends T{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:c.invalid_literal,expected:this._def.value}),f}return{status:"valid",value:e.data}}get value(){return this._def.value}}function _e(e,t){return new be({values:e,typeName:Re.ZodEnum,...C(t)})}ve.create=(e,t)=>new ve({value:e,typeName:Re.ZodLiteral,...C(t)});class be extends T{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{expected:n.joinValues(r),received:t.parsedType,code:c.invalid_type}),f}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{received:t.data,code:c.invalid_enum_value,options:r}),f}return g(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return be.create(e,{...this._def,...t})}exclude(e,t=this._def){return be.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}be.create=_e;class we extends T{_parse(e){const t=n.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==o.string&&r.parsedType!==o.number){const e=n.objectValues(t);return h(r,{expected:n.joinValues(e),received:r.parsedType,code:c.invalid_type}),f}if(this._cache||(this._cache=new Set(n.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=n.objectValues(t);return h(r,{received:r.data,code:c.invalid_enum_value,options:e}),f}return g(e.data)}get enum(){return this._def.values}}we.create=(e,t)=>new we({values:e,typeName:Re.ZodNativeEnum,...C(t)});class Se extends T{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.promise&&!1===t.common.async)return h(t,{code:c.invalid_type,expected:o.promise,received:t.parsedType}),f;const r=t.parsedType===o.promise?t.data:Promise.resolve(t.data);return g(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Se.create=(e,t)=>new Se({type:e,typeName:Re.ZodPromise,...C(t)});class Ee extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:e=>{h(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===s.type){const e=s.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return f;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?f:"dirty"===n.status||"dirty"===t.value?m(n.value):n});{if("aborted"===t.value)return f;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?f:"dirty"===n.status||"dirty"===t.value?m(n.value):n}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?f:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?f:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===s.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_(e))return f;const n=s.transform(e.value,i);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>_(e)?Promise.resolve(s.transform(e.value,i)).then(e=>({status:t.value,value:e})):f)}n.assertNever(s)}}Ee.create=(e,t,r)=>new Ee({schema:e,typeName:Re.ZodEffects,effect:t,...C(r)}),Ee.createWithPreprocess=(e,t,r)=>new Ee({schema:t,effect:{type:"preprocess",transform:e},typeName:Re.ZodEffects,...C(r)});class Ce extends T{_parse(e){return this._getType(e)===o.undefined?g(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ce.create=(e,t)=>new Ce({innerType:e,typeName:Re.ZodOptional,...C(t)});class Te extends T{_parse(e){return this._getType(e)===o.null?g(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Te.create=(e,t)=>new Te({innerType:e,typeName:Re.ZodNullable,...C(t)});class ke extends T{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===o.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ke.create=(e,t)=>new ke({innerType:e,typeName:Re.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...C(t)});class Pe extends T{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return b(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new l(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new l(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:Re.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...C(t)});class $e extends T{_parse(e){if(this._getType(e)!==o.nan){const t=this._getOrReturnCtx(e);return h(t,{code:c.invalid_type,expected:o.nan,received:t.parsedType}),f}return{status:"valid",value:e.data}}}$e.create=e=>new $e({typeName:Re.ZodNaN,...C(e)}),Symbol("zod_brand");class Oe extends T{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class xe extends T{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?f:"dirty"===e.status?(t.dirty(),m(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?f:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new xe({in:e,out:t,typeName:Re.ZodPipeline})}}class Ne extends T{_parse(e){const t=this._def.innerType._parse(e),r=e=>(_(e)&&(e.value=Object.freeze(e.value)),e);return b(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}var Re,Ie;Ne.create=(e,t)=>new Ne({innerType:e,typeName:Re.ZodReadonly,...C(t)}),de.lazycreate,(Ie=Re||(Re={})).ZodString="ZodString",Ie.ZodNumber="ZodNumber",Ie.ZodNaN="ZodNaN",Ie.ZodBigInt="ZodBigInt",Ie.ZodBoolean="ZodBoolean",Ie.ZodDate="ZodDate",Ie.ZodSymbol="ZodSymbol",Ie.ZodUndefined="ZodUndefined",Ie.ZodNull="ZodNull",Ie.ZodAny="ZodAny",Ie.ZodUnknown="ZodUnknown",Ie.ZodNever="ZodNever",Ie.ZodVoid="ZodVoid",Ie.ZodArray="ZodArray",Ie.ZodObject="ZodObject",Ie.ZodUnion="ZodUnion",Ie.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Ie.ZodIntersection="ZodIntersection",Ie.ZodTuple="ZodTuple",Ie.ZodRecord="ZodRecord",Ie.ZodMap="ZodMap",Ie.ZodSet="ZodSet",Ie.ZodFunction="ZodFunction",Ie.ZodLazy="ZodLazy",Ie.ZodLiteral="ZodLiteral",Ie.ZodEnum="ZodEnum",Ie.ZodEffects="ZodEffects",Ie.ZodNativeEnum="ZodNativeEnum",Ie.ZodOptional="ZodOptional",Ie.ZodNullable="ZodNullable",Ie.ZodDefault="ZodDefault",Ie.ZodCatch="ZodCatch",Ie.ZodPromise="ZodPromise",Ie.ZodBranded="ZodBranded",Ie.ZodPipeline="ZodPipeline",Ie.ZodReadonly="ZodReadonly",K.create,Y.create,$e.create,X.create,Q.create,ee.create,te.create,re.create,ne.create,se.create,ie.create,oe.create,ae.create,ce.create,de.create,de.strictCreate,ue.create,pe.create,fe.create,me.create,ge.create,ye.create,ve.create,be.create,we.create,Se.create,Ee.create,Ce.create,Te.create,Ee.createWithPreprocess,xe.create;var Ae=r(9803);function Me(e){return!!e._zod}function je(e,t){return Me(e)?Ae.xLC(e,t):e.safeParse(t)}function ze(e){if(!e)return;let t;if(Me(e)){const r=e;t=r._zod?.def?.shape}else t=e.shape;if(t){if("function"==typeof t)try{return t()}catch{return}return t}}Ae.q0y,Ae.mIj,r(9531),r(3549);var De=r(2876);function Le(e){return"completed"===e||"failed"===e||"cancelled"===e}function Fe(e){const t=ze(e),r=t?.method;if(!r)throw new Error("Schema is missing a method literal");const n=function(e){if(Me(e)){const t=e,r=t._zod?.def;if(r){if(void 0!==r.value)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}}const t=e._def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}const r=e.value;if(void 0!==r)return r}(r);if("string"!=typeof n)throw new Error("Schema method literal must be a string");return n}function Ue(e,t){const r=je(e,t);if(!r.success)throw r.error;return r.data}Symbol("Let zodToJsonSchema decide on which parser to use"),new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");class Be{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(De.Sq,e=>{this._oncancel(e)}),this.setNotificationHandler(De._r,e=>{this._onprogress(e)}),this.setRequestHandler(De.tC,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(De.Ql,async(e,t)=>{const r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new De.Nh(De.O4.InvalidParams,"Failed to retrieve task: Task not found");return{...r}}),this.setRequestHandler(De.oQ,async(e,t)=>{const r=async()=>{const n=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(n,t.sessionId);){if("response"===e.type||"error"===e.type){const t=e.message,r=t.id,n=this._requestResolvers.get(r);if(n)if(this._requestResolvers.delete(r),"response"===e.type)n(t);else{const e=t;n(new De.Nh(e.error.code,e.error.message,e.error.data))}else{const t="response"===e.type?"Response":"Error";this._onerror(new Error(`${t} handler missing for request ${r}`))}continue}await(this._transport?.send(e.message,{relatedRequestId:t.requestId}))}}const s=await this._taskStore.getTask(n,t.sessionId);if(!s)throw new De.Nh(De.O4.InvalidParams,`Task not found: ${n}`);if(!Le(s.status))return await this._waitForTaskUpdate(n,t.signal),await r();if(Le(s.status)){const e=await this._taskStore.getTaskResult(n,t.sessionId);return this._clearTaskQueue(n),{...e,_meta:{...e._meta,[De.EV]:{taskId:n}}}}return await r()};return await r()}),this.setRequestHandler(De.zR,async(e,t)=>{try{const{tasks:r,nextCursor:n}=await this._taskStore.listTasks(e.params?.cursor,t.sessionId);return{tasks:r,nextCursor:n,_meta:{}}}catch(e){throw new De.Nh(De.O4.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(De.gd,async(e,t)=>{try{const r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new De.Nh(De.O4.InvalidParams,`Task not found: ${e.params.taskId}`);if(Le(r.status))throw new De.Nh(De.O4.InvalidParams,`Cannot cancel task in terminal status: ${r.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);const n=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!n)throw new De.Nh(De.O4.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...n}}catch(e){if(e instanceof De.Nh)throw e;throw new De.Nh(De.O4.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;const t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,r,n,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(n,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:s,onTimeout:n})}_resetTimeout(e){const t=this._timeoutInfo.get(e);if(!t)return!1;const r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),De.Nh.fromError(De.O4.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){const t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e;const t=this.transport?.onclose;this._transport.onclose=()=>{t?.(),this._onclose()};const r=this.transport?.onerror;this._transport.onerror=e=>{r?.(e),this._onerror(e)};const n=this._transport?.onmessage;this._transport.onmessage=(e,t)=>{n?.(e,t),(0,De.ig)(e)||(0,De.LW)(e)?this._onresponse(e):(0,De.vo)(e)?this._onrequest(e,t):(0,De.lg)(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){const e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const t=De.Nh.fromError(De.O4.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(const r of e.values())r(t)}_onerror(e){this.onerror?.(e)}_onnotification(e){const t=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then(()=>t(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){const r=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,n=this._transport,s=e.params?._meta?.[De.EV]?.taskId;if(void 0===r){const t={jsonrpc:"2.0",id:e.id,error:{code:De.O4.MethodNotFound,message:"Method not found"}};return void(s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:t,timestamp:Date.now()},n?.sessionId).catch(e=>this._onerror(new Error(`Failed to enqueue error response: ${e}`))):n?.send(t).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))))}const i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i);const o=(0,De.bZ)(e.params)?e.params.task:void 0,a=this._taskStore?this.requestTaskStore(e,n?.sessionId):void 0,c={signal:i.signal,sessionId:n?.sessionId,_meta:e.params?._meta,sendNotification:async t=>{const r={relatedRequestId:e.id};s&&(r.relatedTask={taskId:s}),await this.notification(t,r)},sendRequest:async(t,r,n)=>{const i={...n,relatedRequestId:e.id};s&&!i.relatedTask&&(i.relatedTask={taskId:s});const o=i.relatedTask?.taskId??s;return o&&a&&await a.updateTaskStatus(o,"input_required"),await this.request(t,r,i)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:s,taskStore:a,taskRequestedTtl:o?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{o&&this.assertTaskHandlerCapability(e.method)}).then(()=>r(e,c)).then(async t=>{if(i.signal.aborted)return;const r={result:t,jsonrpc:"2.0",id:e.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:r,timestamp:Date.now()},n?.sessionId):await(n?.send(r))},async t=>{if(i.signal.aborted)return;const r={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:De.O4.InternalError,message:t.message??"Internal error",...void 0!==t.data&&{data:t.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:r,timestamp:Date.now()},n?.sessionId):await(n?.send(r))}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:t,...r}=e.params,n=Number(t),s=this._progressHandlers.get(n);if(!s)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const i=this._responseHandlers.get(n),o=this._timeoutInfo.get(n);if(o&&i&&o.resetTimeoutOnProgress)try{this._resetTimeout(n)}catch(e){return this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),void i(e)}s(r)}_onresponse(e){const t=Number(e.id),r=this._requestResolvers.get(t);if(r)return this._requestResolvers.delete(t),void((0,De.ig)(e)?r(e):r(new De.Nh(e.error.code,e.error.message,e.error.data)));const n=this._responseHandlers.get(t);if(void 0===n)return void this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));this._responseHandlers.delete(t),this._cleanupTimeout(t);let s=!1;if((0,De.ig)(e)&&e.result&&"object"==typeof e.result){const r=e.result;if(r.task&&"object"==typeof r.task){const e=r.task;"string"==typeof e.taskId&&(s=!0,this._taskProgressTokens.set(e.taskId,t))}}s||this._progressHandlers.delete(t),(0,De.ig)(e)?n(e):n(De.Nh.fromError(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){await(this._transport?.close())}async*requestStream(e,t,r){const{task:n}=r??{};if(!n){try{const n=await this.request(e,t,r);yield{type:"result",result:n}}catch(e){yield{type:"error",error:e instanceof De.Nh?e:new De.Nh(De.O4.InternalError,String(e))}}return}let s;try{const n=await this.request(e,De.Mg,r);if(!n.task)throw new De.Nh(De.O4.InternalError,"Task creation did not return a task");for(s=n.task.taskId,yield{type:"taskCreated",task:n.task};;){const e=await this.getTask({taskId:s},r);if(yield{type:"taskStatus",task:e},Le(e.status)){if("completed"===e.status){const e=await this.getTaskResult({taskId:s},t,r);yield{type:"result",result:e}}else"failed"===e.status?yield{type:"error",error:new De.Nh(De.O4.InternalError,`Task ${s} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new De.Nh(De.O4.InternalError,`Task ${s} was cancelled`)});return}if("input_required"===e.status){const e=await this.getTaskResult({taskId:s},t,r);return void(yield{type:"result",result:e})}const n=e.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(e=>setTimeout(e,n)),r?.signal?.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof De.Nh?e:new De.Nh(De.O4.InternalError,String(e))}}}request(e,t,r){const{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i,task:o,relatedTask:a}=r??{};return new Promise((c,l)=>{const d=e=>{l(e)};if(!this._transport)return void d(new Error("Not connected"));if(!0===this._options?.enforceStrictCapabilities)try{this.assertCapabilityForMethod(e.method),o&&this.assertTaskCapability(e.method)}catch(e){return void d(e)}r?.signal?.throwIfAborted();const u=this._requestMessageId++,h={...e,jsonrpc:"2.0",id:u};r?.onprogress&&(this._progressHandlers.set(u,r.onprogress),h.params={...e.params,_meta:{...e.params?._meta||{},progressToken:u}}),o&&(h.params={...h.params,task:o}),a&&(h.params={...h.params,_meta:{...h.params?._meta||{},[De.EV]:a}});const p=e=>{this._responseHandlers.delete(u),this._progressHandlers.delete(u),this._cleanupTimeout(u),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:u,reason:String(e)}},{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`)));const t=e instanceof De.Nh?e:new De.Nh(De.O4.RequestTimeout,String(e));l(t)};this._responseHandlers.set(u,e=>{if(!r?.signal?.aborted){if(e instanceof Error)return l(e);try{const r=je(t,e.result);r.success?c(r.data):l(r.error)}catch(e){l(e)}}}),r?.signal?.addEventListener("abort",()=>{p(r?.signal?.reason)});const f=r?.timeout??6e4;this._setupTimeout(u,f,r?.maxTotalTimeout,()=>p(De.Nh.fromError(De.O4.RequestTimeout,"Request timed out",{timeout:f})),r?.resetTimeoutOnProgress??!1);const m=a?.taskId;if(m){const e=e=>{const t=this._responseHandlers.get(u);t?t(e):this._onerror(new Error(`Response handler missing for side-channeled request ${u}`))};this._requestResolvers.set(u,e),this._enqueueTaskMessage(m,{type:"request",message:h,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(u),l(e)})}else this._transport.send(h,{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i}).catch(e=>{this._cleanupTimeout(u),l(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},De.Sc,t)}async getTaskResult(e,t,r){return this.request({method:"tasks/result",params:e},t,r)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},De.a5,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},De.gH,t)}async notification(e,t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const r=t?.relatedTask?.taskId;if(r){const n={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[De.EV]:t.relatedTask}}};return void await this._enqueueTaskMessage(r,{type:"notification",message:n,timestamp:Date.now()})}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let r={...e,jsonrpc:"2.0"};t?.relatedTask&&(r={...r,params:{...r.params,_meta:{...r.params?._meta||{},[De.EV]:t.relatedTask}}}),this._transport?.send(r,t).catch(e=>this._onerror(e))})}let n={...e,jsonrpc:"2.0"};t?.relatedTask&&(n={...n,params:{...n.params,_meta:{...n.params?._meta||{},[De.EV]:t.relatedTask}}}),await this._transport.send(n,t)}setRequestHandler(e,t){const r=Fe(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,n)=>{const s=Ue(e,r);return Promise.resolve(t(s,n))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){const r=Fe(e);this._notificationHandlers.set(r,r=>{const n=Ue(e,r);return Promise.resolve(t(n))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){const t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,r){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const n=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,r,n)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){const r=await this._taskMessageQueue.dequeueAll(e,t);for(const t of r)if("request"===t.type&&(0,De.vo)(t.message)){const r=t.message.id,n=this._requestResolvers.get(r);n?(n(new De.Nh(De.O4.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(r)):this._onerror(new Error(`Resolver missing for request ${r} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){let r=this._options?.defaultTaskPollInterval??1e3;try{const t=await(this._taskStore?.getTask(e));t?.pollInterval&&(r=t.pollInterval)}catch{}return new Promise((e,n)=>{if(t.aborted)return void n(new De.Nh(De.O4.InvalidRequest,"Request cancelled"));const s=setTimeout(e,r);t.addEventListener("abort",()=>{clearTimeout(s),n(new De.Nh(De.O4.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){const r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async n=>{if(!e)throw new Error("No request provided");return await r.createTask(n,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{const n=await r.getTask(e,t);if(!n)throw new De.Nh(De.O4.InvalidParams,"Failed to retrieve task: Task not found");return n},storeTaskResult:async(e,n,s)=>{await r.storeTaskResult(e,n,s,t);const i=await r.getTask(e,t);if(i){const t=De.ki.parse({method:"notifications/tasks/status",params:i});await this.notification(t),Le(i.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>r.getTaskResult(e,t),updateTaskStatus:async(e,n,s)=>{const i=await r.getTask(e,t);if(!i)throw new De.Nh(De.O4.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(Le(i.status))throw new De.Nh(De.O4.InvalidParams,`Cannot update task "${e}" from terminal status "${i.status}" to "${n}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(e,n,s,t);const o=await r.getTask(e,t);if(o){const t=De.ki.parse({method:"notifications/tasks/status",params:o});await this.notification(t),Le(o.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>r.listTasks(e,t)}}}function qe(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var Ve=r(647),He=r(8182);class Ze{constructor(e){this._ajv=e??function(){const e=new Ve({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return He(e),e}()}getValidator(e){const t="$id"in e&&"string"==typeof e.$id?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return e=>t(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(t.errors)}}}class We{constructor(e){this._client=e}async*callToolStream(e,t=De.TF,r){const n=this._client,s={...r,task:r?.task??(n.isToolTask(e.name)?{}:void 0)},i=n.requestStream({method:"tools/call",params:e},t,s),o=n.getToolOutputValidator(e.name);for await(const t of i){if("result"===t.type&&o){const r=t.result;if(!r.structuredContent&&!r.isError)return void(yield{type:"error",error:new De.Nh(De.O4.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)});if(r.structuredContent)try{const e=o(r.structuredContent);if(!e.valid)return void(yield{type:"error",error:new De.Nh(De.O4.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)})}catch(e){return e instanceof De.Nh?void(yield{type:"error",error:e}):void(yield{type:"error",error:new De.Nh(De.O4.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)})}}yield t}}async getTask(e,t){return this._client.getTask({taskId:e},t)}async getTaskResult(e,t,r){return this._client.getTaskResult({taskId:e},t,r)}async listTasks(e,t){return this._client.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._client.cancelTask({taskId:e},t)}requestStream(e,t,r){return this._client.requestStream(e,t,r)}}function Ge(e,t){if(e&&null!==t&&"object"==typeof t){if("object"===e.type&&e.properties&&"object"==typeof e.properties){const r=t,n=e.properties;for(const e of Object.keys(n)){const t=n[e];void 0===r[e]&&Object.prototype.hasOwnProperty.call(t,"default")&&(r[e]=t.default),void 0!==r[e]&&Ge(t,r[e])}}if(Array.isArray(e.anyOf))for(const r of e.anyOf)"boolean"!=typeof r&&Ge(r,t);if(Array.isArray(e.oneOf))for(const r of e.oneOf)"boolean"!=typeof r&&Ge(r,t)}}function Ke(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};const t=void 0!==e.form,r=void 0!==e.url;return{supportsFormMode:t||!t&&!r,supportsUrlMode:r}}class Je extends Be{constructor(e,t){super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=t?.capabilities??{},this._jsonSchemaValidator=t?.jsonSchemaValidator??new Ze,t?.listChanged&&(this._pendingListChangedConfig=t.listChanged)}_setupListChangedHandlers(e){e.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",De.fH,e.tools,async()=>(await this.listTools()).tools),e.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",De.br,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",De.hh,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new We(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){const r={...e};for(const e in t){const n=e,s=t[n];if(void 0===s)continue;const i=r[n];qe(i)&&qe(s)?r[n]={...i,...s}:r[n]=s}return r}(this._capabilities,e)}setRequestHandler(e,t){const r=ze(e),n=r?.method;if(!n)throw new Error("Schema is missing a method literal");let s;if(Me(n)){const e=n,t=e._zod?.def;s=t?.value??e.value}else{const e=n,t=e._def;s=t?.value??e.value}if("string"!=typeof s)throw new Error("Schema method literal must be a string");const i=s;if("elicitation/create"===i){const r=async(e,r)=>{const n=je(De.$9,e);if(!n.success){const e=n.error instanceof Error?n.error.message:String(n.error);throw new De.Nh(De.O4.InvalidParams,`Invalid elicitation request: ${e}`)}const{params:s}=n.data;s.mode=s.mode??"form";const{supportsFormMode:i,supportsUrlMode:o}=Ke(this._capabilities.elicitation);if("form"===s.mode&&!i)throw new De.Nh(De.O4.InvalidParams,"Client does not support form-mode elicitation requests");if("url"===s.mode&&!o)throw new De.Nh(De.O4.InvalidParams,"Client does not support URL-mode elicitation requests");const a=await Promise.resolve(t(e,r));if(s.task){const e=je(De.Mg,a);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new De.Nh(De.O4.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const c=je(De.n_,a);if(!c.success){const e=c.error instanceof Error?c.error.message:String(c.error);throw new De.Nh(De.O4.InvalidParams,`Invalid elicitation result: ${e}`)}const l=c.data,d="form"===s.mode?s.requestedSchema:void 0;if("form"===s.mode&&"accept"===l.action&&l.content&&d&&this._capabilities.elicitation?.form?.applyDefaults)try{Ge(d,l.content)}catch{}return l};return super.setRequestHandler(e,r)}if("sampling/createMessage"===i){const r=async(e,r)=>{const n=je(De.u9,e);if(!n.success){const e=n.error instanceof Error?n.error.message:String(n.error);throw new De.Nh(De.O4.InvalidParams,`Invalid sampling request: ${e}`)}const{params:s}=n.data,i=await Promise.resolve(t(e,r));if(s.task){const e=je(De.Mg,i);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new De.Nh(De.O4.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const o=je(De.K1,i);if(!o.success){const e=o.error instanceof Error?o.error.message:String(o.error);throw new De.Nh(De.O4.InvalidParams,`Invalid sampling result: ${e}`)}return o.data};return super.setRequestHandler(e,r)}return super.setRequestHandler(e,t)}assertCapability(e,t){if(!this._serverCapabilities?.[e])throw new Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{const r=await this.request({method:"initialize",params:{protocolVersion:De.aE,capabilities:this._capabilities,clientInfo:this._clientInfo}},De.Rk,t);if(void 0===r)throw new Error(`Server sent invalid initialize result: ${r}`);if(!De.Iu.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){switch(e){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw new Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){if("notifications/roots/list_changed"===e&&!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){!function(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);if("tools/call"===t&&!e.tools?.call)throw new Error(`${r} does not support task creation for tools/call (required for ${t})`)}(this._serverCapabilities?.tasks?.requests,e,"Server")}assertTaskHandlerCapability(e){this._capabilities&&function(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${r} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${r} does not support task creation for elicitation/create (required for ${t})`)}}(this._capabilities.tasks?.requests,e,"Client")}async ping(e){return this.request({method:"ping"},De.wR,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},De.GU,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},De.wR,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},De.HM,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},De.Yu,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},De.cv,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},De.O$,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},De.ve,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},De.wR,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},De.wR,t)}async callTool(e,t=De.TF,r){if(this.isToolTaskRequired(e.name))throw new De.Nh(De.O4.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const n=await this.request({method:"tools/call",params:e},t,r),s=this.getToolOutputValidator(e.name);if(s){if(!n.structuredContent&&!n.isError)throw new De.Nh(De.O4.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(n.structuredContent)try{const e=s(n.structuredContent);if(!e.valid)throw new De.Nh(De.O4.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)}catch(e){if(e instanceof De.Nh)throw e;throw new De.Nh(De.O4.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return n}isToolTask(e){return!!this._serverCapabilities?.tasks?.requests?.tools?.call&&this._cachedKnownTaskTools.has(e)}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const t of e){if(t.outputSchema){const e=this._jsonSchemaValidator.getValidator(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}const e=t.execution?.taskSupport;"required"!==e&&"optional"!==e||this._cachedKnownTaskTools.add(t.name),"required"===e&&this._cachedRequiredTaskTools.add(t.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){const r=await this.request({method:"tools/list",params:e},De.WT,t);return this.cacheToolMetadata(r.tools),r}_setupListChangedHandler(e,t,r,n){const s=De.xI.safeParse(r);if(!s.success)throw new Error(`Invalid ${e} listChanged options: ${s.error.message}`);if("function"!=typeof r.onChanged)throw new Error(`Invalid ${e} listChanged options: onChanged must be a function`);const{autoRefresh:i,debounceMs:o}=s.data,{onChanged:a}=r,c=async()=>{if(i)try{const e=await n();a(null,e)}catch(e){const t=e instanceof Error?e:new Error(String(e));a(t,null)}else a(null,null)};this.setNotificationHandler(t,()=>{if(o){const t=this._listChangedDebounceTimers.get(e);t&&clearTimeout(t);const r=setTimeout(c,o);this._listChangedDebounceTimers.set(e,r)}else c()})}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}},3956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;const n=r(131),s=r(267);class i{constructor(e,t){this.callback=e,this.initialDelay=1e3,this.multiplier=1.6,this.maxDelay=12e4,this.jitter=.2,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,this.id=i.getNextId(),t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(e){s.trace(n.LogVerbosity.DEBUG,"backoff","{"+this.id+"} "+e)}runTimer(e){var t,r;this.trace("runTimer(delay="+e+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.trace("timer fired"),this.running=!1,this.callback()},e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.trace("runOnce()"),this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;var r,n;this.nextDelay=e+(r=-t,n=t,Math.random()*(n-r)+r)}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=!1}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){const e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=i,i.nextId=0},4018:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(i,o),time:r(c(!0),l),"date-time":r(h(!0),p),"iso-time":r(c(),d),"iso-date-time":r(h(),f),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&g.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return y.lastIndex=0,y.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=_&&e>=v}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:b},double:{type:"number",validate:b},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),"iso-time":r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),"iso-date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){const t=n.exec(e);if(!t)return!1;const r=+t[1],i=+t[2],o=+t[3];return i>=1&&i<=12&&o>=1&&o<=(2===i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[i])}function o(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(e){return function(t){const r=a.exec(t);if(!r)return!1;const n=+r[1],s=+r[2],i=+r[3],o=r[4],c="-"===r[5]?-1:1,l=+(r[6]||0),d=+(r[7]||0);if(l>23||d>59||e&&!o)return!1;if(n<=23&&s<=59&&i<60)return!0;const u=s-d*c,h=n-l*c-(u<0?1:0);return(23===h||-1===h)&&(59===u||-1===u)&&i<61}}function l(e,t){if(!e||!t)return;const r=new Date("2020-01-01T"+e).valueOf(),n=new Date("2020-01-01T"+t).valueOf();return r&&n?r-n:void 0}function d(e,t){if(!e||!t)return;const r=a.exec(e),n=a.exec(t);return r&&n?(e=r[1]+r[2]+r[3])>(t=n[1]+n[2]+n[3])?1:e<t?-1:0:void 0}const u=/t|\s/i;function h(e){const t=c(e);return function(e){const r=e.split(u);return 2===r.length&&i(r[0])&&t(r[1])}}function p(e,t){if(!e||!t)return;const r=new Date(e).valueOf(),n=new Date(t).valueOf();return r&&n?r-n:void 0}function f(e,t){if(!e||!t)return;const[r,n]=e.split(u),[s,i]=t.split(u),a=o(r,s);return void 0!==a?a||l(n,i):void 0}const m=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,v=-(2**31),_=2**31-1;function b(){return!0}const w=/[^\\]\\Z/},4026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:s,$data:i,schema:o,schemaCode:a,it:c}=e,{opts:l,errSchemaPath:d,schemaEnv:u,self:h}=c;l.validateFormats&&(i?function(){const i=r.scopeValue("formats",{ref:h.formats,code:l.code.formats}),o=r.const("fDef",n._`${i}[${a}]`),c=r.let("fType"),d=r.let("format");r.if(n._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,()=>r.assign(c,n._`${o}.type || "string"`).assign(d,n._`${o}.validate`),()=>r.assign(c,n._`"string"`).assign(d,o)),e.fail$data((0,n.or)(!1===l.strictSchema?n.nil:n._`${a} && !${d}`,function(){const e=u.$async?n._`(${o}.async ? await ${d}(${s}) : ${d}(${s}))`:n._`${d}(${s})`,r=n._`(typeof ${d} == "function" ? ${e} : ${d}.test(${s}))`;return n._`${d} && ${d} !== true && ${c} === ${t} && !${r}`}()))}():function(){const i=h.formats[o];if(!i)return void function(){if(!1!==l.strictSchema)throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${d}"`}h.logger.warn(e())}();if(!0===i)return;const[a,c,p]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):l.code.formats?n._`${l.code.formats}${(0,n.getProperty)(o)}`:void 0,s=r.scopeValue("formats",{key:o,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,n._`${s}.validate`]}(i);a===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!u.$async)throw new Error("async format in sync schema");return n._`await ${p}(${s})`}return"function"==typeof c?n._`${p}(${s})`:n._`${p}.test(${s})`}())}())}};t.default=s},4056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeClientConstructor=o,t.loadPackageDefinition=function(e){const t={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],s=r.split(".");if(s.some(e=>i(e)))continue;const c=s[s.length-1];let l=t;for(const e of s.slice(0,-1))l[e]||(l[e]={}),l=l[e];a(n)?l[c]=n:l[c]=o(n,c,{})}return t};const n=r(5563),s={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function i(e){return["__proto__","prototype","constructor"].includes(e)}function o(e,t,r){r||(r={});class o extends n.Client{}return Object.keys(e).forEach(t=>{if(i(t))return;const r=e[t];let n;if("string"==typeof t&&"$"===t.charAt(0))throw new Error("Method names cannot start with $");n=r.requestStream?r.responseStream?"bidi":"client_stream":r.responseStream?"server_stream":"unary";const a=r.requestSerialize,c=r.responseDeserialize,l=function(e,t,r,n){return function(...s){return e.call(this,t,r,n,...s)}}(s[n],r.path,a,c);o.prototype[t]=l,Object.assign(o.prototype[t],r),r.originalName&&!i(r.originalName)&&(o.prototype[r.originalName]=o.prototype[t])}),o.service=e,o.serviceName=t,o}function a(e){return"format"in e}},4076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,a=t.let("res"),c=o?n._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:n._`${a} !== parseInt(${a})`;e.fail$data(n._`(${s} === 0 || (${a} = ${r}/${s}, ${c}))`)}};t.default=s},4097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const n=r(267),s=r(131),i=r(9752),o=/^[:0-9a-z_.-]+$/,a=/^[ -~]*$/;function c(e){return e.endsWith("-bin")}function l(e){return!e.startsWith("grpc-")}function d(e){return e.toLowerCase()}function u(e,t){if(!function(e){return o.test(e)}(e))throw new Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!function(e){return a.test(e)}(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}class h{constructor(e={}){this.internalRepr=new Map,this.opaqueData=new Map,this.options=e}set(e,t){u(e=d(e),t),this.internalRepr.set(e,[t])}add(e,t){u(e=d(e),t);const r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=d(e),this.internalRepr.delete(e)}get(e){return e=d(e),this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,r]of this.internalRepr)if(r.length>0){const n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){const e=new h(this.options),t=e.internalRepr;for(const[e,r]of this.internalRepr){const n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(const[t,r]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,r]of this.internalRepr)t.startsWith(":")||(e[t]=r.map(p));return e}toJSON(){const e={};for(const[t,r]of this.internalRepr)e[t]=r;return e}setOpaque(e,t){this.opaqueData.set(e,t)}getOpaque(e){return this.opaqueData.get(e)}static fromHttp2Headers(e){const t=new h;for(const r of Object.keys(e)){if(":"===r.charAt(0))continue;const o=e[r];try{c(r)?Array.isArray(o)?o.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==o&&(l(r)?o.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(o,"base64"))):Array.isArray(o)?o.forEach(e=>{t.add(r,e)}):void 0!==o&&t.add(r,o)}catch(e){const t=`Failed to add metadata entry ${r}: ${o}. ${(0,i.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(s.LogVerbosity.ERROR,t)}}return t}}t.Metadata=h;const p=e=>Buffer.isBuffer(e)?e.toString("base64"):e},4117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeightedRoundRobinLoadBalancingConfig=void 0,t.setup=function(){(0,o.registerLoadBalancerType)(f,_,y)};const n=r(463),s=r(131),i=r(4700),o=r(8923),a=r(6486),c=r(267),l=r(2921),d=r(178),u=r(222),h=r(8996);function p(e){c.trace(s.LogVerbosity.DEBUG,"weighted_round_robin",e)}const f="weighted_round_robin";function m(e,t,r){if(t in e&&void 0!==e[t]&&typeof e[t]!==r)throw new Error(`weighted round robin config ${t} parse error: expected ${r}, got ${typeof e[t]}`)}function g(e,t){if(t in e&&void 0!==e[t]&&null!==e[t]){let r;if((0,i.isDuration)(e[t]))r=e[t];else if((0,i.isDurationMessage)(e[t]))r=(0,i.durationMessageToDuration)(e[t]);else{if("string"!=typeof e[t])throw new Error(`weighted round robin config ${t}: expected duration, got ${typeof e[t]}`);{const n=(0,i.parseDuration)(e[t]);if(!n)throw new Error(`weighted round robin config ${t}: failed to parse duration string ${e[t]}`);r=n}}return(0,i.durationToMs)(r)}return null}class y{constructor(e,t,r,n,s,i){this.enableOobLoadReport=null!=e&&e,this.oobLoadReportingPeriodMs=null!=t?t:1e4,this.blackoutPeriodMs=null!=r?r:1e4,this.weightExpirationPeriodMs=null!=n?n:18e4,this.weightUpdatePeriodMs=Math.max(null!=s?s:1e3,100),this.errorUtilizationPenalty=null!=i?i:1}getLoadBalancerName(){return f}toJsonObject(){return{enable_oob_load_report:this.enableOobLoadReport,oob_load_reporting_period:(0,i.durationToString)((0,i.msToDuration)(this.oobLoadReportingPeriodMs)),blackout_period:(0,i.durationToString)((0,i.msToDuration)(this.blackoutPeriodMs)),weight_expiration_period:(0,i.durationToString)((0,i.msToDuration)(this.weightExpirationPeriodMs)),weight_update_period:(0,i.durationToString)((0,i.msToDuration)(this.weightUpdatePeriodMs)),error_utilization_penalty:this.errorUtilizationPenalty}}static createFromJson(e){if(m(e,"enable_oob_load_report","boolean"),m(e,"error_utilization_penalty","number"),e.error_utilization_penalty<0)throw new Error("weighted round robin config error_utilization_penalty < 0");return new y(e.enable_oob_load_report,g(e,"oob_load_reporting_period"),g(e,"blackout_period"),g(e,"weight_expiration_period"),g(e,"weight_update_period"),e.error_utilization_penalty)}getEnableOobLoadReport(){return this.enableOobLoadReport}getOobLoadReportingPeriodMs(){return this.oobLoadReportingPeriodMs}getBlackoutPeriodMs(){return this.blackoutPeriodMs}getWeightExpirationPeriodMs(){return this.weightExpirationPeriodMs}getWeightUpdatePeriodMs(){return this.weightUpdatePeriodMs}getErrorUtilizationPenalty(){return this.errorUtilizationPenalty}}t.WeightedRoundRobinLoadBalancingConfig=y;class v{constructor(e,t){this.metricsHandler=t,this.queue=new u.PriorityQueue((e,t)=>e.deadline<t.deadline);const r=e.filter(e=>e.weight>0);let n;if(r.length<2)n=1;else{let e=0;for(const{weight:t}of r)e+=t;n=e/r.length}for(const t of e){const e=t.weight>0?1/t.weight:n;this.queue.push({endpointName:t.endpointName,picker:t.picker,period:e,deadline:Math.random()*e})}}pick(e){const t=this.queue.pop();this.queue.push(Object.assign(Object.assign({},t),{deadline:t.deadline+t.period}));const r=t.picker.pick(e);if(r.pickResultType===d.PickResultType.COMPLETE){if(this.metricsHandler)return Object.assign(Object.assign({},r),{onCallEnded:(0,l.createMetricsReader)(e=>this.metricsHandler(e,t.endpointName),r.onCallEnded)});{const e=r.subchannel;return Object.assign(Object.assign({},r),{subchannel:e.getWrappedSubchannel()})}}return r}}class _{constructor(e){this.channelControlHelper=e,this.latestConfig=null,this.children=new Map,this.currentState=n.ConnectivityState.IDLE,this.updatesPaused=!1,this.lastError=null,this.weightUpdateTimer=null}countChildrenWithState(e){let t=0;for(const r of this.children.values())r.child.getConnectivityState()===e&&(t+=1);return t}updateWeight(e,t){var r,n;const s=t.rps_fractional;let i=t.application_utilization;i>0&&s>0&&(i+=t.eps/s*(null!==(n=null===(r=this.latestConfig)||void 0===r?void 0:r.getErrorUtilizationPenalty())&&void 0!==n?n:0));const o=0===i?0:s/i;if(0===o)return;const a=new Date;null===e.nonEmptySince&&(e.nonEmptySince=a),e.lastUpdated=a,e.weight=o}getWeight(e){if(!this.latestConfig)return 0;const t=(new Date).getTime();if(t-e.lastUpdated.getTime()>=this.latestConfig.getWeightExpirationPeriodMs())return e.nonEmptySince=null,0;const r=this.latestConfig.getBlackoutPeriodMs();return r>0&&(null===e.nonEmptySince||t-e.nonEmptySince.getTime()<r)?0:e.weight}calculateAndUpdateState(){if(!this.updatesPaused&&this.latestConfig){if(this.countChildrenWithState(n.ConnectivityState.READY)>0){const e=[];for(const[t,r]of this.children)r.child.getConnectivityState()===n.ConnectivityState.READY&&e.push({endpointName:t,picker:r.child.getPicker(),weight:this.getWeight(r)});let t;p("Created picker with weights: "+e.map(e=>e.endpointName+":"+e.weight).join(",")),t=this.latestConfig.getEnableOobLoadReport()?null:(e,t)=>{const r=this.children.get(t);r&&this.updateWeight(r,e)},this.updateState(n.ConnectivityState.READY,new v(e,t),null)}else if(this.countChildrenWithState(n.ConnectivityState.CONNECTING)>0)this.updateState(n.ConnectivityState.CONNECTING,new d.QueuePicker(this),null);else if(this.countChildrenWithState(n.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`weighted_round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker({details:e}),e)}else this.updateState(n.ConnectivityState.IDLE,new d.QueuePicker(this),null);for(const{child:e}of this.children.values())e.getConnectivityState()===n.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,t,r){p(n.ConnectivityState[this.currentState]+" -> "+n.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t,r)}updateAddressList(e,t,r,s){var i,c;if(!(t instanceof y))return!1;if(!e.ok)return 0===this.children.size&&this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker(e.error),e.error.details),!0;if(0===e.value.length){const e=`No addresses resolved. Resolution note: ${s}`;return this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker({details:e}),e),!1}p("Connect to endpoint list "+e.value.map(h.endpointToString));const u=new Date,f=new Set;this.updatesPaused=!0,this.latestConfig=t;for(const i of e.value){const e=(0,h.endpointToString)(i);f.add(e);let c=this.children.get(e);c||(c={child:new a.LeafLoadBalancer(i,(0,o.createChildChannelControlHelper)(this.channelControlHelper,{updateState:(e,t,r)=>{this.currentState===n.ConnectivityState.READY&&e!==n.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),e===n.ConnectivityState.READY&&(c.nonEmptySince=null),r&&(this.lastError=r),this.calculateAndUpdateState()},createSubchannel:(e,t)=>{const r=this.channelControlHelper.createSubchannel(e,t);return(null==c?void 0:c.oobMetricsListener)?new l.OrcaOobMetricsSubchannelWrapper(r,c.oobMetricsListener,this.latestConfig.getOobLoadReportingPeriodMs()):r}}),r,s),lastUpdated:u,nonEmptySince:null,weight:0,oobMetricsListener:null},this.children.set(e,c)),t.getEnableOobLoadReport()?c.oobMetricsListener=e=>{this.updateWeight(c,e)}:c.oobMetricsListener=null}for(const[e,t]of this.children)f.has(e)?t.child.startConnecting():(t.child.destroy(),this.children.delete(e));return this.updatesPaused=!1,this.calculateAndUpdateState(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer),this.weightUpdateTimer=null===(c=(i=setInterval(()=>{this.currentState===n.ConnectivityState.READY&&this.calculateAndUpdateState()},t.getWeightUpdatePeriodMs())).unref)||void 0===c?void 0:c.call(i),!0}exitIdle(){}resetBackoff(){}destroy(){for(const e of this.children.values())e.child.destroy();this.children.clear(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer)}getTypeName(){return f}}},4153:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},4176:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&(0,s.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const a=o(i,"then"),c=o(i,"else");if(!a&&!c)return;const l=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),a&&c){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(d,u("then",r),u("else",r))}else a?t.if(d,u("then")):t.if((0,n.not)(d),u("else"));function u(r,s){return()=>{const i=e.subschema({keyword:r},d);t.assign(l,d),e.mergeValidEvaluated(i,l),s?t.assign(s,n._`${r}`):e.setParams({ifClause:r})}}e.pass(l,()=>e.error(!0))}};function o(e,t){const r=e.schema[t];return void 0!==r&&!(0,s.alwaysValidSchema)(e,r)}t.default=i},4267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1085),s=r(3789),i=r(7083),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:o,data:a,$data:c,it:l}=e,{opts:d}=l;if(!c&&0===r.length)return;const u=r.length>=d.loopRequired;if(l.allErrors?function(){if(u||c)e.block$data(s.nil,h);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const i=t.let("missing");if(u||c){const r=t.let("valid",!0);e.block$data(r,()=>function(r,i){e.setParams({missingProperty:r}),t.forOf(r,o,()=>{t.assign(i,(0,n.propertyInData)(t,a,r,d.ownProperties)),t.if((0,s.not)(i),()=>{e.error(),t.break()})},s.nil)}(i,r)),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,i)),(0,n.reportMissingProp)(e,i),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${l.schemaEnv.baseId+l.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(l,t,l.opts.strictRequired)}}function h(){t.forOf("prop",o,r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,a,r,d.ownProperties),()=>e.error())})}}};t.default=o},4358:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},4362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(6596),s=r(9048),i=r(1980);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const s=1===t?"property":"properties";return n.str`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>n._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);a(e,t),c(e,r)}};function a(e,t=e.schema){const{gen:r,data:s,it:o}=e;if(0===Object.keys(t).length)return;const a=r.let("missing");for(const c in t){const l=t[c];if(0===l.length)continue;const d=(0,i.propertyInData)(r,s,c,o.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),o.allErrors?r.if(d,()=>{for(const t of l)(0,i.checkReportMissingProp)(e,t)}):(r.if(n._`${d} && (${(0,i.checkMissingProp)(e,l,a)})`),(0,i.reportMissingProp)(e,a),r.else())}}function c(e,t=e.schema){const{gen:r,data:n,keyword:o,it:a}=e,c=r.name("valid");for(const l in t)(0,s.alwaysValidSchema)(a,t[l])||(r.if((0,i.propertyInData)(r,n,l,a.opts.ownProperties),()=>{const t=e.subschema({keyword:o,schemaProp:l},c);e.mergeValidEvaluated(t,c)},()=>r.var(c,!0)),e.ok(c))}t.validatePropertyDeps=a,t.validateSchemaDeps=c,t.default=o},4368:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1980),s=r(6596),i=r(9048),o=r(9048),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:c,it:l}=e,{opts:d}=l,u=(0,n.allSchemaProperties)(r),h=u.filter(e=>(0,i.alwaysValidSchema)(l,r[e]));if(0===u.length||h.length===u.length&&(!l.opts.unevaluated||!0===l.props))return;const p=d.strictSchema&&!d.allowMatchingProperties&&c.properties,f=t.name("valid");!0===l.props||l.props instanceof s.Name||(l.props=(0,o.evaluatedPropsToName)(t,l.props));const{props:m}=l;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,i.checkStrictMode)(l,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(r){t.forIn("key",a,i=>{t.if(s._`${(0,n.usePattern)(e,r)}.test(${i})`,()=>{const n=h.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:o.Type.Str},f),l.opts.unevaluated&&!0!==m?t.assign(s._`${m}[${i}]`,!0):n||l.allErrors||t.if((0,s.not)(f),()=>t.break())})})}!function(){for(const e of u)p&&g(e),l.allErrors?y(e):(t.var(f,!0),y(e),t.if(f))}()}};t.default=a},4394:(e,t,r)=>{"use strict";var n=t;function s(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(3449),n.BufferWriter=r(818),n.Reader=r(6237),n.BufferReader=r(3158),n.util=r(3610),n.rpc=r(5047),n.roots=r(4529),n.configure=s,s()},4434:e=>{"use strict";e.exports=require("events")},4442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function s(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}s.prototype.__isLong__,Object.defineProperty(s.prototype,"__isLong__",{value:!0}),s.isLong=i;var a={},c={};function l(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=c[e])?n:(r=u(e,0,!0),s&&(c[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(r=u(e,e<0?-1:0,!1),s&&(a[e]=r),r)}function d(e,t){if(isNaN(e))return t?b:_;if(t){if(e<0)return b;if(e>=g)return T}else{if(e<=-y)return k;if(e+1>=y)return C}return e<0?d(-e,t).neg():u(e%m|0,e/m|0,t)}function u(e,t,r){return new s(e,t,r)}s.fromInt=l,s.fromNumber=d,s.fromBits=u;var h=Math.pow;function p(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?b:_;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return p(e.substring(1),t,r).neg();for(var s=d(h(r,8)),i=_,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),r);if(a<8){var l=d(h(r,a));i=i.mul(l).add(d(c))}else i=(i=i.mul(s)).add(d(c))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?d(e,t):"string"==typeof e?p(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}s.fromString=p,s.fromValue=f;var m=4294967296,g=m*m,y=g/2,v=l(1<<24),_=l(0);s.ZERO=_;var b=l(0,!0);s.UZERO=b;var w=l(1);s.ONE=w;var S=l(1,!0);s.UONE=S;var E=l(-1);s.NEG_ONE=E;var C=u(-1,2147483647,!1);s.MAX_VALUE=C;var T=u(-1,-1,!0);s.MAX_UNSIGNED_VALUE=T;var k=u(0,-2147483648,!1);s.MIN_VALUE=k;var P=s.prototype;P.toInt=function(){return this.unsigned?this.low>>>0:this.low},P.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},P.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=d(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=d(h(e,6),this.unsigned),i=this,o="";;){var a=i.div(s),c=(i.sub(a.mul(s)).toInt()>>>0).toString(e);if((i=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},P.getHighBits=function(){return this.high},P.getHighBitsUnsigned=function(){return this.high>>>0},P.getLowBits=function(){return this.low},P.getLowBitsUnsigned=function(){return this.low>>>0},P.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},P.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},P.isZero=function(){return 0===this.high&&0===this.low},P.eqz=P.isZero,P.isNegative=function(){return!this.unsigned&&this.high<0},P.isPositive=function(){return this.unsigned||this.high>=0},P.isOdd=function(){return!(1&~this.low)},P.isEven=function(){return!(1&this.low)},P.equals=function(e){return i(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},P.eq=P.equals,P.notEquals=function(e){return!this.eq(e)},P.neq=P.notEquals,P.ne=P.notEquals,P.lessThan=function(e){return this.comp(e)<0},P.lt=P.lessThan,P.lessThanOrEqual=function(e){return this.comp(e)<=0},P.lte=P.lessThanOrEqual,P.le=P.lessThanOrEqual,P.greaterThan=function(e){return this.comp(e)>0},P.gt=P.greaterThan,P.greaterThanOrEqual=function(e){return this.comp(e)>=0},P.gte=P.greaterThanOrEqual,P.ge=P.greaterThanOrEqual,P.compare=function(e){if(i(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},P.comp=P.compare,P.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(w)},P.neg=P.negate,P.add=function(e){i(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,d=0,h=0,p=0;return h+=(p+=s+(65535&e.low))>>>16,d+=(h+=n+c)>>>16,l+=(d+=r+a)>>>16,l+=t+o,u((h&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},P.subtract=function(e){return i(e)||(e=f(e)),this.add(e.neg())},P.sub=P.subtract,P.multiply=function(e){if(this.isZero())return this;if(i(e)||(e=f(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return this.unsigned?b:_;if(this.eq(k))return e.isOdd()?k:_;if(e.eq(k))return this.isOdd()?k:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return d(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,a=e.high>>>16,c=65535&e.high,l=e.low>>>16,h=65535&e.low,p=0,m=0,g=0,y=0;return g+=(y+=o*h)>>>16,m+=(g+=s*h)>>>16,g&=65535,m+=(g+=o*l)>>>16,p+=(m+=r*h)>>>16,m&=65535,p+=(m+=s*l)>>>16,m&=65535,p+=(m+=o*c)>>>16,p+=t*h+r*l+s*c+o*a,u((g&=65535)<<16|(y&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},P.mul=P.multiply,P.divide=function(e){if(i(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:_;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return S;s=b}else{if(this.eq(k))return e.eq(w)||e.eq(E)?k:e.eq(k)?w:(t=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?w:E:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(k))return this.unsigned?b:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=_}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:h(2,o-48),c=d(t),l=c.mul(e);l.isNegative()||l.gt(r);)l=(c=d(t-=a,this.unsigned)).mul(e);c.isZero()&&(c=w),s=s.add(c),r=r.sub(l)}return s},P.div=P.divide,P.modulo=function(e){return i(e)||(e=f(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},P.mod=P.modulo,P.rem=P.modulo,P.not=function(){return u(~this.low,~this.high,this.unsigned)},P.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},P.clz=P.countLeadingZeros,P.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},P.ctz=P.countTrailingZeros,P.and=function(e){return i(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},P.or=function(e){return i(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},P.xor=function(e){return i(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},P.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},P.shl=P.shiftLeft,P.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},P.shr=P.shiftRight,P.shiftRightUnsigned=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},P.shru=P.shiftRightUnsigned,P.shr_u=P.shiftRightUnsigned,P.rotateLeft=function(e){var t;return i(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},P.rotl=P.rotateLeft,P.rotateRight=function(e){var t;return i(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},P.rotr=P.rotateRight,P.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},P.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},P.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},P.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},P.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},s.fromBytes=function(e,t,r){return r?s.fromBytesLE(e,t):s.fromBytesBE(e,t)},s.fromBytesLE=function(e,t){return new s(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},s.fromBytesBE=function(e,t){return new s(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(s.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},s.fromValue=function(e,t){return"bigint"==typeof e?s.fromBigInt(e,t):f(e,t)},P.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e});const $=s},4483:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=`"${e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1")}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},4529:e=>{"use strict";e.exports={}},4560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1980),s=r(6596),i=r(9048),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:o,data:a,$data:c,it:l}=e,{opts:d}=l;if(!c&&0===r.length)return;const u=r.length>=d.loopRequired;if(l.allErrors?function(){if(u||c)e.block$data(s.nil,h);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const i=t.let("missing");if(u||c){const r=t.let("valid",!0);e.block$data(r,()=>function(r,i){e.setParams({missingProperty:r}),t.forOf(r,o,()=>{t.assign(i,(0,n.propertyInData)(t,a,r,d.ownProperties)),t.if((0,s.not)(i),()=>{e.error(),t.break()})},s.nil)}(i,r)),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,i)),(0,n.reportMissingProp)(e,i),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${l.schemaEnv.baseId+l.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(l,t,l.opts.strictRequired)}}function h(){t.forOf("prop",o,r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,a,r,d.ownProperties),()=>e.error())})}}};t.default=o},4700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.durationMessageToDuration=function(e){return{seconds:Number.parseInt(e.seconds),nanos:e.nanos}},t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos},t.isDurationMessage=function(e){return"string"==typeof e.seconds&&"number"==typeof e.nanos},t.parseDuration=function(e){const t=e.match(r);return t?{seconds:Number.parseInt(t[1],10),nanos:t[2]?Number.parseInt(t[2].padEnd(9,"0"),10):0}:null},t.durationToString=function(e){if(0===e.nanos)return`${e.seconds}s`;let t;return t=e.nanos%1e6==0?1e6:e.nanos%1e3==0?1e3:1,`${e.seconds}.${e.nanos/t}s`};const r=/^(\d+)(?:\.(\d+))?s$/},4715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i=r(2482),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:o,schema:a,schemaCode:c,it:l}=e;if(!o&&0===a.length)throw new Error("enum must have non-empty array");const d=a.length>=l.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,s.useFunc)(t,i.default);let p;if(d||o)p=t.let("valid"),e.block$data(p,function(){t.assign(p,!1),t.forOf("v",c,e=>t.if(n._`${h()}(${r}, ${e})`,()=>t.assign(p,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",c);p=(0,n.or)(...a.map((t,s)=>function(e,t){const s=a[t];return"object"==typeof s&&null!==s?n._`${h()}(${r}, ${e}[${t}])`:n._`${r} === ${s}`}(e,s)))}e.pass(p)}};t.default=o},4756:e=>{"use strict";e.exports=require("tls")},4824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(344),s=r(2348),i=r(2610),o=r(2884),a=r(3929),c=[n.default,s.default,(0,i.default)(),o.default,a.metadataVocabulary,a.contentVocabulary];t.default=c},4834:e=>{"use strict";const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),r=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),48!==r){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const s=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(e){return e.length=0,!0}function o(e,t,r){if(e.length){const s=n(e);if(""===s)return r.error=!0,!1;t.push(s),e.length=0}return!0}function a(e){if(function(e){let t=0;for(let r=0;r<e.length;r++)":"===e[r]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},s=[],a=[];let c=!1,l=!1,d=o;for(let n=0;n<e.length;n++){const o=e[n];if("["!==o&&"]"!==o)if(":"!==o)if("%"===o){if(!d(a,s,r))break;d=i}else a.push(o);else{if(!0===c&&(l=!0),!d(a,s,r))break;if(++t>7){r.error=!0;break}n>0&&":"===e[n-1]&&(c=!0),s.push(":")}}return a.length&&(d===i?r.zone=a.join(""):l?s.push(a.join("")):s.push(n(a))),r.address=s.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:r}}}e.exports={nonSimpleDomain:s,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let n=unescape(e.host);if(!r(n)){const t=a(n);n=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(n)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=e;const r=[];let n=-1,s=0;for(;s=t.length;){if(1===s){if("."===t)break;if("/"===t){r.push("/");break}r.push(t);break}if(2===s){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){r.push("/");break}}else if(3===s&&"/.."===t){0!==r.length&&r.pop(),r.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==r.length&&r.pop();continue}}if(-1===(n=t.indexOf("/",1))){r.push(t);break}r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")},isIPv4:r,isUUID:t,normalizeIPv6:a,stringArrayToHexStripped:n}},4863:(e,t,r)=>{"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var n=r(527),s=r(5330),i=r(7882),o=r(1344),a=r(8252),c=r(1457),l=r(5643),d=r(9687),u=r(8811),h=r(7209),p=r(361),f=r(3262),m=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,_=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,E=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function C(e,t,r){t instanceof s||(r=t,t=new s),r||(r=C.defaults);var T,k,P,$,O=r.preferTrailingComment||!1,x=n(e,r.alternateCommentMode||!1),N=x.next,R=x.push,I=x.peek,A=x.skip,M=x.cmnt,j=!0,z="proto2",D=t,L=[],F={},U=r.keepCase?function(e){return e}:f.camelCase;function B(e,t,r){var n=C.filename;return r||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+x.line+")")}function q(){var e,t=[];do{if('"'!==(e=N())&&"'"!==e)throw B(e);t.push(N()),A(e),e=I()}while('"'===e||"'"===e);return t.join("")}function V(e){var t=N();switch(t){case"'":case'"':return R(t),q();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e){var t=1;switch("-"===e.charAt(0)&&(t=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return t*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(m.test(e))return t*parseInt(e,10);if(y.test(e))return t*parseInt(e,16);if(_.test(e))return t*parseInt(e,8);if(w.test(e))return t*parseFloat(e);throw B(e,"number",!0)}(t)}catch(r){if(e&&E.test(t))return t;throw B(t,"value")}}function H(e,t){var r,n;do{if(!t||'"'!==(r=I())&&"'"!==r)try{e.push([n=Z(N()),A("to",!0)?Z(N()):n])}catch(n){if(!(t&&E.test(r)&&z>=2023))throw n;e.push(r)}else{var s=q();if(e.push(s),z>=2023)throw B(s,"id")}}while(A(",",!0));var i={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};X(i,function(e){if("option"!==e)throw B(e);re(i,e),A(";")},function(){ie(i)})}function Z(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw B(e,"id");if(g.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw B(e,"id")}function W(){if(void 0!==T)throw B("package");if(T=N(),!E.test(T))throw B(T,"name");D=D.define(T),A(";")}function G(){var e,t=I();switch(t){case"weak":e=P||(P=[]),N();break;case"public":N();default:e=k||(k=[])}t=q(),A(";"),e.push(t)}function K(){if(A("="),(z=q())<2023)throw B(z,"syntax");A(";")}function J(){if(A("="),z=q(),!["2023"].includes(z))throw B(z,"edition");A(";")}function Y(e,t){switch(t){case"option":return re(e,t),A(";"),!0;case"message":return Q(e,t),!0;case"enum":return te(e,t),!0;case"service":return function(e,t){if(!S.test(t=N()))throw B(t,"service name");var r=new d(t);X(r,function(e){if(!Y(r,e)){if("rpc"!==e)throw B(e);!function(e,t){var r=M(),n=t;if(!S.test(t=N()))throw B(t,"name");var s,i,o,a,c=t;if(A("("),A("stream",!0)&&(i=!0),!E.test(t=N()))throw B(t);if(s=t,A(")"),A("returns"),A("("),A("stream",!0)&&(a=!0),!E.test(t=N()))throw B(t);o=t,A(")");var l=new u(c,n,s,o,i,a);l.comment=r,X(l,function(e){if("option"!==e)throw B(e);re(l,e),A(";")}),e.add(l)}(r,e)}}),e.add(r),e===D&&L.push(r)}(e,t),!0;case"extend":return function(e,t){if(!E.test(t=N()))throw B(t,"reference");var r=t;X(null,function(t){switch(t){case"required":case"repeated":ee(e,t,r);break;case"optional":ee(e,"proto3"===z?"proto3_optional":"optional",r);break;default:if("proto2"===z||!E.test(t))throw B(t);R(t),ee(e,"optional",r)}})}(e,t),!0}return!1}function X(e,t,r){var n=x.line;if(e&&("string"!=typeof e.comment&&(e.comment=M()),e.filename=C.filename),A("{",!0)){for(var s;"}"!==(s=N());)t(s);A(";",!0)}else r&&r(),A(";"),e&&("string"!=typeof e.comment||O)&&(e.comment=M(n)||e.comment)}function Q(e,t){if(!S.test(t=N()))throw B(t,"type name");var r=new i(t);X(r,function(e){if(!Y(r,e))switch(e){case"map":!function(e){A("<");var t=N();if(void 0===p.mapKey[t])throw B(t,"type");A(",");var r=N();if(!E.test(r))throw B(r,"type");A(">");var n=N();if(!S.test(n))throw B(n,"name");A("=");var s=new a(U(n),Z(N()),t,r);X(s,function(e){if("option"!==e)throw B(e);re(s,e),A(";")},function(){ie(s)}),e.add(s)}(r);break;case"required":if("proto2"!==z)throw B(e);case"repeated":ee(r,e);break;case"optional":if("proto3"===z)ee(r,"proto3_optional");else{if("proto2"!==z)throw B(e);ee(r,"optional")}break;case"oneof":!function(e,t){if(!S.test(t=N()))throw B(t,"name");var r=new c(U(t));X(r,function(e){"option"===e?(re(r,e),A(";")):(R(e),ee(r,"optional"))}),e.add(r)}(r,e);break;case"extensions":H(r.extensions||(r.extensions=[]));break;case"reserved":H(r.reserved||(r.reserved=[]),!0);break;default:if("proto2"===z||!E.test(e))throw B(e);R(e),ee(r,"optional")}}),e.add(r),e===D&&L.push(r)}function ee(e,t,r){var n=N();if("group"!==n){for(;n.endsWith(".")||I().startsWith(".");)n+=N();if(!E.test(n))throw B(n,"type");var s=N();if(!S.test(s))throw B(s,"name");s=U(s),A("=");var a=new o(s,Z(N()),n,t,r);if(X(a,function(e){if("option"!==e)throw B(e);re(a,e),A(";")},function(){ie(a)}),"proto3_optional"===t){var l=new c("_"+s);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);e===D&&L.push(a)}else!function(e,t){if(z>=2023)throw B("group");var r=N();if(!S.test(r))throw B(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),A("=");var s=Z(N()),a=new i(r);a.group=!0;var c=new o(n,s,r,t);c.filename=C.filename,X(a,function(e){switch(e){case"option":re(a,e),A(";");break;case"required":case"repeated":ee(a,e);break;case"optional":ee(a,"proto3"===z?"proto3_optional":"optional");break;case"message":Q(a,e);break;case"enum":te(a,e);break;case"reserved":H(a.reserved||(a.reserved=[]),!0);break;default:throw B(e)}}),e.add(a).add(c)}(e,t)}function te(e,t){if(!S.test(t=N()))throw B(t,"name");var r=new l(t);X(r,function(e){switch(e){case"option":re(r,e),A(";");break;case"reserved":H(r.reserved||(r.reserved=[]),!0),void 0===r.reserved&&(r.reserved=[]);break;default:!function(e,t){if(!S.test(t))throw B(t,"name");A("=");var r=Z(N(),!0),n={options:void 0,getOption:function(e){return this.options[e]},setOption:function(e,t){h.prototype.setOption.call(n,e,t)},setParsedOption:function(){}};X(n,function(e){if("option"!==e)throw B(e);re(n,e),A(";")},function(){ie(n)}),e.add(t,r,n.comment,n.parsedOptions||n.options)}(r,e)}}),e.add(r),e===D&&L.push(r)}function re(e,t){var r,n,s=!0;for("option"===t&&(t=N());"="!==t;){if("("===t){var i=N();A(")"),t="("+i+")"}if(s){if(s=!1,t.includes(".")&&!t.includes("(")){var o=t.split(".");r=o[0]+".",t=o[1];continue}r=t}else n=n?n+=t:t;t=N()}var a=ne(e,n?r.concat(n):r);n=n&&"."===n[0]?n.slice(1):n,function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,r=r&&"."===r[r.length-1]?r.slice(0,-1):r,a,n)}function ne(e,t){if(A("{",!0)){for(var r={};!A("}",!0);){if(!S.test($=N()))throw B($,"name");if(null===$)throw B($,"end of input");var n,s=$;if(A(":",!0),"{"===I())n=ne(e,t+"."+$);else if("["===I()){var i;if(n=[],A("[",!0)){do{i=V(!0),n.push(i)}while(A(",",!0));A("]"),void 0!==i&&se(e,t+"."+$,i)}}else n=V(!0),se(e,t+"."+$,n);var o=r[s];o&&(n=[].concat(o).concat(n)),r[s]=n,A(",",!0),A(";",!0)}return r}var a=V(!0);return se(e,t,a),a}function se(e,t,r){D===e&&/^features\./.test(t)?F[t]=r:e.setOption&&e.setOption(t,r)}function ie(e){if(A("[",!0)){do{re(e,"option")}while(A(",",!0));A("]")}return e}for(;null!==($=N());)switch($){case"package":if(!j)throw B($);W();break;case"import":if(!j)throw B($);G();break;case"syntax":if(!j)throw B($);K();break;case"edition":if(!j)throw B($);J();break;case"option":re(D,$),A(";",!0);break;default:if(Y(D,$)){j=!1;continue}throw B($)}return L.forEach(e=>{e._edition=z,Object.keys(F).forEach(t=>{void 0===e.getOption(t)&&e.setOption(t,F[t],!0)})}),C.filename=null,{package:T,imports:k,weakImports:P,root:t}}},4892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseServerInterceptingCall=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=void 0,t.isInterceptingServerListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.getServerInterceptingCall=function(e,t,r,n,s,i){const o={path:s.path,requestStream:"clientStream"===s.type||"bidi"===s.type,responseStream:"serverStream"===s.type||"bidi"===s.type,requestDeserialize:s.deserialize,responseSerialize:s.serialize},a=new P(t,r,n,s,i);return e.reduce((e,t)=>t(o,e),a)};const n=r(4097),s=r(131),i=r(5675),o=r(9752),a=r(3106),c=r(9453),l=r(267),d=r(4756),u=r(2921),h="server_call";function p(e){l.trace(s.LogVerbosity.DEBUG,h,e)}t.ServerListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveHalfClose(e){return this.halfClose=e,this}withOnCancel(e){return this.cancel=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}};class f{constructor(e,t){this.listener=e,this.nextListener=t,this.cancelled=!1,this.processingMetadata=!1,this.hasPendingMessage=!1,this.pendingMessage=null,this.processingMessage=!1,this.hasPendingHalfClose=!1}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingHalfClose(){this.hasPendingHalfClose&&(this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=!1)}onReceiveMetadata(e){this.cancelled||(this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.cancelled||(this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingHalfClose())}))}onReceiveMessage(e){this.cancelled||(this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.cancelled||(this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingHalfClose()))}))}onReceiveHalfClose(){this.cancelled||this.listener.onReceiveHalfClose(()=>{this.cancelled||(this.processingMetadata||this.processingMessage?this.hasPendingHalfClose=!0:this.nextListener.onReceiveHalfClose())})}onCancel(){this.cancelled=!0,this.listener.onCancel(),this.nextListener.onCancel()}}t.ResponderBuilder=class{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0}withStart(e){return this.start=e,this}withSendMetadata(e){return this.metadata=e,this}withSendMessage(e){return this.message=e,this}withSendStatus(e){return this.status=e,this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}};const m={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveHalfClose:e=>{e()},onCancel:()=>{}},g={start:e=>{e()},sendMetadata:(e,t)=>{t(e)},sendMessage:(e,t)=>{t(e)},sendStatus:(e,t)=>{t(e)}};t.ServerInterceptingCall=class{constructor(e,t){var r,n,s,i;this.nextCall=e,this.processingMetadata=!1,this.sentMetadata=!1,this.processingMessage=!1,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:null!==(r=null==t?void 0:t.start)&&void 0!==r?r:g.start,sendMetadata:null!==(n=null==t?void 0:t.sendMetadata)&&void 0!==n?n:g.sendMetadata,sendMessage:null!==(s=null==t?void 0:t.sendMessage)&&void 0!==s?s:g.sendMessage,sendStatus:null!==(i=null==t?void 0:t.sendStatus)&&void 0!==i?i:g.sendStatus}}processPendingMessage(){this.pendingMessageCallback&&(this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null)}processPendingStatus(){this.pendingStatus&&(this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null)}start(e){this.responder.start(t=>{var r,n,s,i;const o={onReceiveMetadata:null!==(r=null==t?void 0:t.onReceiveMetadata)&&void 0!==r?r:m.onReceiveMetadata,onReceiveMessage:null!==(n=null==t?void 0:t.onReceiveMessage)&&void 0!==n?n:m.onReceiveMessage,onReceiveHalfClose:null!==(s=null==t?void 0:t.onReceiveHalfClose)&&void 0!==s?s:m.onReceiveHalfClose,onCancel:null!==(i=null==t?void 0:t.onCancel)&&void 0!==i?i:m.onCancel},a=new f(o,e);this.nextCall.start(a)})}sendMetadata(e){this.processingMetadata=!0,this.sentMetadata=!0,this.responder.sendMetadata(e,e=>{this.processingMetadata=!1,this.nextCall.sendMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}sendMessage(e,t){this.processingMessage=!0,this.sentMetadata||this.sendMetadata(new n.Metadata),this.responder.sendMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.pendingMessageCallback=t):this.nextCall.sendMessage(e,t)})}sendStatus(e){this.responder.sendStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextCall.sendStatus(e)})}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}getAuthContext(){return this.nextCall.getAuthContext()}getConnectionInfo(){return this.nextCall.getConnectionInfo()}getMetricsRecorder(){return this.nextCall.getMetricsRecorder()}};const y="grpc-accept-encoding",v="grpc-encoding",_="grpc-message",b="grpc-status",w="grpc-timeout",S=/(\d{1,8})\s*([HMSmun])/,E={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},C={[y]:"identity,deflate,gzip",[v]:"identity"},T={[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},k={waitForTrailers:!0};class P{constructor(e,t,r,o,a){var d,f;this.stream=e,this.callEventTracker=r,this.handler=o,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=s.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=!1,this.metadataSent=!1,this.wantTrailers=!1,this.cancelNotified=!1,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=!1,this.receivedHalfClose=!1,this.streamEnded=!1,this.metricsRecorder=new u.PerRequestMetricRecorder,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;p("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!1),this.callEventTracker.onCallEnd({code:s.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})),this.notifyOnCancel()}),this.stream.on("data",e=>{this.handleDataFrame(e)}),this.stream.pause(),this.stream.on("end",()=>{this.handleEndEvent()}),"grpc.max_send_message_length"in a&&(this.maxSendMessageSize=a["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in a&&(this.maxReceiveMessageSize=a["grpc.max_receive_message_length"]),this.host=null!==(d=t[":authority"])&&void 0!==d?d:t.host,this.decoder=new c.StreamDecoder(this.maxReceiveMessageSize);const m=n.Metadata.fromHttp2Headers(t);l.isTracerEnabled(h)&&p("Request to "+this.handler.path+" received headers "+JSON.stringify(m.toJSON()));const g=m.get(w);g.length>0&&this.handleTimeoutHeader(g[0]);const _=m.get(v);_.length>0&&(this.incomingEncoding=_[0]),m.remove(w),m.remove(v),m.remove(y),m.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),m.remove(i.constants.HTTP2_HEADER_TE),m.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=m;const b=null===(f=e.session)||void 0===f?void 0:f.socket;this.connectionInfo={localAddress:null==b?void 0:b.localAddress,localPort:null==b?void 0:b.localPort,remoteAddress:null==b?void 0:b.remoteAddress,remotePort:null==b?void 0:b.remotePort},this.shouldSendMetrics=!!a["grpc.server_call_metric_recording"]}handleTimeoutHeader(e){const t=e.toString().match(S);if(null===t){const t={code:s.Status.INTERNAL,details:`Invalid ${w} value "${e}"`,metadata:null};return void process.nextTick(()=>{this.sendStatus(t)})}const r=+t[1]*E[t[2]]|0,n=new Date;this.deadline=n.setMilliseconds(n.getMilliseconds()+r),this.deadlineTimer=setTimeout(()=>{const e={code:s.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(e)},r)}checkCancelled(){return this.cancelled||!this.stream.destroyed&&!this.stream.closed||(this.notifyOnCancel(),this.cancelled=!0),this.cancelled}notifyOnCancel(){this.cancelNotified||(this.cancelNotified=!0,this.cancelled=!0,process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onCancel()}),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.resume())}maybeSendMetadata(){this.metadataSent||this.sendMetadata(new n.Metadata)}serializeMessage(e){const t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}decompressMessage(e,t){const r=e.subarray(5);if("identity"===t)return r;if("deflate"===t||"gzip"===t){let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,n)=>{let i=0;const o=[];e.on("data",t=>{o.push(t),i+=t.byteLength,-1!==this.maxReceiveMessageSize&&i>this.maxReceiveMessageSize&&(e.destroy(),n({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(o))}),e.write(r),e.end()})}return Promise.reject({code:s.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}async decompressAndMaybePush(e){if("COMPRESSED"!==e.type)throw new Error(`Invalid queue entry type: ${e.type}`);const t=1===e.compressedMessage.readUInt8(0)?this.incomingEncoding:"identity";let r;try{r=await this.decompressMessage(e.compressedMessage,t)}catch(e){return void this.sendStatus(e)}try{e.parsedMessage=this.handler.deserialize(r)}catch(e){return void this.sendStatus({code:s.Status.INTERNAL,details:`Error deserializing request: ${e.message}`})}e.type="READABLE",this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&"COMPRESSED"!==this.readQueue[0].type){this.isReadPending=!1;const e=this.readQueue.shift();"READABLE"===e.type?this.listener.onReceiveMessage(e.parsedMessage):this.listener.onReceiveHalfClose()}}handleDataFrame(e){var t;if(this.checkCancelled())return;let r;p("Request to "+this.handler.path+" received data frame of size "+e.length);try{r=this.decoder.write(e)}catch(e){return void this.sendStatus({code:s.Status.RESOURCE_EXHAUSTED,details:e.message})}for(const e of r){this.stream.pause();const r={type:"COMPRESSED",compressedMessage:e,parsedMessage:null};this.readQueue.push(r),this.decompressAndMaybePush(r),null===(t=this.callEventTracker)||void 0===t||t.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=!0,this.maybePushNextMessage()}start(e){p("Request to "+this.handler.path+" start called"),this.checkCancelled()||(this.listener=e,e.onReceiveMetadata(this.metadata))}sendMetadata(e){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;const t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},T),C),t);this.stream.respond(r,k)}sendMessage(e,t){if(this.checkCancelled())return;let r;try{r=this.serializeMessage(e)}catch(e){return void this.sendStatus({code:s.Status.INTERNAL,details:`Error serializing response: ${(0,o.getErrorMessage)(e)}`,metadata:null})}-1!==this.maxSendMessageSize&&r.length-5>this.maxSendMessageSize?this.sendStatus({code:s.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${r.length} vs. ${this.maxSendMessageSize})`,metadata:null}):(this.maybeSendMetadata(),p("Request to "+this.handler.path+" sent data frame of size "+r.length),this.stream.write(r,e=>{var r;e?this.sendStatus({code:s.Status.INTERNAL,details:`Error writing message: ${(0,o.getErrorMessage)(e)}`,metadata:null}):(null===(r=this.callEventTracker)||void 0===r||r.addMessageSent(),t())}))}sendStatus(e){var t,r,i;if(this.checkCancelled())return;p("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+s.Status[e.code]+" details: "+e.details);const o=null!==(i=null===(r=e.metadata)||void 0===r?void 0:r.clone())&&void 0!==i?i:new n.Metadata;if(this.shouldSendMetrics&&o.set(u.GRPC_METRICS_HEADER,this.metricsRecorder.serialize()),this.metadataSent)this.wantTrailers?this.notifyOnCancel():(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const t=Object.assign({[b]:e.code,[_]:encodeURI(e.details)},o.toHttp2Headers());this.stream.sendTrailers(t),this.notifyOnCancel()}),this.stream.end());else{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const t=Object.assign(Object.assign({[b]:e.code,[_]:encodeURI(e.details)},T),o.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.notifyOnCancel()}}startRead(){p("Request to "+this.handler.path+" startRead called"),this.checkCancelled()||(this.isReadPending=!0,0===this.readQueue.length?this.receivedHalfClose||this.stream.resume():this.maybePushNextMessage())}getPeer(){var e;const t=null===(e=this.stream.session)||void 0===e?void 0:e.socket;return(null==t?void 0:t.remoteAddress)?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}getAuthContext(){var e;if((null===(e=this.stream.session)||void 0===e?void 0:e.socket)instanceof d.TLSSocket){const e=this.stream.session.socket.getPeerCertificate();return{transportSecurityType:"ssl",sslPeerCertificate:e.raw?e:void 0}}return{}}getConnectionInfo(){return this.connectionInfo}getMetricsRecorder(){return this.metricsRecorder}}t.BaseServerInterceptingCall=P},4946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3697),s=r(1980),i=r(9048),o=r(2327),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:c,it:l}=e;"all"===l.opts.removeAdditional&&void 0===a.additionalProperties&&o.default.code(new n.KeywordCxt(l,o.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(r);for(const e of d)l.definedProperties.add(e);l.opts.unevaluated&&d.length&&!0!==l.props&&(l.props=i.mergeEvaluated.props(t,(0,i.toHash)(d),l.props));const u=d.filter(e=>!(0,i.alwaysValidSchema)(l,r[e]));if(0===u.length)return;const h=t.name("valid");for(const r of u)p(r)?f(r):(t.if((0,s.propertyInData)(t,c,r,l.opts.ownProperties)),f(r),l.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(h);function p(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==r[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},4971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(6596),s=r(9048),i=r(6670);function o(e,t){const r=e.const("err",t);e.if(n._`${i.default.vErrors} === null`,()=>e.assign(i.default.vErrors,n._`[${r}]`),n._`${i.default.vErrors}.push(${r})`),e.code(n._`${i.default.errors}++`)}function a(e,t){const{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${s}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,s,i){const{it:c}=e,{gen:d,compositeRule:u,allErrors:h}=c,p=l(e,r,s);(null!=i?i:u||h)?o(d,p):a(c,n._`[${p}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:s}=e,{gen:c,compositeRule:d,allErrors:u}=s;o(c,l(e,r,n)),d||u||a(s,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(n._`${i.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(n._`${i.default.vErrors}.length`,t),()=>e.assign(i.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:s,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",o,i.default.errors,o=>{e.const(c,n._`${i.default.vErrors}[${o}]`),e.if(n._`${c}.instancePath === undefined`,()=>e.assign(n._`${c}.instancePath`,(0,n.strConcat)(i.default.instancePath,a.errorPath))),e.assign(n._`${c}.schemaPath`,n.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(n._`${c}.schema`,r),e.assign(n._`${c}.data`,s))})};const c={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function l(e,t,r){const{createErrors:s}=e.it;return!1===s?n._`{}`:function(e,t,r={}){const{gen:s,it:o}=e,a=[d(o,r),u(e,r)];return function(e,{params:t,message:r},s){const{keyword:o,data:a,schemaValue:l,it:d}=e,{opts:u,propertyName:h,topSchemaRef:p,schemaPath:f}=d;s.push([c.keyword,o],[c.params,"function"==typeof t?t(e):t||n._`{}`]),u.messages&&s.push([c.message,"function"==typeof r?r(e):r]),u.verbose&&s.push([c.schema,l],[c.parentSchema,n._`${p}${f}`],[i.default.data,a]),h&&s.push([c.propertyName,h])}(e,t,a),s.object(...a)}(e,t,r)}function d({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,r)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let o=i?t:n.str`${t}/${e}`;return r&&(o=n.str`${o}${(0,s.getErrorPath)(r,s.Type.Str)}`),[c.schemaPath,o]}},4973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;const n=r(8923),s=r(5656),i=r(463),o=r(9302),a=r(178),c=r(3956),l=r(131),d=r(4097),u=r(267),h=r(131),p=r(3822),f=r(533);function m(e){u.trace(h.LogVerbosity.DEBUG,"resolving_load_balancer",e)}const g=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function y(e,t,r,n){for(const s of r.name)switch(n){case"EMPTY":if(!s.service&&!s.method)return!0;break;case"SERVICE":if(s.service===e&&!s.method)return!0;break;case"SERVICE_AND_METHOD":if(s.service===e&&s.method===t)return!0}return!1}function v(e,t,r,n){for(const s of r)if(y(e,t,s,n))return s;return null}t.ResolvingLoadBalancer=class{constructor(e,t,r,n,l){this.target=e,this.channelControlHelper=t,this.channelOptions=r,this.onSuccessfulResolution=n,this.onFailedResolution=l,this.latestChildState=i.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=i.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,s.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(i.ConnectivityState.IDLE,new a.QueuePicker(this),null),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(m("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t,r)=>{this.latestChildState=e,this.latestChildPicker=t,this.latestChildErrorMessage=r,this.updateState(e,t,r)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,o.createResolver)(e,this.handleResolverResult.bind(this),r);const d={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new c.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)},d),this.backoffTimeout.unref()}handleResolverResult(e,t,r,s){var i,a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let c=!0,u=null;if(null===r?u=this.defaultServiceConfig:r.ok?u=r.value:null!==this.previousServiceConfig?u=this.previousServiceConfig:(c=!1,this.handleResolutionFailure(r.error)),null!==u){const r=null!==(i=null==u?void 0:u.loadBalancingConfig)&&void 0!==i?i:[],o=(0,n.selectLbConfigFromList)(r,!0);null===o?(c=!1,this.handleResolutionFailure({code:l.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new d.Metadata})):c=this.childLoadBalancer.updateAddressList(e,o,Object.assign(Object.assign({},this.channelOptions),t),s)}return c&&this.onSuccessfulResolution(u,null!==(a=t[o.CHANNEL_ARGS_CONFIG_SELECTOR_KEY])&&void 0!==a?a:function(e){return{invoke(t,r){var n,s;const i=t.split("/").filter(e=>e.length>0),o=null!==(n=i[0])&&void 0!==n?n:"",a=null!==(s=i[1])&&void 0!==s?s:"";if(e&&e.methodConfig)for(const t of g){const r=v(o,a,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]}},unref(){}}}(u)),c}updateResolution(){this.innerResolver.updateResolution(),this.currentState===i.ConnectivityState.IDLE&&this.updateState(i.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage),this.backoffTimeout.runOnce()}updateState(e,t,r){m((0,p.uriToString)(this.target)+" "+i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.IDLE&&(t=new a.QueuePicker(this,t)),this.currentState=e,this.channelControlHelper.updateState(e,t,r)}handleResolutionFailure(e){this.latestChildState===i.ConnectivityState.IDLE&&(this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e),e.details),this.onFailedResolution(e))}exitIdle(){this.currentState!==i.ConnectivityState.IDLE&&this.currentState!==i.ConnectivityState.TRANSIENT_FAILURE||(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=i.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.currentState=i.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}},4987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r(3106),s=r(5179),i=r(131),o=r(2558),a=r(267);class c{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));const n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){const t=1===e.readUInt8(0);let r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class l extends c{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends c{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let s=0;const o=[],a=n.createInflate();a.on("data",e=>{o.push(e),s+=e.byteLength,-1!==this.maxRecvMessageLength&&s>this.maxRecvMessageLength&&(a.destroy(),r({code:i.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),a.on("end",()=>{t(Buffer.concat(o))}),a.write(e),a.end()})}}class u extends c{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let s=0;const o=[],a=n.createGunzip();a.on("data",e=>{o.push(e),s+=e.byteLength,-1!==this.maxRecvMessageLength&&s>this.maxRecvMessageLength&&(a.destroy(),r({code:i.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),a.on("end",()=>{t(Buffer.concat(o))}),a.write(e),a.end()})}}class h extends c{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function p(e,t){switch(e){case"identity":return new l;case"deflate":return new d(t);case"gzip":return new u(t);default:return new h(e)}}class f extends o.BaseFilter{constructor(e,t){var r,n,o;super(),this.sharedFilterConfig=t,this.sendCompression=new l,this.receiveCompression=new l,this.currentCompressionAlgorithm="identity";const c=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!==(r=e["grpc.max_receive_message_length"])&&void 0!==r?r:i.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.maxSendMessageLength=null!==(n=e["grpc.max_send_message_length"])&&void 0!==n?n:i.DEFAULT_MAX_SEND_MESSAGE_LENGTH,void 0!==c)if("number"==typeof(d=c)&&"string"==typeof s.CompressionAlgorithms[d]){const e=s.CompressionAlgorithms[c],r=null===(o=t.serverSupportedEncodingHeader)||void 0===o?void 0:o.split(",");r&&!r.includes(e)||(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm,-1))}else a.log(i.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${c}`);var d}async sendMetadata(e){const t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];"string"==typeof e&&(this.receiveCompression=p(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new l,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;const r=await e;if(-1!==this.maxSendMessageLength&&r.message.length>this.maxSendMessageLength)throw{code:i.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`};let n;return n=!(this.sendCompression instanceof l||2&(null!==(t=r.flags)&&void 0!==t?t:0)),{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=f,t.CompressionFilterFactory=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new f(this.options,this.sharedFilterConfig)}}},4993:(e,t,r)=>{"use strict";const n=r(5317),s=r(2014),i=r(3436);function o(e,t,r){const o=s(e,t,r),a=n.spawn(o.command,o.args,o.options);return i.hookChildProcess(a,o),a}e.exports=o,e.exports.spawn=o,e.exports.sync=function(e,t,r){const o=s(e,t,r),a=n.spawnSync(o.command,o.args,o.options);return a.error=a.error||i.verifyENOENTSync(a.status,o),a},e.exports._parse=s,e.exports._enoent=i},4994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:i,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(o.opts.discriminator&&i.discriminator)return;const a=r,c=t.let("valid",!1),l=t.let("passing",null),d=t.name("_valid");e.setParams({passing:l}),t.block(function(){a.forEach((r,i)=>{let a;(0,s.alwaysValidSchema)(o,r)?t.var(d,!0):a=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},d),i>0&&t.if(n._`${d} && ${c}`).assign(c,!1).assign(l,n._`[${l}, ${i}]`).else(),t.if(d,()=>{t.assign(c,!0),t.assign(l,i),a&&e.mergeEvaluated(a,n.Name)})})}),e.result(c,()=>e.reset(),()=>e.error(!0))}};t.default=i},5034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=void 0,t.statusOrFromValue=function(e){return{ok:!0,value:e}},t.statusOrFromError=function(e){var t;return{ok:!1,error:Object.assign(Object.assign({},e),{metadata:null!==(t=e.metadata)&&void 0!==t?t:new n.Metadata})}},t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length};const n=r(4097);t.InterceptingListenerImpl=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}},5047:(e,t,r)=>{"use strict";t.Service=r(7595)},5085:(e,t,r)=>{"use strict";t.Yi=t.Ib=void 0;const n=r(2028),s=r(2549),i=r(5407),o=r(3197);var a;r(4442),function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(a=t.Ib||(t.Ib={}));const c={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function l(e,t){const r=(n=t,i=e.name,""===n?i:n+"."+i);var n,i;return function(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}(e)?[[r,e]]:function(e){return e instanceof s.Namespace||e instanceof s.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>l(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function d(e,t){return function(r){return e.toObject(e.decode(r),t)}}function u(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const r=e.fromObject(t);return e.encode(r).finish()}}function h(e){return(e||[]).reduce((e,t)=>{for(const[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:a.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function p(e,t,r,s){const i=e.resolvedRequestType,o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:u(i),requestDeserialize:d(i,r),responseSerialize:u(o),responseDeserialize:d(o,r),originalName:n(e.name),requestType:f(i,r,s),responseType:f(o,r,s),options:h(e.parsedOptions)}}function f(e,t,r){const n=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:n.$type.toObject(n,c),fileDescriptorProtos:r,serialize:u(e),deserialize:d(e,t)}}function m(e,t,r,n){if(e instanceof s.Service)return function(e,t,r,n){const s={};for(const i of e.methodsArray)s[i.name]=p(i,t,r,n);return s}(e,t,r,n);if(e instanceof s.Type)return f(e,r,n);if(e instanceof s.Enum)return function(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,c),fileDescriptorProtos:t}}(e,n);throw new Error("Type mismatch in reflection object handling")}function g(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file.map(e=>Buffer.from(i.FileDescriptorProto.encode(e).finish()));for(const[s,i]of l(e,""))r[s]=m(i,s,t,n);return r}t.Yi=function(e,t){return g((0,o.loadProtosWithOptionsSync)(e,t),t)},(0,o.addCommonProtos)()},5095:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},5105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8851),s=r(4076),i=r(2010),o=r(3663),a=r(6359),c=r(4560),l=r(5584),d=r(1828),u=r(1234),h=r(3144),p=[n.default,s.default,i.default,o.default,a.default,c.default,l.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=p},5179:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},5212:(e,t,r)=>{"use strict";e.exports=i;var n=r(8045),s=r(4153)("fs");function i(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&s&&s.readFile?s.readFile(e,function(n,s){return n&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,r):n?r(n):r(null,t.binary?s:s.toString("utf8"))}):i.xhr(e,t,r):n(i,this,e,t)}i.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var s=0;s<n.responseText.length;++s)e.push(255&n.responseText.charCodeAt(s))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},5215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8592),s=r(8171),i=r(6519),o=r(7879),a=r(1070),c=r(4362),l=r(340),d=r(2327),u=r(4946),h=r(4368),p=r(1526),f=r(6972),m=r(4994),g=r(3501),y=r(4176),v=r(2149);t.default=function(e=!1){const t=[p.default,f.default,m.default,g.default,y.default,v.default,l.default,d.default,c.default,u.default,h.default];return e?t.push(s.default,o.default):t.push(n.default,i.default),t.push(a.default),t}},5219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(3789),s=r(9598),i=r(6735),o=r(3043),a=r(7083),c=r(9810);class l{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,o.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function d(e){const t=h.call(this,e);if(t)return t;const r=(0,o.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:l}=this.opts.code,{ownProperties:d}=this.opts,u=new n.CodeGen(this.scope,{es5:a,lines:l,ownProperties:d});let p;e.$async&&(p=u.scopeValue("Error",{ref:s.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const f=u.scopeName("validate");e.validateName=f;const m={gen:u,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,c.validateFunctionCode)(m),u.optimize(this.opts.code.optimize);const t=u.toString();g=`${u.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const r=new Function(`${i.default.self}`,`${i.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:f,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=m;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function u(e){return(0,o.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function h(e){for(const t of this._compilations)if(p(t,e))return t}function p(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||m.call(this,e,t)}function m(e,t){const r=this.opts.uriResolver.parse(t),n=(0,o._getFullPath)(this.opts.uriResolver,r);let s=(0,o.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return y.call(this,r,e);const i=(0,o.normalizeId)(n),a=this.refs[i]||this.schemas[i];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),i===(0,o.normalizeId)(t)){const{schema:t}=a,{schemaId:r}=this.opts,n=t[r];return n&&(s=(0,o.resolveUrl)(this.opts.uriResolver,s,n)),new l({schema:t,schemaId:r,root:e,baseId:s})}return y.call(this,r,a)}}t.SchemaEnv=l,t.compileSchema=d,t.resolveRef=function(e,t,r){var n;r=(0,o.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=f.call(this,e,r);if(void 0===i){const s=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:o}=this.opts;s&&(i=new l({schema:s,schemaId:o,root:e,baseId:t}))}return void 0!==i?e.refs[r]=u.call(this,i):void 0},t.getCompilingSchema=h,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:r,root:n}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,a.unescapeFragment)(n)];if(void 0===e)return;const s="object"==typeof(r=e)&&r[this.opts.schemaId];!g.has(n)&&s&&(t=(0,o.resolveUrl)(this.opts.uriResolver,t,s))}let i;if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){const e=(0,o.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=m.call(this,n,e)}const{schemaId:c}=this.opts;return i=i||new l({schema:r,schemaId:c,root:n,baseId:t}),i.schema!==i.root.schema?i:void 0}},5311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},5317:e=>{"use strict";e.exports=require("child_process")},5325:(e,t,r)=>{"use strict";var n=e.exports=r(4394);n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(1080),n.decoder=r(7728),n.verifier=r(420),n.converter=r(744),n.ReflectionObject=r(7209),n.Namespace=r(1304),n.Root=r(5330),n.Enum=r(5643),n.Type=r(7882),n.Field=r(1344),n.OneOf=r(1457),n.MapField=r(8252),n.Service=r(9687),n.Method=r(8811),n.Message=r(2551),n.wrappers=r(6434),n.types=r(361),n.util=r(3262),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},5330:(e,t,r)=>{"use strict";e.exports=u;var n=r(1304);((u.prototype=Object.create(n.prototype)).constructor=u).className="Root";var s,i,o,a=r(1344),c=r(5643),l=r(1457),d=r(3262);function u(e){n.call(this,"",e),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function h(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested).resolveAll()},u.prototype.resolvePath=d.path.resolve,u.prototype.fetch=d.fetch,u.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var s=this;if(!n)return d.asPromise(e,s,t,r);var a=n===h;function c(e,t){if(n){if(a)throw e;t&&t.resolveAll();var r=n;n=null,r(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){i.filename=e;var n,o=i(t,s,r),u=0;if(o.imports)for(;u<o.imports.length;++u)(n=l(o.imports[u])||s.resolvePath(e,o.imports[u]))&&p(n);if(o.weakImports)for(u=0;u<o.weakImports.length;++u)(n=l(o.weakImports[u])||s.resolvePath(e,o.weakImports[u]))&&p(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,s)}function p(e,t){if(e=l(e)||e,!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?u(e,o[e]):(++f,setTimeout(function(){--f,u(e,o[e])}));else if(a){var r;try{r=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,r)}else++f,s.fetch(e,function(r,i){--f,n&&(r?t?f||c(null,s):c(r):u(e,i))})}var f=0;d.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=s.resolvePath("",t[g]))&&p(m);return a?(s.resolveAll(),s):(f||c(null,s),s)},u.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n)),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}(e instanceof s||e instanceof c||e instanceof a)&&(this._fullyQualifiedObjects[e.fullName]=e)},u.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]},u._configure=function(e,t,r){s=e,i=t,o=r}},5335:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>n(e,t))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const s=t.RULES.types[n];return s&&!0!==s&&r(e,s)},t.shouldUseGroup=r,t.shouldUseRule=n},5407:(e,t,r)=>{"use strict";var n=r(2549);e.exports=t=n.descriptor=n.Root.fromJSON(r(3951)).lookup(".google.protobuf");var s=n.Namespace,i=n.Root,o=n.Enum,a=n.Type,c=n.Field,l=n.MapField,d=n.OneOf,u=n.Service,h=n.Method;function p(e,r,n){var l=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});!function(e,r){if(e)if("proto2"===e||"proto3"===e)r.syntax=e;else{if(r.syntax="editions","2023"!==e)throw new Error("Unsupported edition "+e);r.edition=t.Edition.EDITION_2023}}(n,l),e instanceof i||(l.package=e.fullName.substring(1));for(var d,h=0;h<e.nestedArray.length;++h)(d=e._nestedArray[h])instanceof a?l.messageType.push(d.toDescriptor(n)):d instanceof o?l.enumType.push(d.toDescriptor()):d instanceof c?l.extension.push(d.toDescriptor(n)):d instanceof u?l.service.push(d.toDescriptor()):d instanceof s&&p(d,r,n);l.options=C(e.options,t.FileOptions),l.messageType.length+l.enumType.length+l.extension.length+l.service.length&&r.push(l)}i.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new i;if(e.file)for(var n,s,l,d=0;d<e.file.length;++d){s=r,(n=e.file[d]).package&&n.package.length&&(s=r.define(n.package));var h=P(n);if(n.name&&n.name.length&&r.files.push(s.filename=n.name),n.messageType)for(l=0;l<n.messageType.length;++l)s.add(a.fromDescriptor(n.messageType[l],h));if(n.enumType)for(l=0;l<n.enumType.length;++l)s.add(o.fromDescriptor(n.enumType[l],h));if(n.extension)for(l=0;l<n.extension.length;++l)s.add(c.fromDescriptor(n.extension[l],h));if(n.service)for(l=0;l<n.service.length;++l)s.add(u.fromDescriptor(n.service[l],h));var p=S(n.options,t.FileOptions);if(p){var f=Object.keys(p);for(l=0;l<f.length;++l)s.setOption(f[l],p[f[l]])}}return r.resolveAll()},i.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return p(this,r.file,e),r};var f=0;a.fromDescriptor=function(e,r,n){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var s,i=new a(e.name.length?e.name:"Type"+f++,S(e.options,t.MessageOptions));if(n||(i._edition=r),e.oneofDecl)for(s=0;s<e.oneofDecl.length;++s)i.add(d.fromDescriptor(e.oneofDecl[s]));if(e.field)for(s=0;s<e.field.length;++s){var l=c.fromDescriptor(e.field[s],r,!0);i.add(l),e.field[s].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[s].oneofIndex].add(l)}if(e.extension)for(s=0;s<e.extension.length;++s)i.add(c.fromDescriptor(e.extension[s],r,!0));if(e.nestedType)for(s=0;s<e.nestedType.length;++s)i.add(a.fromDescriptor(e.nestedType[s],r,!0)),e.nestedType[s].options&&e.nestedType[s].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(s=0;s<e.enumType.length;++s)i.add(o.fromDescriptor(e.enumType[s],r,!0));if(e.extensionRange&&e.extensionRange.length)for(i.extensions=[],s=0;s<e.extensionRange.length;++s)i.extensions.push([e.extensionRange[s].start,e.extensionRange[s].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(s=0;s<e.reservedRange.length;++s)i.reserved.push([e.reservedRange[s].start,e.reservedRange[s].end]);if(e.reservedName)for(s=0;s<e.reservedName.length;++s)i.reserved.push(e.reservedName[s])}return i},a.prototype.toDescriptor=function(e){var r,n=t.DescriptorProto.create({name:this.name});for(r=0;r<this.fieldsArray.length;++r){var s;if(n.field.push(s=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof l){var i=b(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType,!1),d=b(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType,!1),u=11===d||14===d?this._fieldsArray[r].resolvedType&&T(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;n.nestedType.push(t.DescriptorProto.create({name:s.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:i}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:d,typeName:u})],options:t.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)n.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof c?n.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof a?n.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof o&&n.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)n.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)"string"==typeof this.reserved[r]?n.reservedName.push(this.reserved[r]):n.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return n.options=C(this.options,t.MessageOptions),n};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;c.fromDescriptor=function(e,r,n){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");var s,i;switch(s=e.typeName&&e.typeName.length?e.typeName:function(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var o=e.extendee;void 0!==e.extendee&&(o=o.length?o:void 0);var a=new c(e.name.length?e.name:"field"+e.number,e.number,s,i,o);if(n||(a._edition=r),a.options=S(e.options,t.FieldOptions),e.proto3_optional&&(a.options.proto3_optional=!0),e.defaultValue&&e.defaultValue.length){var l=e.defaultValue;switch(l){case"true":case"TRUE":l=!0;break;case"false":case"FALSE":l=!1;break;default:m.exec(l)&&(l=parseInt(l))}a.setOption("default",l)}return function(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}(e.type)&&("proto3"===r?e.options&&!e.options.packed&&a.setOption("packed",!1):r&&"proto2"!==r||!e.options||!e.options.packed||a.setOption("packed",!0)),a},c.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=b(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:r.typeName=this.resolvedType?T(this.parent,this.resolvedType):this.type}"repeated"===this.rule?r.label=3:this.required&&"proto2"===e?r.label=2:r.label=1}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=C(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default)),this.options.proto3_optional&&(r.proto3_optional=!0)),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):e&&"proto2"!==e||!this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;o.fromDescriptor=function(e,r,n){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var s={};if(e.value)for(var i=0;i<e.value.length;++i){var a=e.value[i].name,c=e.value[i].number||0;s[a&&a.length?a:"NAME"+c]=c}var l=new o(e.name&&e.name.length?e.name:"Enum"+g++,s,S(e.options,t.EnumOptions));return n||(l._edition=r),l},o.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:C(this.options,t.EnumOptions)})};var y=0;d.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new d(e.name&&e.name.length?e.name:"oneof"+y++)},d.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;u.fromDescriptor=function(e,r,n){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var s=new u(e.name&&e.name.length?e.name:"Service"+v++,S(e.options,t.ServiceOptions));if(n||(s._edition=r),e.method)for(var i=0;i<e.method.length;++i)s.add(h.fromDescriptor(e.method[i]));return s},u.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:C(this.options,t.ServiceOptions)})};var _=0;function b(e,t,r){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof a)return r?10:11;throw Error("illegal type: "+e)}function w(e,t){for(var r,n,s={},i=0;i<t.fieldsArray.length;++i)if("uninterpretedOption"!==(n=(r=t._fieldsArray[i]).name)&&Object.prototype.hasOwnProperty.call(e,n)){var c=k(n);r.resolvedType instanceof a?s[c]=w(e[n],r.resolvedType):r.resolvedType instanceof o?s[c]=r.resolvedType.valuesById[e[n]]:s[c]=e[n]}return s}function S(e,t){if(e)return w(t.toObject(e),t)}function E(e,t){for(var r={},s=Object.keys(e),i=0;i<s.length;++i){var o=s[i],c=n.util.camelCase(o);if(Object.prototype.hasOwnProperty.call(t.fields,c)){var l=t.fields[c];l.resolvedType instanceof a?r[c]=E(e[o],l.resolvedType):r[c]=e[o],l.repeated&&!Array.isArray(r[c])&&(r[c]=[r[c]])}}return r}function C(e,t){if(e)return t.fromObject(E(e,t))}function T(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,a=0,c=n.length-1;if(!(e instanceof i)&&t instanceof s)for(;o<r.length&&a<c&&r[o]===n[a];){var l=t.lookup(r[o++],!0);if(null!==l&&l!==t)break;++a}else for(;o<r.length&&a<c&&r[o]===n[a];++o,++a);return n.slice(a).join(".")}function k(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}function P(e){if("editions"===e.syntax){if(e.edition===t.Edition.EDITION_2023)return"2023";throw new Error("Unsupported edition "+e.edition)}return"proto3"===e.syntax?"proto3":"proto2"}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+_++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),S(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:C(this.options,t.MethodOptions)})}},5434:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},5486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;const n=r(5675),s=r(857),i=r(131),o=r(4097),a=r(9453),c=r(267),l=r(131);function d(e){const t=`Received HTTP status code ${e}`;let r;switch(e){case 400:r=i.Status.INTERNAL;break;case 401:r=i.Status.UNAUTHENTICATED;break;case 403:r=i.Status.PERMISSION_DENIED;break;case 404:r=i.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:r=i.Status.UNAVAILABLE;break;default:r=i.Status.UNKNOWN}return{code:r,details:t,metadata:new o.Metadata}}t.Http2SubchannelCall=class{constructor(e,t,r,c,l){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=c,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.finalStatus=null,this.internalError=null,this.serverEndedCall=!1,this.connectionDropped=!1;const h=null!==(u=c.getOptions()["grpc.max_receive_message_length"])&&void 0!==u?u:i.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new a.StreamDecoder(h),e.on("response",(e,t)=>{let r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";if(this.trace("Received server headers:\n"+r),this.httpStatusCode=e[":status"],t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=o.Metadata.fromHttp2Headers(e)}catch(e){return void this.endCall({code:i.Status.UNKNOWN,details:e.message,metadata:new o.Metadata})}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{if(this.statusOutput)return;let t;this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){if(void 0!==this.httpStatusCode&&200!==this.httpStatusCode){const e=d(this.httpStatusCode);this.cancelWithStatus(e.code,e.details)}else this.cancelWithStatus(i.Status.RESOURCE_EXHAUSTED,e.message);return}for(const e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{this.serverEndedCall=!0,process.nextTick(()=>{var t;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===i.Status.OK)return;let r,s="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;if(this.httpStatusCode&&200!==this.httpStatusCode){const e=d(this.httpStatusCode);r=e.code,s=e.details}else r=i.Status.INTERNAL,s=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=i.Status.UNAVAILABLE,s="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:this.connectionDropped?(r=i.Status.UNAVAILABLE,s="Connection dropped"):(r=i.Status.CANCELLED,s="Call cancelled");break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=i.Status.RESOURCE_EXHAUSTED,s="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=i.Status.PERMISSION_DENIED,s="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=i.Status.INTERNAL,null===this.internalError?s=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=i.Status.UNAVAILABLE,s=this.internalError.message):s=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=i.Status.INTERNAL,s=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:s,metadata:new o.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+function(e){for(const[t,r]of Object.entries(s.constants.errno))if(r===e)return t;return"Unknown system error "+e}(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}getDeadlineInfo(){return[`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=!0,setImmediate(()=>{this.endCall({code:i.Status.UNAVAILABLE,details:"Connection dropped",metadata:new o.Metadata})})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){c.trace(l.LogVerbosity.DEBUG,"subchannel_call","["+this.callId+"] "+e)}endCall(e){null!==this.finalStatus&&this.finalStatus.code!==i.Status.OK||(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==i.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.serverEndedCall=!0,this.callEventTracker.onStreamEnd(!0);let t,r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=o.Metadata.fromHttp2Headers(e)}catch(e){t=new o.Metadata}const n=t.getMap();let s;if("string"==typeof n["grpc-status"]){const e=Number(n["grpc-status"]);this.trace("received status code "+e+" from server"),t.remove("grpc-status");let r="";if("string"==typeof n["grpc-message"]){try{r=decodeURI(n["grpc-message"])}catch(e){r=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+r+'" from server')}s={code:e,details:r,metadata:t}}else this.httpStatusCode?(s=d(this.httpStatusCode),s.metadata=t):s={code:i.Status.UNKNOWN,details:"No status information received",metadata:t};this.endCall(s)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed)if(this.serverEndedCall)this.http2Stream.end();else{let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===i.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new o.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}getAuthContext(){return this.transport.getAuthContext()}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==i.Status.OK)return this.readsClosed=!0,void this.maybeOutputStatus();if(this.canPush=!0,this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();return void this.push(e)}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r=t=>{process.nextTick(()=>{var r;let n=i.Status.UNAVAILABLE;"ERR_STREAM_WRITE_AFTER_END"===(null==t?void 0:t.code)&&(n=i.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:i.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}},5563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const n=r(1544),s=r(3653),i=r(463),o=r(131),a=r(4097),c=r(3952),l=Symbol(),d=Symbol(),u=Symbol(),h=Symbol();function p(e){return"function"==typeof e}function f(e){var t;return(null===(t=e.stack)||void 0===t?void 0:t.split("\n").slice(1).join("\n"))||"no stack trace available"}t.Client=class{constructor(e,t,r={}){var n,i;if(r=Object.assign({},r),this[d]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[u]=null!==(i=r.interceptor_providers)&&void 0!==i?i:[],delete r.interceptor_providers,this[d].length>0&&this[u].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[l]=r.channelOverride;else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[l]=n(e,t,r)}else this[l]=new s.ChannelImplementation(e,t,r)}close(){this[l].close()}getChannel(){return this[l]}waitForReady(e,t){const r=n=>{if(n)return void t(new Error("Failed to connect before the deadline"));let s;try{s=this[l].getConnectivityState(!0)}catch(e){return void t(new Error("The channel has been closed"))}if(s===i.ConnectivityState.READY)t();else try{this[l].watchConnectivityState(s,e,r)}catch(e){t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(p(e))return{metadata:new a.Metadata,options:{},callback:e};if(p(t))return e instanceof a.Metadata?{metadata:e,options:{},callback:t}:{metadata:new a.Metadata,options:e,callback:t};if(!(e instanceof a.Metadata&&t instanceof Object&&p(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,s,i,a,p){var m,g;const y=this.checkOptionalUnaryResponseArguments(i,a,p),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r};let _={argument:s,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[l],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(_=this[h](_));const b=_.call,w={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(m=_.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=_.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,c.getInterceptingCall)(w,_.methodDefinition,_.callOptions,_.channel);b.call=S;let E=null,C=!1,T=new Error;return S.start(_.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==E&&S.cancelWithStatus(o.Status.UNIMPLEMENTED,"Too many responses received"),E=e},onReceiveStatus(e){if(!C){if(C=!0,e.code===o.Status.OK)if(null===E){const t=f(T);_.callback((0,n.callErrorFromStatus)({code:o.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else _.callback(null,E);else{const t=f(T);_.callback((0,n.callErrorFromStatus)(e,t))}T=null,b.emit("status",e)}}}),S.sendMessage(s),S.halfClose(),b}makeClientStreamRequest(e,t,r,s,i,a){var p,m;const g=this.checkOptionalUnaryResponseArguments(s,i,a),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r};let v={metadata:g.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[l],methodDefinition:y,callOptions:g.options,callback:g.callback};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},w=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=w;let S=null,E=!1,C=new Error;return w.start(v.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==S&&w.cancelWithStatus(o.Status.UNIMPLEMENTED,"Too many responses received"),S=e,w.startRead()},onReceiveStatus(e){if(!E){if(E=!0,e.code===o.Status.OK)if(null===S){const t=f(C);v.callback((0,n.callErrorFromStatus)({code:o.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else v.callback(null,S);else{const t=f(C);v.callback((0,n.callErrorFromStatus)(e,t))}C=null,_.emit("status",e)}}}),_}checkMetadataAndOptions(e,t){let r,n;return e instanceof a.Metadata?(r=e,n=t||{}):(n=e||{},r=new a.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,s,i,a){var p,m;const g=this.checkMetadataAndOptions(i,a),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r};let v={argument:s,metadata:g.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[l],methodDefinition:y,callOptions:g.options};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},w=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=w;let S=!1,E=new Error;return w.start(v.metadata,{onReceiveMetadata(e){_.emit("metadata",e)},onReceiveMessage(e){_.push(e)},onReceiveStatus(e){if(!S){if(S=!0,_.push(null),e.code!==o.Status.OK){const t=f(E);_.emit("error",(0,n.callErrorFromStatus)(e,t))}E=null,_.emit("status",e)}}}),w.sendMessage(s),w.halfClose(),_}makeBidiStreamRequest(e,t,r,s,i){var a,p;const m=this.checkMetadataAndOptions(s,i),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r};let y={metadata:m.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[l],methodDefinition:g,callOptions:m.options};this[h]&&(y=this[h](y));const v=y.call,_={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(a=y.callOptions.interceptors)&&void 0!==a?a:[],callInterceptorProviders:null!==(p=y.callOptions.interceptor_providers)&&void 0!==p?p:[]},b=(0,c.getInterceptingCall)(_,y.methodDefinition,y.callOptions,y.channel);v.call=b;let w=!1,S=new Error;return b.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!w){if(w=!0,v.push(null),e.code!==o.Status.OK){const t=f(S);v.emit("error",(0,n.callErrorFromStatus)(e,t))}S=null,v.emit("status",e)}}}),v}}},5572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=function(){return r++};let r=0},5581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9810),s=r(1085),i=r(7083),o=r(396),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:c,it:l}=e;"all"===l.opts.removeAdditional&&void 0===a.additionalProperties&&o.default.code(new n.KeywordCxt(l,o.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(r);for(const e of d)l.definedProperties.add(e);l.opts.unevaluated&&d.length&&!0!==l.props&&(l.props=i.mergeEvaluated.props(t,(0,i.toHash)(d),l.props));const u=d.filter(e=>!(0,i.alwaysValidSchema)(l,r[e]));if(0===u.length)return;const h=t.name("valid");for(const r of u)p(r)?f(r):(t.if((0,s.propertyInData)(t,c,r,l.opts.ownProperties)),f(r),l.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(h);function p(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==r[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},5583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(2796),s=r(3789),i=r(6735),o={message:"boolean schema is false"};function a(e,t){const{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(i,o,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign(s._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),a(e)):r.var(t,!0)}},5584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${i} ${s}`)}};t.default=s},5590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(3789),s=r(7083);function i(e,t,r){const{gen:i,compositeRule:o,data:a,opts:c}=e;if(void 0===r)return;const l=n._`${a}${(0,n.getProperty)(t)}`;if(o)return void(0,s.checkStrictMode)(e,`default is ignored for: ${l}`);let d=n._`${l} === undefined`;"empty"===c.useDefaults&&(d=n._`${d} || ${l} === null || ${l} === ""`),i.if(d,n._`${l} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach((t,r)=>i(e,r,t.default))}},5643:(e,t,r)=>{"use strict";e.exports=o;var n=r(7209);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var s=r(1304),i=r(3262);function o(e,t,r,s,i,o){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=i||{},this.valuesOptions=o,this._valuesFeatures={},this.reserved=void 0,t)for(var a=Object.keys(t),c=0;c<a.length;++c)"number"==typeof t[a[c]]&&(this.valuesById[this.values[a[c]]=t[a[c]]]=a[c])}o.prototype._resolveFeatures=function(e){return e=this._edition||e,n.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(e=>{var t=Object.assign({},this._features);this._valuesFeatures[e]=Object.assign(t,this.valuesOptions&&this.valuesOptions[e]&&this.valuesOptions[e].features)}),this},o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r,n){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}},5656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRetryThrottling=l,t.validateServiceConfig=u,t.extractAndSelectServiceConfig=function(e,t){for(const r of e)if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring(12);return p(JSON.parse(e),t)}return null};const n=r(857),s=r(131),i=/^\d+(\.\d{1,9})?s$/,o="node";function a(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw new Error("Invalid method config name: invalid service: expected type string, got "+typeof e.service);if("method"in e&&""!==e.method){if("string"!=typeof e.method)throw new Error("Invalid method config name: invalid method: expected type string, got "+typeof e.service);return{service:e.service,method:e.method}}return{service:e.service}}if("method"in e&&void 0!==e.method)throw new Error("Invalid method config name: method set with empty or unset service");return{}}function c(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw new Error("Invalid method config: invalid name array");for(const t of e.name)r.name.push(a(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else{if("string"!=typeof e.timeout||!i.test(e.timeout))throw new Error("Invalid method config: invalid timeout");{const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:0|(null!==(t=n[1])&&void 0!==t?t:0)}}}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!i.test(e.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!i.test(e.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e)||!Array.isArray(e.retryableStatusCodes))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(const t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(s.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");if(!Object.values(s.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!i.test(e.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(const t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(s.Status).includes(t))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");if(!Object.values(s.Status).includes(t.toUpperCase()))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}const t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}(e.hedgingPolicy));return r}function l(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function d(e){if("object"!=typeof e||null===e)throw new Error("Invalid loadBalancingConfig: unexpected type "+typeof e);const t=Object.keys(e);if(t.length>1)throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${t}`);if(0===t.length)throw new Error("Invalid loadBalancingConfig: load balancing policy name required");return{[t[0]]:e[t[0]]}}function u(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"!=typeof e.loadBalancingPolicy)throw new Error("Invalid service config: invalid loadBalancingPolicy");t.loadBalancingPolicy=e.loadBalancingPolicy}if("loadBalancingConfig"in e){if(!Array.isArray(e.loadBalancingConfig))throw new Error("Invalid service config: invalid loadBalancingConfig");for(const r of e.loadBalancingConfig)t.loadBalancingConfig.push(d(r))}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(const r of e.methodConfig)t.methodConfig.push(c(r));"retryThrottling"in e&&(t.retryThrottling=l(e.retryThrottling));const r=[];for(const e of t.methodConfig)for(const t of e.name){for(const e of r)if(t.service===e.service&&t.method===e.method)throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function h(e){if(!("serviceConfig"in e))throw new Error("Invalid service config choice: missing service config");const t={serviceConfig:u(e.serviceConfig)};if("clientLanguage"in e){if(!Array.isArray(e.clientLanguage))throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage=[];for(const r of e.clientLanguage){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage.push(r)}}if("clientHostname"in e){if(!Array.isArray(e.clientHostname))throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname=[];for(const r of e.clientHostname){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname.push(r)}}if("percentage"in e){if(!("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100))throw new Error("Invalid service config choice: invalid percentage");t.percentage=e.percentage}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e)if(!r.includes(t))throw new Error(`Invalid service config choice: unexpected field ${t}`);return t}function p(e,t){if(!Array.isArray(e))throw new Error("Invalid service config list");for(const r of e){const e=h(r);if(!("number"==typeof e.percentage&&t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(const r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(const r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw new Error("No matching service config found")}},5675:e=>{"use strict";e.exports=require("http2")},5692:e=>{"use strict";e.exports=require("https")},5716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubchannelPool=void 0,t.getSubchannelPool=function(e){return e?l:new c};const n=r(6998),s=r(1385),i=r(8996),o=r(3822),a=r(2095);class c{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(const t in this.pool){const r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},1e4),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,c){this.ensureCleanupTask();const l=(0,o.uriToString)(e);if(l in this.pool){const e=this.pool[l];for(const s of e)if((0,i.subchannelAddressEqual)(t,s.subchannelAddress)&&(0,n.channelOptionsEqual)(r,s.channelArguments)&&c._equals(s.channelCredentials))return s.subchannel}const d=new s.Subchannel(e,t,r,c,new a.Http2SubchannelConnector(e));return l in this.pool||(this.pool[l]=[]),this.pool[l].push({subchannelAddress:t,channelArguments:r,channelCredentials:c,subchannel:d}),d.ref(),d}}t.SubchannelPool=c;const l=new c},5819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcherCertificateProvider=void 0;const n=r(9896),s=r(267),i=r(131);function o(e){s.trace(i.LogVerbosity.DEBUG,"certificate_provider",e)}const a=(0,r(9023).promisify)(n.readFile);t.FileWatcherCertificateProvider=class{constructor(e){if(this.config=e,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,void 0===e.certificateFile!=(void 0===e.privateKeyFile))throw new Error("certificateFile and privateKeyFile must be set or unset together");if(void 0===e.certificateFile&&void 0===e.caCertificateFile)throw new Error("At least one of certificateFile and caCertificateFile must be set");o("File watcher constructed with config "+JSON.stringify(e))}updateCertificates(){this.fileResultPromise||(this.fileResultPromise=Promise.allSettled([this.config.certificateFile?a(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?a(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?a(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then(([e,t,r])=>{if(this.refreshTimer){o("File watcher read certificates certificate "+e.status+", privateKey "+t.status+", CA certificate "+r.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,"fulfilled"===e.status&&"fulfilled"===t.status?this.latestIdentityUpdate={certificate:e.value,privateKey:t.value}:this.latestIdentityUpdate=null,"fulfilled"===r.status?this.latestCaUpdate={caCertificate:r.value}:this.latestCaUpdate=null;for(const e of this.identityListeners)e(this.latestIdentityUpdate);for(const e of this.caListeners)e(this.latestCaUpdate)}}),o("File watcher initiated certificate update"))}maybeStartWatchingFiles(){if(!this.refreshTimer){const e=this.lastUpdateTime?(new Date).getTime()-this.lastUpdateTime.getTime():1/0;e>this.config.refreshIntervalMs&&this.updateCertificates(),e>2*this.config.refreshIntervalMs&&(this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0),this.refreshTimer=setInterval(()=>this.updateCertificates(),this.config.refreshIntervalMs),o("File watcher started watching")}}maybeStopWatchingFiles(){0===this.caListeners.size&&0===this.identityListeners.size&&(this.fileResultPromise=null,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null))}addCaCertificateListener(e){this.caListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestCaUpdate&&process.nextTick(e,this.latestCaUpdate)}removeCaCertificateListener(e){this.caListeners.delete(e),this.maybeStopWatchingFiles()}addIdentityCertificateListener(e){this.identityListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestIdentityUpdate&&process.nextTick(e,this.latestIdentityUpdate)}removeIdentityCertificateListener(e){this.identityListeners.delete(e),this.maybeStopWatchingFiles()}}},5870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(8451),i=r(1430),o=r(7346),a=r(9048),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:c,parentSchema:l,it:d}=e,{oneOf:u}=l;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=c.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),f=t.const("tag",n._`${r}${(0,n.getProperty)(h)}`);function m(r){const s=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},s);return e.mergeEvaluated(i,n.Name),s}t.if(n._`typeof ${f} == "string"`,()=>function(){const r=function(){var e;const t={},r=s(l);let n=!0;for(let t=0;t<u.length;t++){let l=u[t];if((null==l?void 0:l.$ref)&&!(0,a.schemaHasRulesButRef)(l,d.self.RULES)){const e=l.$ref;if(l=i.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,e),l instanceof i.SchemaEnv&&(l=l.schema),void 0===l)throw new o.default(d.opts.uriResolver,d.baseId,e)}const p=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);n=n&&(r||s(l)),c(p,t)}if(!n)throw new Error(`discriminator: "${h}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(h)}function c(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const r of e.enum)p(r,t)}}function p(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${f} === ${e}`),t.assign(p,m(r[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}(),()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:f,tagName:h})),e.ok(p)}};t.default=c},5885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(2104);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i||(t.UsedValueState=i={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class a extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=a;const c=n._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?c:n.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:s}=n,i=null!==(r=t.key)&&void 0!==r?r:t.ref;let o=this._values[s];if(o){const e=o.get(i);if(e)return e}else o=this._values[s]=new Map;o.set(i,n);const a=this._scope[s]||(this._scope[s]=[]),c=a.length;return a[c]=t.ref,n.setValue(t,{property:s,itemIndex:c}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,o={},a){let c=n.nil;for(const l in e){const d=e[l];if(!d)continue;const u=o[l]=o[l]||new Map;d.forEach(e=>{if(u.has(e))return;u.set(e,i.Started);let o=r(e);if(o){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;c=n._`${c}${r} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new s(e);c=n._`${c}${o}${this.opts._n}`}u.set(e,i.Completed)})}return c}}},5943:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},s=this&&this.__esDecorate||function(e,t,r,n,s,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,l="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in n)f[m]="access"===m?{}:n[m];for(var m in n.access)f.access[m]=n.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var g=(0,r[p])("accessor"===c?{get:u.get,set:u.set}:u[l],f);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=o(g.get))&&(u.get=a),(a=o(g.set))&&(u.set=a),(a=o(g.init))&&s.unshift(a)}else(a=o(g))&&("field"===c?s.unshift(a):u[l]=a)}d&&Object.defineProperty(d,n.name,u),h=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const i=r(5675),o=r(9023),a=r(131),c=r(6860),l=r(8692),d=r(9302),u=r(267),h=r(8996),p=r(3822),f=r(9503),m=r(4892),g=~(1<<31),y=~(1<<31),v=~(1<<31),{HTTP2_HEADER_PATH:_}=i.constants,b=Buffer.from("max_age");function w(e){u.trace(a.LogVerbosity.DEBUG,"server_call",e)}function S(){}function E(e){return{code:a.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}let C=(()=>{var e;let t,r=[];return e=class{constructor(e){var t,s,i,o,a,c;this.boundPorts=(n(this,r),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new f.ChannelzTraceStub,this.callTracker=new f.ChannelzCallTrackerStub,this.listenerChildrenTracker=new f.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new f.ChannelzChildrenTrackerStub):(this.channelzTrace=new f.ChannelzTrace,this.callTracker=new f.ChannelzCallTracker,this.listenerChildrenTracker=new f.ChannelzChildrenTracker,this.sessionChildrenTracker=new f.ChannelzChildrenTracker),this.channelzRef=(0,f.registerChannelzServer)("server",()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:g,this.maxConnectionAgeGraceMs=null!==(s=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==s?s:g,this.keepaliveTimeMs=null!==(i=this.options["grpc.keepalive_time_ms"])&&void 0!==i?i:y,this.keepaliveTimeoutMs=null!==(o=this.options["grpc.keepalive_timeout_ms"])&&void 0!==o?o:2e4,this.sessionIdleTimeout=null!==(a=this.options["grpc.max_connection_idle_ms"])&&void 0!==a?a:v,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options?this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]:this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}),this.interceptors=null!==(c=this.options.interceptors)&&void 0!==c?c:[],this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(e){var t,r,n;const s=this.sessions.get(e),i=e.socket,o=i.remoteAddress?(0,h.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,a=i.localAddress?(0,h.stringToSubchannelAddress)(i.localAddress,i.localPort):null;let c;if(e.encrypted){const e=i,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();c={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else c=null;return{remoteAddress:o,localAddress:a,security:c,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:s.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}trace(e){u.trace(a.LogVerbosity.DEBUG,"server","("+this.channelzRef.id+") "+e)}keepaliveTrace(e){u.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw new Error("addService() requires two objects as arguments");const r=Object.keys(e);if(0===r.length)throw new Error("Cannot add an empty service to a server");r.forEach(r=>{const n=e[r];let s;s=n.requestStream?n.responseStream?"bidi":"clientStream":n.responseStream?"serverStream":"unary";let i,o=t[r];if(void 0===o&&"string"==typeof n.originalName&&(o=t[n.originalName]),i=void 0!==o?o.bind(t):function(e,t){const r=E(t);switch(e){case"unary":case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}(s,r),!1===this.register(n.path,i,n.responseSerialize,n.requestDeserialize,s))throw new Error(`Method handler for ${n.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw new Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{const r=e[t];this.unregister(r.path)})}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(e){return(0,f.registerChannelzSocket)((0,h.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(e){(0,f.unregisterChannelzRef)(e)}createHttp2Server(e){let t;if(e._isSecure()){const r=e._getConstructorOptions(),n=e._getSecureContextOptions(),s=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),r),n),{enableTrace:1===this.options["grpc-node.tls_enable_trace"]});let o=null!==n;this.trace("Initial credentials valid: "+o),t=i.createSecureServer(s),t.prependListener("connection",e=>{o||(this.trace("Dropped connection from "+JSON.stringify(e.address())+" due to unloaded credentials"),e.destroy())}),t.on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})});const c=e=>{if(e){const r=t;try{r.setSecureContext(e)}catch(t){u.log(a.LogVerbosity.ERROR,"Failed to set secure context with error "+t.message),e=null}}o=null!==e,this.trace("Post-update credentials valid: "+o)};e._addWatcher(c),t.on("close",()=>{e._removeWatcher(c)})}else t=i.createServer(this.commonServerOptions);return t.setTimeout(0,S),this._setupHandlers(t,e._getInterceptors()),t}bindOneAddress(e,t){this.trace("Attempting to bind "+(0,h.subchannelAddressToString)(e));const r=this.createHttp2Server(t.credentials);return new Promise((n,s)=>{const i=t=>{this.trace("Failed to bind "+(0,h.subchannelAddressToString)(e)+" with error "+t.message),n({port:"port"in e?e.port:1,error:t.message})};r.once("error",i),r.listen(e,()=>{const e=r.address();let s;s="string"==typeof e?{path:e}:{host:e.address,port:e.port};const o=this.experimentalRegisterListenerToChannelz(s);this.listenerChildrenTracker.refChild(o),this.http2Servers.set(r,{channelzRef:o,sessions:new Set,ownsChannelzRef:!0}),t.listeningServers.add(r),this.trace("Successfully bound "+(0,h.subchannelAddressToString)(s)),n({port:"port"in s?s.port:1}),r.removeListener("error",i)})})}async bindManyPorts(e,t){if(0===e.length)return{count:0,port:0,errors:[]};if((0,h.isTcpSubchannelAddress)(e[0])&&0===e[0].port){const r=await this.bindOneAddress(e[0],t);if(r.error){const n=await this.bindManyPorts(e.slice(1),t);return Object.assign(Object.assign({},n),{errors:[r.error,...n.errors]})}{const n=e.slice(1).map(e=>(0,h.isTcpSubchannelAddress)(e)?{host:e.host,port:r.port}:e),s=await Promise.all(n.map(e=>this.bindOneAddress(e,t))),i=[r,...s];return{count:i.filter(e=>void 0===e.error).length,port:r.port,errors:i.filter(e=>e.error).map(e=>e.error)}}}{const r=await Promise.all(e.map(e=>this.bindOneAddress(e,t)));return{count:r.filter(e=>void 0===e.error).length,port:r[0].port,errors:r.filter(e=>e.error).map(e=>e.error)}}}async bindAddressList(e,t){const r=await this.bindManyPorts(e,t);if(r.count>0)return r.count<e.length&&u.log(a.LogVerbosity.INFO,`WARNING Only ${r.count} addresses added out of total ${e.length} resolved`),r.port;{const t=`No address added out of total ${e.length} resolved`;throw u.log(a.LogVerbosity.ERROR,t),new Error(`${t} errors: [${r.errors.join(",")}]`)}}resolvePort(e){return new Promise((t,r)=>{let n=!1;(0,d.createResolver)(e,(s,i,o,a)=>{if(n)return!0;if(n=!0,!s.ok)return r(new Error(s.error.details)),!0;const c=[].concat(...s.value.map(e=>e.addresses));return 0===c.length?(r(new Error(`No addresses resolved for port ${e}`)),!0):(t(c),!0)},this.options).updateResolution()})}async bindPort(e,t){const r=await this.resolvePort(e);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");const n=await this.bindAddressList(r,t);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");return n}normalizePort(e){const t=(0,p.parseUri)(e);if(null===t)throw new Error(`Could not parse port "${e}"`);const r=(0,d.mapUriDefaultScheme)(t);if(null===r)throw new Error(`Could not get a default scheme for port "${e}"`);return r}bindAsync(e,t,r){if(this.shutdown)throw new Error("bindAsync called after shutdown");if("string"!=typeof e)throw new TypeError("port must be a string");if(null===t||!(t instanceof l.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw new TypeError("callback must be a function");this.trace("bindAsync port="+e);const n=this.normalizePort(e),s=(e,t)=>{process.nextTick(()=>r(e,t))};let i=this.boundPorts.get((0,p.uriToString)(n));if(i)return t._equals(i.credentials)?(i.cancelled=!1,void(i.completionPromise?i.completionPromise.then(e=>r(null,e),e=>r(e,0)):s(null,i.portNumber))):void s(new Error(`${e} already bound with incompatible credentials`),0);i={mapKey:(0,p.uriToString)(n),originalUri:n,completionPromise:null,cancelled:!1,portNumber:0,credentials:t,listeningServers:new Set};const o=(0,p.splitHostPort)(n.path),a=this.bindPort(n,i);i.completionPromise=a,0===(null==o?void 0:o.port)?a.then(e=>{const t={scheme:n.scheme,authority:n.authority,path:(0,p.combineHostPort)({host:o.host,port:e})};i.mapKey=(0,p.uriToString)(t),i.completionPromise=null,i.portNumber=e,this.boundPorts.set(i.mapKey,i),r(null,e)},e=>{r(e,0)}):(this.boundPorts.set(i.mapKey,i),a.then(e=>{i.completionPromise=null,i.portNumber=e,r(null,e)},e=>{r(e,0)}))}registerInjectorToChannelz(){return(0,f.registerChannelzSocket)("injector",()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(e,t,r=!1){if(null===e||!(e instanceof l.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");this.channelzEnabled&&this.listenerChildrenTracker.refChild(t);const n=this.createHttp2Server(e),s=new Set;return this.http2Servers.set(n,{channelzRef:t,sessions:s,ownsChannelzRef:r}),{injectConnection:e=>{n.emit("connection",e)},drain:e=>{var t,r;for(const e of s)this.closeSession(e);null===(r=(t=setTimeout(()=>{for(const e of s)e.destroy(i.constants.NGHTTP2_CANCEL)},e)).unref)||void 0===r||r.call(t)},destroy:()=>{this.closeServer(n);for(const e of s)this.closeSession(e)}}}createConnectionInjector(e){if(null===e||!(e instanceof l.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");const t=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(e,t,!0)}closeServer(e,t){this.trace("Closing server with address "+JSON.stringify(e.address()));const r=this.http2Servers.get(e);e.close(()=>{r&&r.ownsChannelzRef&&(this.listenerChildrenTracker.unrefChild(r.channelzRef),(0,f.unregisterChannelzRef)(r.channelzRef)),this.http2Servers.delete(e),null==t||t()})}closeSession(e,t){var r;this.trace("Closing session initiated by "+(null===(r=e.socket)||void 0===r?void 0:r.remoteAddress));const n=this.sessions.get(e),s=()=>{n&&(this.sessionChildrenTracker.unrefChild(n.ref),(0,f.unregisterChannelzRef)(n.ref)),null==t||t()};e.closed?queueMicrotask(s):e.close(s)}completeUnbind(e){for(const t of e.listeningServers){const r=this.http2Servers.get(t);if(this.closeServer(t,()=>{e.listeningServers.delete(t)}),r)for(const e of r.sessions)this.closeSession(e)}this.boundPorts.delete(e.mapKey)}unbind(e){this.trace("unbind port="+e);const t=this.normalizePort(e),r=(0,p.splitHostPort)(t.path);if(0===(null==r?void 0:r.port))throw new Error("Cannot unbind port 0");const n=this.boundPorts.get((0,p.uriToString)(t));n&&(this.trace("unbinding "+n.mapKey+" originally bound as "+(0,p.uriToString)(n.originalUri)),n.completionPromise?n.cancelled=!0:this.completeUnbind(n))}drain(e,t){var r,n;this.trace("drain port="+e+" graceTimeMs="+t);const s=this.normalizePort(e),o=(0,p.splitHostPort)(s.path);if(0===(null==o?void 0:o.port))throw new Error("Cannot drain port 0");const a=this.boundPorts.get((0,p.uriToString)(s));if(!a)return;const c=new Set;for(const e of a.listeningServers){const t=this.http2Servers.get(e);if(t)for(const e of t.sessions)c.add(e),this.closeSession(e,()=>{c.delete(e)})}null===(n=(r=setTimeout(()=>{for(const e of c)e.destroy(i.constants.NGHTTP2_CANCEL)},t)).unref)||void 0===n||n.call(r)}forceShutdown(){for(const e of this.boundPorts.values())e.cancelled=!0;this.boundPorts.clear();for(const e of this.http2Servers.keys())this.closeServer(e);this.sessions.forEach((e,t)=>{this.closeSession(t),t.destroy(i.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),(0,f.unregisterChannelzRef)(this.channelzRef),this.shutdown=!0}register(e,t,r,n,s){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2Servers.size||[...this.http2Servers.keys()].every(e=>!e.listening))throw new Error("server must be bound in order to start");if(!0===this.started)throw new Error("server is already started");this.started=!0}tryShutdown(e){var t;const r=t=>{(0,f.unregisterChannelzRef)(this.channelzRef),e(t)};let n=0;function s(){n--,0===n&&r()}this.shutdown=!0;for(const[e,r]of this.http2Servers.entries()){n++;const i=r.channelzRef.name;this.trace("Waiting for server "+i+" to close"),this.closeServer(e,()=>{this.trace("Server "+i+" finished closing"),s()});for(const e of r.sessions.keys()){n++;const r=null===(t=e.socket)||void 0===t?void 0:t.remoteAddress;this.trace("Waiting for session "+r+" to close"),this.closeSession(e,()=>{this.trace("Session "+r+" finished closing"),s()})}}0===n&&r()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const r=t[i.constants.HTTP2_HEADER_CONTENT_TYPE];return!("string"!=typeof r||!r.startsWith("application/grpc"))||(e.respond({[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){w("Received call to method "+e+" at address "+this.serverAddressString);const t=this.handlers.get(e);return void 0===t?(w("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){var n,s;const o=Object.assign({"grpc-status":null!==(n=e.code)&&void 0!==n?n:a.Status.INTERNAL,"grpc-message":e.details,[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},null===(s=e.metadata)||void 0===s?void 0:s.toHttp2Headers());t.respond(o,{endStream:!0}),this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()}_channelzHandler(e,t,r){this.onStreamOpened(t);const n=this.sessions.get(t.session);if(this.callTracker.addCallStarted(),null==n||n.streamTracker.addCallStarted(),!this._verifyContentType(t,r))return this.callTracker.addCallFailed(),void(null==n||n.streamTracker.addCallFailed());const s=r[_],i=this._retrieveHandler(s);if(!i)return void this._respondWithError(E(s),t,n);const o={addMessageSent:()=>{n&&(n.messagesSent+=1,n.lastMessageSentTimestamp=new Date)},addMessageReceived:()=>{n&&(n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date)},onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()},onStreamEnd:e=>{n&&(e?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed())}},c=(0,m.getServerInterceptingCall)([...e,...this.interceptors],t,r,o,i,this.options);this._runHandlerForCall(c,i)||(this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed(),c.sendStatus({code:a.Status.INTERNAL,details:`Unknown handler type: ${i.type}`}))}_streamHandler(e,t,r){if(this.onStreamOpened(t),!0!==this._verifyContentType(t,r))return;const n=r[_],s=this._retrieveHandler(n);if(!s)return void this._respondWithError(E(n),t,null);const i=(0,m.getServerInterceptingCall)([...e,...this.interceptors],t,r,null,s,this.options);this._runHandlerForCall(i,s)||i.sendStatus({code:a.Status.INTERNAL,details:`Unknown handler type: ${s.type}`})}_runHandlerForCall(e,t){const{type:r}=t;if("unary"===r)!async function(e,t){let r,n;function s(t,r,n,s){t?e.sendStatus((0,c.serverErrorToStatus)(t,n)):e.sendMessage(r,()=>{e.sendStatus({code:a.Status.OK,details:"OK",metadata:null!=n?n:null})})}let i=null;e.start({onReceiveMetadata(t){n=t,e.startRead()},onReceiveMessage(r){i?e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(i=r,e.startRead())},onReceiveHalfClose(){if(i){r=new c.ServerWritableStreamImpl(t.path,e,n,i);try{t.func(r,s)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"))}})}(e,t);else if("clientStream"===r)!function(e,t){let r;function n(t,r,n,s){t?e.sendStatus((0,c.serverErrorToStatus)(t,n)):e.sendMessage(r,()=>{e.sendStatus({code:a.Status.OK,details:"OK",metadata:null!=n?n:null})})}e.start({onReceiveMetadata(s){r=new c.ServerDuplexStreamImpl(t.path,e,s);try{t.func(r,n)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t);else if("serverStream"===r)!function(e,t){let r,n,s=null;e.start({onReceiveMetadata(t){n=t,e.startRead()},onReceiveMessage(r){s?e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(s=r,e.startRead())},onReceiveHalfClose(){if(s){r=new c.ServerWritableStreamImpl(t.path,e,n,s);try{t.func(r)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t);else{if("bidi"!==r)return!1;!function(e,t){let r;e.start({onReceiveMetadata(n){r=new c.ServerDuplexStreamImpl(t.path,e,n);try{t.func(r)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t)}return!0}_setupHandlers(e,t){if(null===e)return;const r=e.address();let n="null";r&&(n="string"==typeof r?r:r.address+":"+r.port),this.serverAddressString=n;const s=this.channelzEnabled?this._channelzHandler:this._streamHandler,i=this.channelzEnabled?this._channelzSessionHandler(e):this._sessionHandler(e);e.on("stream",s.bind(this,t)),e.on("session",i)}_sessionHandler(e){return t=>{var r,n;null===(r=this.http2Servers.get(e))||void 0===r||r.sessions.add(t);let s=null,o=null,a=null,c=!1;const l=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==g){const e=this.maxConnectionAgeMs/10,r=Math.random()*e*2-e;s=setTimeout(()=>{var e,r;c=!0,this.trace("Connection dropped by max connection age: "+(null===(e=t.socket)||void 0===e?void 0:e.remoteAddress));try{t.goaway(i.constants.NGHTTP2_NO_ERROR,~(1<<31),b)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==g&&(o=setTimeout(()=>{t.destroy()},this.maxConnectionAgeGraceMs),null===(r=o.unref)||void 0===r||r.call(o))},this.maxConnectionAgeMs+r),null===(n=s.unref)||void 0===n||n.call(s)}const d=()=>{a&&(clearTimeout(a),a=null)},u=()=>!t.destroyed&&this.keepaliveTimeMs<y&&this.keepaliveTimeMs>0;let h;const p=()=>{var e;u()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),a=setTimeout(()=>{d(),h()},this.keepaliveTimeMs),null===(e=a.unref)||void 0===e||e.call(a))};h=()=>{var e;if(!u())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{t.ping((e,r,n)=>{d(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),c=!0,t.destroy()):(this.keepaliveTrace("Received ping response"),p())})||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r)return this.keepaliveTrace("Ping send failed: "+r),this.trace("Connection dropped due to ping send error: "+r),c=!0,void t.destroy();a=setTimeout(()=>{d(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),c=!0,t.destroy()},this.keepaliveTimeoutMs),null===(e=a.unref)||void 0===e||e.call(a)},p(),t.on("close",()=>{var r,n;c||this.trace(`Connection dropped by client ${null===(r=t.socket)||void 0===r?void 0:r.remoteAddress}`),s&&clearTimeout(s),o&&clearTimeout(o),d(),null!==l&&(clearTimeout(l.timeout),this.sessionIdleTimeouts.delete(t)),null===(n=this.http2Servers.get(e))||void 0===n||n.sessions.delete(t)})}}_channelzSessionHandler(e){return t=>{var r,n,s,o;const a=(0,f.registerChannelzSocket)(null!==(n=null===(r=t.socket)||void 0===r?void 0:r.remoteAddress)&&void 0!==n?n:"unknown",this.getChannelzSessionInfo.bind(this,t),this.channelzEnabled),c={ref:a,streamTracker:new f.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};null===(s=this.http2Servers.get(e))||void 0===s||s.sessions.add(t),this.sessions.set(t,c);const l=`${t.socket.remoteAddress}:${t.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+l),this.trace("Connection established by client "+l),this.sessionChildrenTracker.refChild(a);let d=null,u=null,h=null,p=!1;const m=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==g){const e=this.maxConnectionAgeMs/10,r=Math.random()*e*2-e;d=setTimeout(()=>{var e;p=!0,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+l);try{t.goaway(i.constants.NGHTTP2_NO_ERROR,~(1<<31),b)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==g&&(u=setTimeout(()=>{t.destroy()},this.maxConnectionAgeGraceMs),null===(e=u.unref)||void 0===e||e.call(u))},this.maxConnectionAgeMs+r),null===(o=d.unref)||void 0===o||o.call(d)}const v=()=>{h&&(clearTimeout(h),h=null)},_=()=>!t.destroyed&&this.keepaliveTimeMs<y&&this.keepaliveTimeMs>0;let w;const S=()=>{var e;_()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),h=setTimeout(()=>{v(),w()},this.keepaliveTimeMs),null===(e=h.unref)||void 0===e||e.call(h))};w=()=>{var e;if(!_())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{t.ping((e,r,n)=>{v(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+e.message+" return in "+r),p=!0,t.destroy()):(this.keepaliveTrace("Received ping response"),S())})||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r)return this.keepaliveTrace("Ping send failed: "+r),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+r),p=!0,void t.destroy();c.keepAlivesSent+=1,h=setTimeout(()=>{v(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+l),p=!0,t.destroy()},this.keepaliveTimeoutMs),null===(e=h.unref)||void 0===e||e.call(h)},S(),t.on("close",()=>{var r;p||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+l),this.sessionChildrenTracker.unrefChild(a),(0,f.unregisterChannelzRef)(a),d&&clearTimeout(d),u&&clearTimeout(u),v(),null!==m&&(clearTimeout(m.timeout),this.sessionIdleTimeouts.delete(t)),null===(r=this.http2Servers.get(e))||void 0===r||r.sessions.delete(t),this.sessions.delete(t)})}}enableIdleTimeout(e){var t,r;if(this.sessionIdleTimeout>=v)return null;const n={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,e),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,e)};null===(r=(t=n.timeout).unref)||void 0===r||r.call(t),this.sessionIdleTimeouts.set(e,n);const{socket:s}=e;return this.trace("Enable idle timeout for "+s.remoteAddress+":"+s.remotePort),n}onIdleTimeout(e,t){const{socket:r}=t,n=e.sessionIdleTimeouts.get(t);void 0!==n&&0===n.activeStreams&&(Date.now()-n.lastIdle>=e.sessionIdleTimeout?(e.trace("Session idle timeout triggered for "+(null==r?void 0:r.remoteAddress)+":"+(null==r?void 0:r.remotePort)+" last idle at "+n.lastIdle),e.closeSession(t)):n.timeout.refresh())}onStreamOpened(e){const t=e.session,r=this.sessionIdleTimeouts.get(t);r&&(r.activeStreams+=1,e.once("close",r.onClose))}onStreamClose(e){var t,r;const n=this.sessionIdleTimeouts.get(e);n&&(n.activeStreams-=1,0===n.activeStreams&&(n.lastIdle=Date.now(),n.timeout.refresh(),this.trace("Session onStreamClose"+(null===(t=e.socket)||void 0===t?void 0:t.remoteAddress)+":"+(null===(r=e.socket)||void 0===r?void 0:r.remotePort)+" at "+n.lastIdle)))}},(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;t=[function(e,t){return o.deprecate(e,"Calling start() is no longer necessary. It can be safely omitted.")}],s(e,null,t,{kind:"method",name:"start",static:!1,private:!1,access:{has:e=>"start"in e,get:e=>e.start},metadata:n},null,r),n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),e})();t.Server=C},5962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(4971),s=r(6596),i=r(6670),o={message:"boolean schema is false"};function a(e,t){const{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(i,o,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign(s._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),a(e)):r.var(t,!0)}},6067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=function(e,t){return s.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}};const n=r(131),s=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS]},6158:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,s=0;for(;s<t;)n++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},6166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i=r(1085),o=r(7065),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,(0,s.alwaysValidSchema)(n,t)||(a?(0,o.validateAdditionalItems)(e,a):e.ok((0,i.validateArray)(e)))}};t.default=a},6237:(e,t,r)=>{"use strict";e.exports=c;var n,s=r(3610),i=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new n(e):d(e)})(e)}:d};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=s.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=u(),n._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},6308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minDeadline=function(...e){let t=1/0;for(const r of e){const e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t},t.getDeadlineTimeoutString=function(e){const t=(new Date).getTime();e instanceof Date&&(e=e.getTime());const n=Math.max(e-t,0);for(const[e,t]of r){const r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw new Error("Deadline is too far in the future")},t.getRelativeTimeout=function(e){const t=(e instanceof Date?e.getTime():e)-(new Date).getTime();return t<0?0:t>n?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{const t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}},t.formatDateDifference=function(e,t){return((t.getTime()-e.getTime())/1e3).toFixed(3)+"s"};const r=[["m",1],["S",1e3],["M",6e4],["H",36e5]],n=2147483647},6340:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFileDescriptorSetFromObject=t.loadFileDescriptorSetFromBuffer=t.fromJSON=t.loadSync=t.load=t.IdempotencyLevel=t.isAnyExtension=t.Long=void 0;const n=r(2028),s=r(2549),i=r(5407),o=r(1238),a=r(4442);var c;t.Long=a,t.isAnyExtension=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(c=t.IdempotencyLevel||(t.IdempotencyLevel={}));const l={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function d(e,t){const r=(n=t,i=e.name,""===n?i:n+"."+i);var n,i;return function(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}(e)?[[r,e]]:function(e){return e instanceof s.Namespace||e instanceof s.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>d(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function u(e,t){return function(r){return e.toObject(e.decode(r),t)}}function h(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const r=e.fromObject(t);return e.encode(r).finish()}}function p(e){return(e||[]).reduce((e,t)=>{for(const[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:c.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function f(e,t,r,s){const i=e.resolvedRequestType,o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:h(i),requestDeserialize:u(i,r),responseSerialize:h(o),responseDeserialize:u(o,r),originalName:n(e.name),requestType:m(i,s),responseType:m(o,s),options:p(e.parsedOptions)}}function m(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function g(e,t,r,n){if(e instanceof s.Service)return function(e,t,r,n){const s={};for(const i of e.methodsArray)s[i.name]=f(i,t,r,n);return s}(e,t,r,n);if(e instanceof s.Type)return m(e,n);if(e instanceof s.Enum)return function(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}(e,n);throw new Error("Type mismatch in reflection object handling")}function y(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file.map(e=>Buffer.from(i.FileDescriptorProto.encode(e).finish()));for(const[s,i]of d(e,""))r[s]=g(i,s,t,n);return r}function v(e,t){t=t||{};const r=s.Root.fromDescriptor(e);return r.resolveAll(),y(r,t)}t.load=function(e,t){return(0,o.loadProtosWithOptions)(e,t).then(e=>y(e,t))},t.loadSync=function(e,t){return y((0,o.loadProtosWithOptionsSync)(e,t),t)},t.fromJSON=function(e,t){t=t||{};const r=s.Root.fromJSON(e);return r.resolveAll(),y(r,t)},t.loadFileDescriptorSetFromBuffer=function(e,t){return v(i.FileDescriptorSet.decode(e),t)},t.loadFileDescriptorSetFromObject=function(e,t){return v(i.FileDescriptorSet.fromObject(e),t)},(0,o.addCommonProtos)()},6359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${i} ${s}`)}};t.default=s},6434:(e,t,r)=>{"use strict";var n=t,s=r(2551);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}},6461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const n=r(2394),s=r(3789),i=s.operators,o={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},a={message:({keyword:e,schemaCode:t})=>s.str`should be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${o[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(o),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:r,schemaCode:i,keyword:a,it:c}=e,{opts:l,self:d}=c;if(!l.validateFormats)return;const u=new n.KeywordCxt(c,d.RULES.all.format.definition,"format");function h(e){return s._`${e}.compare(${r}, ${i}) ${o[a].fail} 0`}u.$data?function(){const r=t.scopeValue("formats",{ref:d.formats,code:l.code.formats}),n=t.const("fmt",s._`${r}[${u.schemaCode}]`);e.fail$data((0,s.or)(s._`typeof ${n} != "object"`,s._`${n} instanceof RegExp`,s._`typeof ${n}.compare != "function"`,h(n)))}():function(){const r=u.schema,n=d.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw new Error(`"${a}": format "${r}" does not define "compare" function`);const i=t.scopeValue("formats",{key:r,ref:n,code:l.code.formats?s._`${l.code.formats}${(0,s.getProperty)(r)}`:void 0});e.fail$data(h(i))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},6486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeafLoadBalancer=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0,t.shuffled=g,t.setup=function(){(0,n.registerLoadBalancerType)(p,v,f),(0,n.registerDefaultLoadBalancerType)(p)};const n=r(8923),s=r(463),i=r(178),o=r(8996),a=r(267),c=r(131),l=r(8996),d=r(9278),u=r(5034);function h(e){a.trace(c.LogVerbosity.DEBUG,"pick_first",e)}const p="pick_first";class f{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return p}toJsonObject(){return{[p]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new f(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=f;class m{constructor(e){this.subchannel=e}pick(e){return{pickResultType:i.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function g(e){const t=e.slice();for(let e=t.length-1;e>1;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}const y="grpc-node.internal.pick-first.report_health_status";class v{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=s.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,s)=>{this.onSubchannelStateUpdate(e,t,r,s)},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=!1,this.reportHealthStatus=!1,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.latestResolutionNote="",this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}resetChildrenReportedTF(){this.children.every(e=>e.hasReportedTransientFailure=!1)}calculateAndReportNewState(){var e;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){const e=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.READY,new m(this.currentPick),null);else if(0===(null===(e=this.latestAddressList)||void 0===e?void 0:e.length)){const e=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:e}),e)}else if(0===this.children.length)this.updateState(s.ConnectivityState.IDLE,new i.QueuePicker(this),null);else if(this.stickyTransientFailureMode){const e=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.CONNECTING,new i.QueuePicker(this),null)}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF())if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode)this.calculateAndReportNewState();else{this.stickyTransientFailureMode=!0;for(const{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){null!==this.currentPick&&(this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null)}onSubchannelStateUpdate(e,t,r,n){var i;if(null===(i=this.currentPick)||void 0===i?void 0:i.realSubchannelEquals(e))r!==s.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState());else for(const[t,i]of this.children.entries())if(e.realSubchannelEquals(i.subchannel))return r===s.ConnectivityState.READY&&this.pickSubchannel(i.subchannel),r===s.ConnectivityState.TRANSIENT_FAILURE&&(i.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),void i.subchannel.startConnecting()}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(const[t,r]of this.children.entries())if(t>=e){const e=r.subchannel.getConnectivityState();if(e===s.ConnectivityState.IDLE||e===s.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.maybeEnterStickyTransientFailureMode()}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===s.ConnectivityState.IDLE&&(h("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null===(t=this.children[e])||void 0===t||t.subchannel.startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},250),null===(r=(t=this.connectionDelayTimeout).unref)||void 0===r||r.call(t)}pickSubchannel(e){h("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),e.addConnectivityStateListener(this.subchannelStateListener),e.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=e,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState()}updateState(e,t,r){h(s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children)e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[]}connectToAddressList(e,t){h("connectToAddressList(["+e.map(e=>(0,o.subchannelAddressToString)(e))+"])");const r=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,t),hasReportedTransientFailure:!1}));for(const{subchannel:e}of r)if(e.getConnectivityState()===s.ConnectivityState.READY)return void this.pickSubchannel(e);for(const{subchannel:e}of r)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());this.resetSubchannelList(),this.children=r;for(const{subchannel:e}of this.children)e.addConnectivityStateListener(this.subchannelStateListener);for(const e of this.children)e.subchannel.getConnectivityState()===s.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t,r,n){if(!(t instanceof f))return!1;if(!e.ok)return 0===this.children.length&&null===this.currentPick&&this.channelControlHelper.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new i.UnavailablePicker(e.error),e.error.details),!0;let a=e.value;this.reportHealthStatus=r[y],t.getShuffleAddressList()&&(a=g(a));const c=[].concat(...a.map(e=>e.addresses));h("updateAddressList(["+c.map(e=>(0,o.subchannelAddressToString)(e))+"])");const u=function(e){if(0===e.length)return[];const t=[],r=[],n=[],s=(0,l.isTcpSubchannelAddress)(e[0])&&(0,d.isIPv6)(e[0].host);for(const t of e)(0,l.isTcpSubchannelAddress)(t)&&(0,d.isIPv6)(t.host)?r.push(t):n.push(t);const i=s?r:n,o=s?n:r;for(let e=0;e<Math.max(i.length,o.length);e++)e<i.length&&t.push(i[e]),e<o.length&&t.push(o[e]);return t}(c);return this.latestAddressList=u,this.latestOptions=r,this.connectToAddressList(u,r),this.latestResolutionNote=n,c.length>0||(this.lastError="No addresses resolved",!1)}exitIdle(){this.currentState===s.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList,this.latestOptions)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return p}}t.PickFirstLoadBalancer=v;const _=new f(!1);t.LeafLoadBalancer=class{constructor(e,t,r,o){this.endpoint=e,this.options=r,this.resolutionNote=o,this.latestState=s.ConnectivityState.IDLE;const a=(0,n.createChildChannelControlHelper)(t,{updateState:(e,r,n)=>{this.latestState=e,this.latestPicker=r,t.updateState(e,r,n)}});this.pickFirstBalancer=new v(a),this.latestPicker=new i.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList((0,u.statusOrFromValue)([this.endpoint]),_,Object.assign(Object.assign({},this.options),{[y]:!0}),this.resolutionNote)}updateEndpoint(e,t){this.options=t,this.endpoint=e,this.latestState!==s.ConnectivityState.IDLE&&this.startConnecting()}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}}},6501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},6519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(6596),s=r(9048),i=r(1980),o={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return a(e,"additionalItems",t);r.items=!0,(0,s.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}};function a(e,t,r=e.schema){const{gen:i,parentSchema:o,data:a,keyword:c,it:l}=e;!function(e){const{opts:n,errSchemaPath:i}=l,o=r.length,a=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(n.strictTuples&&!a){const e=`"${c}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,s.checkStrictMode)(l,e,n.strictTuples)}}(o),l.opts.unevaluated&&r.length&&!0!==l.items&&(l.items=s.mergeEvaluated.items(i,r.length,l.items));const d=i.name("valid"),u=i.const("len",n._`${a}.length`);r.forEach((t,r)=>{(0,s.alwaysValidSchema)(l,t)||(i.if(n._`${u} > ${r}`,()=>e.subschema({keyword:c,schemaProp:r,dataProp:r},d)),e.ok(d))})}t.validateTuple=a,t.default=o},6545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(4026).default];t.default=n},6596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(3231),s=r(6692);var i=r(3231);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var o=r(6692);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class c extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class l extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=N(this.rhs,e,t),this}get names(){return x(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class d extends l{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=N(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const s=r[n];s.optimizeNames(e,t)||(R(e,s.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>O(e,t.names),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class v extends g{}v.kind="else";class _ extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(I(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=N(this.condition,e,t),this}get names(){const e=super.names;return x(e,this.condition),this.else&&O(e,this.else.names),e}}_.kind="if";class b extends g{}b.kind="for";class w extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=N(this.iteration,e,t),this}get names(){return O(super.names,this.iteration.names)}}class S extends b{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=x(super.names,this.from);return x(e,this.to)}}class E extends b{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=N(this.iterable,e,t),this}get names(){return O(super.names,this.iterable.names)}}class C extends g{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class T extends m{render(e){return"return "+super.render(e)}}T.kind="return";class k extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&O(e,this.catch.names),this.finally&&O(e,this.finally.names),e}}class P extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}P.kind="catch";class $ extends g{render(e){return"finally"+super.render(e)}}function O(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function x(e,t){return t instanceof n._CodeOrName?O(e,t.names):e}function N(e,t,r){return e instanceof n.Name?i(e):(s=e)instanceof n._Code&&s._items.some(e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str])?new n._Code(e._items.reduce((e,t)=>(t instanceof n.Name&&(t=i(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e),[])):e;var s;function i(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function R(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function I(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${z(e)}`}$.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const s=this._scope.toName(t);return void 0!==r&&n&&(this._constants[s.str]=r),this._leafNode(new c(e,s,r)),s}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new l(e,t,r))}add(e,r){return this._leafNode(new d(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[r,s]of e)t.length>1&&t.push(","),t.push(r),(r!==s||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,s));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new _(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(_,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,r,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const o=this._scope.toName(e);return this._for(new S(i,o,t,r),()=>n(o))}forOf(e,t,r,i=s.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,t=>{this.var(o,n._`${e}[${t}]`),r(o)})}return this._for(new E("of",i,o,t),()=>r(o))}forIn(e,t,r,i=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const o=this._scope.toName(e);return this._for(new E("in",i,o,t),()=>r(o))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new T;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new k;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new P(e),t(e)}return r&&(this._currNode=n.finally=new $,this.code(r)),this._endBlockNode(P,$)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,s){return this._blockNode(new C(e,t,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=I;const A=j(t.operators.AND);t.and=function(...e){return e.reduce(A)};const M=j(t.operators.OR);function j(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${z(t)} ${e} ${z(r)}`}function z(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(M)}},6636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7083),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((t,r)=>{if((0,n.alwaysValidSchema)(s,t))return;const o=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(o)})}};t.default=s},6670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=s},6692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(3231);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i||(t.UsedValueState=i={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class a extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=a;const c=n._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?c:n.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:s}=n,i=null!==(r=t.key)&&void 0!==r?r:t.ref;let o=this._values[s];if(o){const e=o.get(i);if(e)return e}else o=this._values[s]=new Map;o.set(i,n);const a=this._scope[s]||(this._scope[s]=[]),c=a.length;return a[c]=t.ref,n.setValue(t,{property:s,itemIndex:c}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,o={},a){let c=n.nil;for(const l in e){const d=e[l];if(!d)continue;const u=o[l]=o[l]||new Map;d.forEach(e=>{if(u.has(e))return;u.set(e,i.Started);let o=r(e);if(o){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;c=n._`${c}${r} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new s(e);c=n._`${c}${o}${this.opts._n}`}u.set(e,i.Completed)})}return c}}},6700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PORT=void 0,t.setup=function(){(0,n.registerResolver)("dns",g),(0,n.registerDefaultScheme)("dns")};const n=r(9302),s=r(2250),i=r(5656),o=r(131),a=r(5034),c=r(4097),l=r(267),d=r(131),u=r(3822),h=r(9278),p=r(3956),f=r(883);function m(e){l.trace(d.LogVerbosity.DEBUG,"dns_resolver",e)}t.DEFAULT_PORT=443;class g{constructor(e,r,n){var i,a,l;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,this.alternativeResolver=new s.promises.Resolver,m("Resolver constructed for target "+(0,u.uriToString)(e)),e.authority&&this.alternativeResolver.setServers([e.authority]);const d=(0,u.splitHostPort)(e.path);null===d?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(d.host)||(0,h.isIPv6)(d.host)?(this.ipResult=[{addresses:[{host:d.host,port:null!==(i=d.port)&&void 0!==i?i:t.DEFAULT_PORT}]}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=d.host,this.port=null!==(a=d.port)&&void 0!==a?a:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,u.uriToString)(this.target)}`,metadata:new c.Metadata};const f={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},f),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(l=n["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==l?l:3e4,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult)return this.returnedIpResult||(m("Returning IP address for target "+(0,u.uriToString)(this.target)),setImmediate(()=>{this.listener((0,a.statusOrFromValue)(this.ipResult),{},null,"")}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),void this.stopNextResolutionTimer();if(null===this.dnsHostname)m("Failed to parse DNS address "+(0,u.uriToString)(this.target)),setImmediate(()=>{this.listener((0,a.statusOrFromError)({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,u.uriToString)(this.target)}`}),{},null,"")}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.latestLookupResult=(0,a.statusOrFromValue)(e.map(e=>({addresses:[e]})));const t="["+e.map(e=>e.host+":"+e.port).join(",")+"]";m("Resolved addresses for target "+(0,u.uriToString)(this.target)+": "+t);const r=this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"");this.handleHealthStatus(r)},e=>{null!==this.pendingLookupPromise&&(m("Resolution error for target "+(0,u.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener((0,a.statusOrFromError)(this.defaultResolutionError),{},this.latestServiceConfigResult,""))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=this.resolveTxt(e),this.pendingTxtPromise.then(e=>{if(null===this.pendingTxtPromise)return;let t;this.pendingTxtPromise=null;try{t=(0,i.extractAndSelectServiceConfig)(e,this.percentage),this.latestServiceConfigResult=t?(0,a.statusOrFromValue)(t):null}catch(e){this.latestServiceConfigResult=(0,a.statusOrFromError)({code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`})}null!==this.latestLookupResult&&this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"")},e=>{}))}}handleHealthStatus(e){e?(this.backoff.stop(),this.backoff.reset()):this.continueResolving=!0}async lookup(e){if(f.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){m("Using alternative DNS resolver.");const t=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(t.every(e=>"rejected"===e.status))throw new Error(t[0].reason);return t.reduce((e,t)=>"fulfilled"===t.status?[...e,...t.value]:e,[]).map(e=>({host:e,port:+this.port}))}return(await s.promises.lookup(e,{all:!0})).map(e=>({host:e.address,port:+this.port}))}async resolveTxt(e){return f.GRPC_NODE_USE_ALTERNATIVE_RESOLVER?(m("Using alternative DNS resolver."),this.alternativeResolver.resolveTxt(e)):s.promises.resolveTxt(e)}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs),null===(t=(e=this.nextResolutionTimer).unref)||void 0===t||t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?m('resolution update delayed by "min time between resolutions" rate limit'):m("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}},6710:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},6711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,a=t.let("res"),c=o?n._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:n._`${a} !== parseInt(${a})`;e.fail$data(n._`(${s} === 0 || (${a} = ${r}/${s}, ${c}))`)}};t.default=s},6735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=s},6787:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OrderedMap:()=>u});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function e(e,t,r){void 0===r&&(r=1),this.t=void 0,this.i=void 0,this.h=void 0,this.u=e,this.o=t,this.l=r}return e.prototype.v=function(){var e=this,t=e.h.h===e;if(t&&1===e.l)e=e.i;else if(e.t)for(e=e.t;e.i;)e=e.i;else{if(t)return e.h;for(var r=e.h;r.t===e;)r=(e=r).h;e=r}return e},e.prototype.p=function(){var e=this;if(e.i){for(e=e.i;e.t;)e=e.t;return e}for(var t=e.h;t.i===e;)t=(e=t).h;return e.i!==t?t:e},e.prototype.T=function(){var e=this.h,t=this.i,r=t.t;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.t=this,this.h=t,this.i=r,r&&(r.h=this),t},e.prototype.I=function(){var e=this.h,t=this.t,r=t.i;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.i=this,this.h=t,this.t=r,r&&(r.h=this),t},e}(),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.O=1,t}return s(t,e),t.prototype.T=function(){var t=e.prototype.T.call(this);return this.M(),t.M(),t},t.prototype.I=function(){var t=e.prototype.I.call(this);return this.M(),t.M(),t},t.prototype.M=function(){this.O=1,this.t&&(this.O+=this.t.O),this.i&&(this.O+=this.i.O)},t}(i),a=function(){function e(e){void 0===e&&(e=0),this.iteratorType=e}return e.prototype.equals=function(e){return this.C===e.C},e}();function c(){throw new RangeError("Iterator access denied!")}var l=function(e){function t(t,r){void 0===t&&(t=function(e,t){return e<t?-1:e>t?1:0}),void 0===r&&(r=!1);var n=e.call(this)||this;return n.N=void 0,n.g=t,n.enableIndex=r,n.S=r?o:i,n.A=new n.S,n}return s(t,e),t.prototype.m=function(e,t){for(var r=this.A;e;){var n=this.g(e.u,t);if(n<0)e=e.i;else{if(!(n>0))return e;r=e,e=e.t}}return r},t.prototype.B=function(e,t){for(var r=this.A;e;)this.g(e.u,t)<=0?e=e.i:(r=e,e=e.t);return r},t.prototype.j=function(e,t){for(var r=this.A;e;){var n=this.g(e.u,t);if(n<0)r=e,e=e.i;else{if(!(n>0))return e;e=e.t}}return r},t.prototype.k=function(e,t){for(var r=this.A;e;)this.g(e.u,t)<0?(r=e,e=e.i):e=e.t;return r},t.prototype.R=function(e){for(;;){var t,r=e.h;if(r===this.A)return;if(1===e.l)return void(e.l=0);if(e===r.t)if(1===(t=r.i).l)t.l=0,r.l=1,r===this.N?this.N=r.T():r.T();else{if(t.i&&1===t.i.l)return t.l=r.l,r.l=0,t.i.l=0,void(r===this.N?this.N=r.T():r.T());t.t&&1===t.t.l?(t.l=1,t.t.l=0,t.I()):(t.l=1,e=r)}else if(1===(t=r.t).l)t.l=0,r.l=1,r===this.N?this.N=r.I():r.I();else{if(t.t&&1===t.t.l)return t.l=r.l,r.l=0,t.t.l=0,void(r===this.N?this.N=r.I():r.I());t.i&&1===t.i.l?(t.l=1,t.i.l=0,t.T()):(t.l=1,e=r)}}},t.prototype.G=function(e){if(1!==this._){for(var t=e;t.t||t.i;){if(t.i)for(t=t.i;t.t;)t=t.t;else t=t.t;var r=e.u;e.u=t.u,t.u=r;var n=e.o;e.o=t.o,t.o=n,e=t}this.A.t===t?this.A.t=t.h:this.A.i===t&&(this.A.i=t.h),this.R(t);var s=t.h;if(t===s.t?s.t=void 0:s.i=void 0,this._-=1,this.N.l=0,this.enableIndex)for(;s!==this.A;)s.O-=1,s=s.h}else this.clear()},t.prototype.P=function(e){for(var t="number"==typeof e?e:void 0,r="function"==typeof e?e:void 0,n=void 0===e?[]:void 0,s=0,i=this.N,o=[];o.length||i;)if(i)o.push(i),i=i.t;else{if(i=o.pop(),s===t)return i;n&&n.push(i),r&&r(i,s,this),s+=1,i=i.i}return n},t.prototype.q=function(e){for(;;){var t=e.h;if(0===t.l)return;var r=t.h;if(t===r.t){if((n=r.i)&&1===n.l){if(n.l=t.l=0,r===this.N)return;r.l=1,e=r;continue}if(e!==t.i)return t.l=0,r===this.N?this.N=r.I():r.I(),void(r.l=1);e.l=0,e.t&&(e.t.h=t),e.i&&(e.i.h=r),t.i=e.t,r.t=e.i,e.t=t,e.i=r,r===this.N?(this.N=e,this.A.h=e):(s=r.h).t===r?s.t=e:s.i=e,e.h=r.h,t.h=e,r.h=e,r.l=1}else{var n,s;if((n=r.t)&&1===n.l){if(n.l=t.l=0,r===this.N)return;r.l=1,e=r;continue}if(e!==t.t)return t.l=0,r===this.N?this.N=r.T():r.T(),void(r.l=1);e.l=0,e.t&&(e.t.h=r),e.i&&(e.i.h=t),r.i=e.t,t.t=e.i,e.t=r,e.i=t,r===this.N?(this.N=e,this.A.h=e):(s=r.h).t===r?s.t=e:s.i=e,e.h=r.h,t.h=e,r.h=e,r.l=1}return void(this.enableIndex&&(t.M(),r.M(),e.M()))}},t.prototype.D=function(e,t,r){if(void 0===this.N)return this._+=1,this.N=new this.S(e,t,0),this.N.h=this.A,this.A.h=this.A.t=this.A.i=this.N,this._;var n,s=this.A.t,i=this.g(s.u,e);if(0===i)return s.o=t,this._;if(i>0)s.t=new this.S(e,t),s.t.h=s,n=s.t,this.A.t=n;else{var o=this.A.i,a=this.g(o.u,e);if(0===a)return o.o=t,this._;if(a<0)o.i=new this.S(e,t),o.i.h=o,n=o.i,this.A.i=n;else{if(void 0!==r){var c=r.C;if(c!==this.A){var l=this.g(c.u,e);if(0===l)return c.o=t,this._;if(l>0){var d=c.v(),u=this.g(d.u,e);if(0===u)return d.o=t,this._;u<0&&(n=new this.S(e,t),void 0===d.i?(d.i=n,n.h=d):(c.t=n,n.h=c))}}}if(void 0===n)for(n=this.N;;){var h=this.g(n.u,e);if(h>0){if(void 0===n.t){n.t=new this.S(e,t),n.t.h=n,n=n.t;break}n=n.t}else{if(!(h<0))return n.o=t,this._;if(void 0===n.i){n.i=new this.S(e,t),n.i.h=n,n=n.i;break}n=n.i}}}}if(this.enableIndex)for(var p=n.h;p!==this.A;)p.O+=1,p=p.h;return this.q(n),this._+=1,this._},t.prototype.F=function(e,t){for(;e;){var r=this.g(e.u,t);if(r<0)e=e.i;else{if(!(r>0))return e;e=e.t}}return e||this.A},t.prototype.clear=function(){this._=0,this.N=void 0,this.A.h=void 0,this.A.t=this.A.i=void 0},t.prototype.updateKeyByIterator=function(e,t){var r=e.C;if(r===this.A&&c(),1===this._)return r.u=t,!0;var n=r.p().u;if(r===this.A.t)return this.g(n,t)>0&&(r.u=t,!0);var s=r.v().u;return r===this.A.i?this.g(s,t)<0&&(r.u=t,!0):!(this.g(s,t)>=0||this.g(n,t)<=0||(r.u=t,0))},t.prototype.eraseElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return this.G(t),this._},t.prototype.eraseElementByKey=function(e){if(0===this._)return!1;var t=this.F(this.N,e);return t!==this.A&&(this.G(t),!0)},t.prototype.eraseElementByIterator=function(e){var t=e.C;t===this.A&&c();var r=void 0===t.i;return 0===e.iteratorType?r&&e.next():r&&void 0!==t.t||e.next(),this.G(t),e},t.prototype.getHeight=function(){return 0===this._?0:function e(t){return t?Math.max(e(t.t),e(t.i))+1:0}(this.N)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(function(){function e(){this._=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this._},e.prototype.empty=function(){return 0===this._},e}())),d=function(e){function t(t,r,n,s){var i=e.call(this,t,r,s)||this;return i.container=n,i}return s(t,e),Object.defineProperty(t.prototype,"pointer",{get:function(){this.C===this.A&&c();var e=this;return new Proxy([],{get:function(t,r){return"0"===r?e.C.u:"1"===r?e.C.o:(t[0]=e.C.u,t[1]=e.C.o,t[r])},set:function(t,r,n){if("1"!==r)throw new TypeError("prop must be 1");return e.C.o=n,!0}})},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t(this.C,this.A,this.container,this.iteratorType)},t}(function(e){function t(t,r,n){var s=e.call(this,n)||this;return s.C=t,s.A=r,0===s.iteratorType?(s.pre=function(){return this.C===this.A.t&&c(),this.C=this.C.v(),this},s.next=function(){return this.C===this.A&&c(),this.C=this.C.p(),this}):(s.pre=function(){return this.C===this.A.i&&c(),this.C=this.C.p(),this},s.next=function(){return this.C===this.A&&c(),this.C=this.C.v(),this}),s}return s(t,e),Object.defineProperty(t.prototype,"index",{get:function(){var e=this.C,t=this.A.h;if(e===this.A)return t?t.O-1:0;var r=0;for(e.t&&(r+=e.t.O);e!==t;){var n=e.h;e===n.i&&(r+=1,n.t&&(r+=n.t.O)),e=n}return r},enumerable:!1,configurable:!0}),t.prototype.isAccessible=function(){return this.C!==this.A},t}(a)),u=function(e){function t(t,r,n){void 0===t&&(t=[]);var s=e.call(this,r,n)||this,i=s;return t.forEach(function(e){i.setElement(e[0],e[1])}),s}return s(t,e),t.prototype.begin=function(){return new d(this.A.t||this.A,this.A,this)},t.prototype.end=function(){return new d(this.A,this.A,this)},t.prototype.rBegin=function(){return new d(this.A.i||this.A,this.A,this,1)},t.prototype.rEnd=function(){return new d(this.A,this.A,this,1)},t.prototype.front=function(){if(0!==this._){var e=this.A.t;return[e.u,e.o]}},t.prototype.back=function(){if(0!==this._){var e=this.A.i;return[e.u,e.o]}},t.prototype.lowerBound=function(e){var t=this.m(this.N,e);return new d(t,this.A,this)},t.prototype.upperBound=function(e){var t=this.B(this.N,e);return new d(t,this.A,this)},t.prototype.reverseLowerBound=function(e){var t=this.j(this.N,e);return new d(t,this.A,this)},t.prototype.reverseUpperBound=function(e){var t=this.k(this.N,e);return new d(t,this.A,this)},t.prototype.forEach=function(e){this.P(function(t,r,n){e([t.u,t.o],r,n)})},t.prototype.setElement=function(e,t,r){return this.D(e,t,r)},t.prototype.getElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return[t.u,t.o]},t.prototype.find=function(e){var t=this.F(this.N,e);return new d(t,this.A,this)},t.prototype.getElementByKey=function(e){return this.F(this.N,e).o},t.prototype.union=function(e){var t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this._},t.prototype[Symbol.iterator]=function(){var e,t,r,n;return function(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}(this,function(s){switch(s.label){case 0:e=this._,t=this.P(),r=0,s.label=1;case 1:return r<e?[4,[(n=t[r]).u,n.o]]:[3,4];case 2:s.sent(),s.label=3;case 3:return++r,[3,1];case 4:return[2]}})},t}(l)},6836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},6860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0,t.serverErrorToStatus=a;const n=r(4434),s=r(2203),i=r(131),o=r(4097);function a(e,t){var r;const n={code:i.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:null!==(r=null!=t?t:e.metadata)&&void 0!==r?r:null};return"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(n.code=e.code,"details"in e&&"string"==typeof e.details&&(n.details=e.details)),n}class c extends n.EventEmitter{constructor(e,t,r,n){super(),this.path=e,this.call=t,this.metadata=r,this.request=n,this.cancelled=!1}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}t.ServerUnaryCallImpl=c;class l extends s.Readable{constructor(e,t,r){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.cancelled=!1}_read(e){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}t.ServerReadableStreamImpl=l;class d extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.request=n,this.pendingStatus={code:i.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new o.Metadata,this.on("error",e=>{this.pendingStatus=a(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=d;class u extends s.Duplex{constructor(e,t,r){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.pendingStatus={code:i.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new o.Metadata,this.on("error",e=>{this.pendingStatus=a(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_read(e){this.call.startRead()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=u},6911:(e,t,r)=>{const n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,s=r(6928),i=n?";":":",o=r(1147),a=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||i,s=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=n?o.split(r):[""];return n&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:s,pathExt:a,pathExtExe:o}},l=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:i,pathExtExe:l}=c(e,t),d=[],u=r=>new Promise((i,o)=>{if(r===n.length)return t.all&&d.length?i(d):o(a(e));const c=n[r],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=s.join(l,e),p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;i(h(p,r,0))}),h=(e,r,n)=>new Promise((s,a)=>{if(n===i.length)return s(u(r+1));const c=i[n];o(e+c,{pathExt:l},(i,o)=>{if(!i&&o){if(!t.all)return s(e+c);d.push(e+c)}return s(h(e,r,n+1))})});return r?u(0).then(e=>r(null,e),r):u(0)};e.exports=l,l.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:i}=c(e,t),l=[];for(let a=0;a<r.length;a++){const c=r[a],d=/^".*"$/.test(c)?c.slice(1,-1):c,u=s.join(d,e),h=!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let e=0;e<n.length;e++){const r=h+n[e];try{if(o.sync(r,{pathExt:i})){if(!t.all)return r;l.push(r)}}catch(e){}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw a(e)}},6925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:i,data:o,it:a}=e;let c,l;const{minContains:d,maxContains:u}=i;a.opts.next?(c=void 0===d?1:d,l=u):c=1;const h=t.const("len",n._`${o}.length`);if(e.setParams({min:c,max:l}),void 0===l&&0===c)return void(0,s.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==l&&c>l)return(0,s.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(a,r)){let t=n._`${h} >= ${c}`;return void 0!==l&&(t=n._`${t} && ${h} <= ${l}`),void e.pass(t)}a.items=!0;const p=t.name("valid");function f(){const e=t.name("_valid"),r=t.let("count",0);m(e,()=>t.if(e,()=>function(e){t.code(n._`${e}++`),void 0===l?t.if(n._`${e} >= ${c}`,()=>t.assign(p,!0).break()):(t.if(n._`${e} > ${l}`,()=>t.assign(p,!1).break()),1===c?t.assign(p,!0):t.if(n._`${e} >= ${c}`,()=>t.assign(p,!0)))}(r)))}function m(r,n){t.forRange("i",0,h,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},r),n()})}void 0===l&&1===c?m(p,()=>t.if(p,()=>t.break())):0===c?(t.let(p,!0),void 0!==l&&t.if(n._`${o}.length > 0`,f)):(t.let(p,!1),f()),e.result(p,()=>e.reset())}};t.default=i},6928:e=>{"use strict";e.exports=require("path")},6939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7083),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,n.alwaysValidSchema)(s,r))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=s},6972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(1980).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},6976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},6982:e=>{"use strict";e.exports=require("crypto")},6998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recognizedOptions=void 0,t.channelOptionsEqual=function(e,t){const r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let s=0;s<r.length;s+=1){if(r[s]!==n[s])return!1;if(e[r[s]]!==t[n[s]])return!1}return!0},t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0,"grpc.lb.ring_hash.ring_size_cap":!0,"grpc-node.retry_max_attempts_limit":!0,"grpc-node.flow_control_window":!0,"grpc.server_call_metric_recording":!0}},7013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7420),i=r(5219),o=r(303),a=r(7083),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:c,parentSchema:l,it:d}=e,{oneOf:u}=l;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=c.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),f=t.const("tag",n._`${r}${(0,n.getProperty)(h)}`);function m(r){const s=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},s);return e.mergeEvaluated(i,n.Name),s}t.if(n._`typeof ${f} == "string"`,()=>function(){const r=function(){var e;const t={},r=s(l);let n=!0;for(let t=0;t<u.length;t++){let l=u[t];if((null==l?void 0:l.$ref)&&!(0,a.schemaHasRulesButRef)(l,d.self.RULES)){const e=l.$ref;if(l=i.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,e),l instanceof i.SchemaEnv&&(l=l.schema),void 0===l)throw new o.default(d.opts.uriResolver,d.baseId,e)}const p=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);n=n&&(r||s(l)),c(p,t)}if(!n)throw new Error(`discriminator: "${h}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(h)}function c(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const r of e.enum)p(r,t)}}function p(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${f} === ${e}`),t.assign(p,m(r[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}(),()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:f,tagName:h})),e.ok(p)}};t.default=c},7016:e=>{"use strict";e.exports=require("url")},7065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(3789),s=r(7083),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?o(e,n):(0,s.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function o(e,t){const{gen:r,schema:i,data:o,keyword:a,it:c}=e;c.items=!0;const l=r.const("len",n._`${o}.length`);if(!1===i)e.setParams({len:t.length}),e.pass(n._`${l} <= ${t.length}`);else if("object"==typeof i&&!(0,s.alwaysValidSchema)(c,i)){const i=r.var("valid",n._`${l} <= ${t.length}`);r.if((0,n.not)(i),()=>function(i){r.forRange("i",t.length,l,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:s.Type.Num},i),c.allErrors||r.if((0,n.not)(i),()=>r.break())})}(i)),e.ok(i)}}t.validateAdditionalItems=o,t.default=i},7083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(3789),s=r(2104);function i(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const s=n.RULES.keywords;for(const r in t)s[r]||f(e,`unknown keyword: "${r}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,a,c)=>{const l=void 0===a?o:a instanceof n.Name?(o instanceof n.Name?e(i,o,a):t(i,o,a),a):o instanceof n.Name?(t(i,a,o),o):r(o,a);return c!==n.Name||l instanceof n.Name?l:s(i,l)}}function d(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&u(e,r,t),r}function u(e,t,r){Object.keys(r).forEach(r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!o(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=o,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(s)}`},t.unescapeFragment=function(e){return c(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=c,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:l({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>{e.if(n._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),u(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:l({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var p;function f(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p||(t.Type=p={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const s=t===p.Num;return r?s?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:s?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=f},7103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},7153:(e,t,r)=>{"use strict";r.d(t,{OA:()=>l,eh:()=>i,uE:()=>d});var n=r(1584);function s(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??n.fd,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function i(e,t,r={path:[],schemaPath:[]}){var n;const s=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,a);const l=e._zod.toJSONSchema?.();if(l)a.schema=l;else{const n={...r,schemaPath:[...r.schemaPath,e],path:r.path},o=e._zod.parent;if(o)a.ref=o,i(o,t,n),t.seen.get(o).isParent=!0;else if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,a.schema,n);else{const r=a.schema,i=t.processors[s.type];if(!i)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);i(e,t,r,n)}}const d=t.metadataRegistry.get(e);return d&&Object.assign(a.schema,d),"input"===t.io&&c(e)&&(delete a.schema.examples,delete a.schema.default),"input"===t.io&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault,t.seen.get(e).schema}function o(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=t=>{if(t[1].schema.$ref)return;const n=t[1],{ref:s,defId:i}=(t=>{const n="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){const r=e.external.registry.get(t[0])?.id,s=e.external.uri??(e=>e);if(r)return{ref:s(r)};const i=t[1].defId??t[1].schema.id??"schema"+e.counter++;return t[1].defId=i,{defId:i,ref:`${s("__shared")}#/${n}/${i}`}}if(t[1]===r)return{ref:"#"};const s=`#/${n}/`,i=t[1].schema.id??"__schema"+e.counter++;return{defId:i,ref:s+i}})(t);n.def={...n.schema},i&&(n.defId=i);const o=n.schema;for(const e in o)delete o[e];o.$ref=s};if("throw"===e.cycles)for(const t of e.seen.entries()){const e=t[1];if(e.cycle)throw new Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const r of e.seen.entries()){const s=r[1];if(t===r[0]){n(r);continue}if(e.external){const s=e.external.registry.get(r[0])?.id;if(t!==r[0]&&s){n(r);continue}}const i=e.metadataRegistry.get(r[0])?.id;(i||s.cycle||s.count>1&&"ref"===e.reused)&&n(r)}}function a(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=t=>{const r=e.seen.get(t),s=r.def??r.schema,i={...s};if(null===r.ref)return;const o=r.ref;if(r.ref=null,o){n(o);const t=e.seen.get(o).schema;!t.$ref||"draft-07"!==e.target&&"draft-04"!==e.target&&"openapi-3.0"!==e.target?(Object.assign(s,t),Object.assign(s,i)):(s.allOf=s.allOf??[],s.allOf.push(t))}r.isParent||e.override({zodSchema:t,jsonSchema:s,path:r.path??[]})};for(const t of[...e.seen.entries()].reverse())n(t[0]);const s={};if("draft-2020-12"===e.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?s.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const r=e.external.registry.get(t)?.id;if(!r)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(r)}Object.assign(s,r.def??r.schema);const i=e.external?.defs??{};for(const t of e.seen.entries()){const e=t[1];e.def&&e.defId&&(i[e.defId]=e.def)}e.external||Object.keys(i).length>0&&("draft-2020-12"===e.target?s.$defs=i:s.definitions=i);try{const e=JSON.parse(JSON.stringify(s));return Object.defineProperty(e,"~standard",{value:{...t["~standard"],jsonSchema:{input:d(t,"input"),output:d(t,"output")}},enumerable:!1,writable:!1}),e}catch(e){throw new Error("Error converting schema to JSON.")}}function c(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if("transform"===n.type)return!0;if("array"===n.type)return c(n.element,r);if("set"===n.type)return c(n.valueType,r);if("lazy"===n.type)return c(n.getter(),r);if("promise"===n.type||"optional"===n.type||"nonoptional"===n.type||"nullable"===n.type||"readonly"===n.type||"default"===n.type||"prefault"===n.type)return c(n.innerType,r);if("intersection"===n.type)return c(n.left,r)||c(n.right,r);if("record"===n.type||"map"===n.type)return c(n.keyType,r)||c(n.valueType,r);if("pipe"===n.type)return c(n.in,r)||c(n.out,r);if("object"===n.type){for(const e in n.shape)if(c(n.shape[e],r))return!0;return!1}if("union"===n.type){for(const e of n.options)if(c(e,r))return!0;return!1}if("tuple"===n.type){for(const e of n.items)if(c(e,r))return!0;return!(!n.rest||!c(n.rest,r))}return!1}const l=(e,t={})=>r=>{const n=s({...r,processors:t});return i(e,n),o(n,e),a(n,e)},d=(e,t)=>r=>{const{libraryOptions:n,target:c}=r??{},l=s({...n??{},target:c,io:t,processors:{}});return i(e,l),o(l,e),a(l,e)}},7209:(e,t,r)=>{"use strict";e.exports=l,l.className="ReflectionObject";const n=r(1457);var s,i=r(3262),o={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},a={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},c={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function l(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(l.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),l.prototype.toJSON=function(){throw Error()},l.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof s&&t._handleAdd(this)},l.prototype.onRemove=function(e){var t=e.root;t instanceof s&&t._handleRemove(this),this.parent=null,this.resolved=!1},l.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},l.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)},l.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var t={};if(!e)throw new Error("Unknown edition for "+this.fullName);var r=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if("proto2"===e)t=Object.assign({},a);else if("proto3"===e)t=Object.assign({},c);else{if("2023"!==e)throw new Error("Unknown edition: "+e);t=Object.assign({},o)}return this._features=Object.assign(t,r||{}),void(this._featuresResolved=!0)}if(this.partOf instanceof n){var s=Object.assign({},this.partOf._features);this._features=Object.assign(s,r||{})}else if(this.declaringField);else{if(!this.parent)throw new Error("Unable to find a parent for "+this.fullName);var i=Object.assign({},this.parent._features);this._features=Object.assign(i,r||{})}this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},l.prototype._inferLegacyProtoFeatures=function(){return{}},l.prototype.getOption=function(e){if(this.options)return this.options[e]},l.prototype.setOption=function(e,t,r){return this.options||(this.options={}),/^features\./.test(e)?i.setProperty(this.options,e,t,r):r&&void 0!==this.options[e]||(this.getOption(e)!==t&&(this.resolved=!1),this.options[e]=t),this},l.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var o=s[e];i.setProperty(o,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},l.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},l.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},l.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},l._configure=function(e){s=e}},7242:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,s,i,o,a,c,l,d,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var p in s(o,a,c,l,d,u,h),o){var f=o[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var m=0;m<f.length;m++)r(e,s,i,f[m],a+"/"+p+"/"+m,c,a,p,o,m)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var g in f)r(e,s,i,f[g],a+"/"+p+"/"+n(g),c,a,p,o,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&r(e,s,i,f,a+"/"+p,c,a,p,o)}i(o,a,c,l,d,u,h)}}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7301:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},7344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(6596),s=r(9048);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:c}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===r?{schema:i,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===o||void 0===a||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:c,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:o,dataTypes:a,propertyName:c}){if(void 0!==o&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==r){const{errorPath:o,dataPathArr:a,opts:c}=t;d(l.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${o}${(0,s.getErrorPath)(r,i,c.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function d(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==o&&(d(o instanceof n.Name?o:l.let("data",o,!0)),void 0!==c&&(e.propertyName=c)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},7346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(978);class s extends Error{constructor(e,t,r,s){super(s||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=s},7366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(3789),s=r(7083),i=r(1085),o={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return a(e,"additionalItems",t);r.items=!0,(0,s.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}};function a(e,t,r=e.schema){const{gen:i,parentSchema:o,data:a,keyword:c,it:l}=e;!function(e){const{opts:n,errSchemaPath:i}=l,o=r.length,a=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(n.strictTuples&&!a){const e=`"${c}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,s.checkStrictMode)(l,e,n.strictTuples)}}(o),l.opts.unevaluated&&r.length&&!0!==l.items&&(l.items=s.mergeEvaluated.items(i,r.length,l.items));const d=i.name("valid"),u=i.const("len",n._`${a}.length`);r.forEach((t,r)=>{(0,s.alwaysValidSchema)(l,t)||(i.if(n._`${u} > ${r}`,()=>e.subschema({keyword:c,schemaProp:r,dataProp:r},d)),e.ok(d))})}t.validateTuple=a,t.default=o},7394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7366),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=s},7420:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},7434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0,t.createCertificateProviderChannelCredentials=function(e,t,r){return new g(e,t,null!=r?r:{})};const n=r(4756),s=r(2267),i=r(9167),o=r(3822),a=r(9302),c=r(267),l=r(131);function d(e,t){if(e&&!(e instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}class u{compose(e){return new y(this,e)}static createSsl(e,t,r,s){var o;if(d(e,"Root certificate"),d(t,"Private key"),d(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");const a=(0,n.createSecureContext)({ca:null!==(o=null!=e?e:(0,i.getDefaultRootsData)())&&void 0!==o?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:i.CIPHER_SUITES});return new m(a,null!=s?s:{})}static createFromSecureContext(e,t){return new m(e,null!=t?t:{})}static createInsecure(){return new h}}t.ChannelCredentials=u;class h extends u{constructor(){super()}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return!1}_equals(e){return e instanceof h}_createSecureConnector(e,t,r){return{connect:e=>Promise.resolve({socket:e,secure:!1}),waitForReady:()=>Promise.resolve(),getCallCredentials:()=>null!=r?r:s.CallCredentials.createEmpty(),destroy(){}}}}function p(e,t,r,s){var i,c;const l={secureContext:e};let d=r;if("grpc.http_connect_target"in s){const e=(0,o.parseUri)(s["grpc.http_connect_target"]);e&&(d=e)}const u=(0,a.getDefaultAuthority)(d),h=(0,o.splitHostPort)(u),p=null!==(i=null==h?void 0:h.host)&&void 0!==i?i:u;if(l.host=p,t.checkServerIdentity&&(l.checkServerIdentity=t.checkServerIdentity),void 0!==t.rejectUnauthorized&&(l.rejectUnauthorized=t.rejectUnauthorized),l.ALPNProtocols=["h2"],s["grpc.ssl_target_name_override"]){const e=s["grpc.ssl_target_name_override"],t=null!==(c=l.checkServerIdentity)&&void 0!==c?c:n.checkServerIdentity;l.checkServerIdentity=(r,n)=>t(e,n),l.servername=e}else l.servername=p;return s["grpc-node.tls_enable_trace"]&&(l.enableTrace=!0),l}class f{constructor(e,t){this.connectionOptions=e,this.callCredentials=t}connect(e){const t=Object.assign({socket:e},this.connectionOptions);return new Promise((e,r)=>{const s=(0,n.connect)(t,()=>{var t;null!==(t=this.connectionOptions.rejectUnauthorized)&&void 0!==t&&!t||s.authorized?e({socket:s,secure:!0}):r(s.authorizationError)});s.on("error",e=>{r(e)})})}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}}class m extends u{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t}_isSecure(){return!0}_equals(e){return this===e||e instanceof m&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}_createSecureConnector(e,t,r){const n=p(this.secureContext,this.verifyOptions,e,t);return new f(n,null!=r?r:s.CallCredentials.createEmpty())}}class g extends u{constructor(e,t,r){super(),this.caCertificateProvider=e,this.identityCertificateProvider=t,this.verifyOptions=r,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[]}_isSecure(){return!0}_equals(e){var t,r;return this===e||e instanceof g&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&(null===(t=this.verifyOptions)||void 0===t?void 0:t.checkServerIdentity)===(null===(r=e.verifyOptions)||void 0===r?void 0:r.checkServerIdentity)}ref(){var e;0===this.refcount&&(this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.addIdentityCertificateListener(this.identityCertificateUpdateListener)),this.refcount+=1}unref(){var e;this.refcount-=1,0===this.refcount&&(this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_createSecureConnector(e,t,r){return this.ref(),new g.SecureConnectorImpl(this,e,t,null!=r?r:s.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(const e of this.secureContextWatchers)e(this.getLatestSecureContext());this.secureContextWatchers=[]}}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.maybeUpdateWatchers()}hasReceivedUpdates(){return void 0!==this.latestCaUpdate&&(!this.identityCertificateProvider||void 0!==this.latestIdentityUpdate)}getSecureContext(){return this.hasReceivedUpdates()?Promise.resolve(this.getLatestSecureContext()):new Promise(e=>{this.secureContextWatchers.push(e)})}getLatestSecureContext(){var e,t;if(!this.latestCaUpdate)return null;if(null!==this.identityCertificateProvider&&!this.latestIdentityUpdate)return null;try{return(0,n.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:null===(e=this.latestIdentityUpdate)||void 0===e?void 0:e.privateKey,cert:null===(t=this.latestIdentityUpdate)||void 0===t?void 0:t.certificate,ciphers:i.CIPHER_SUITES})}catch(e){return(0,c.log)(l.LogVerbosity.ERROR,"Failed to createSecureContext with error "+e.message),null}}}g.SecureConnectorImpl=class{constructor(e,t,r,n){this.parent=e,this.channelTarget=t,this.options=r,this.callCredentials=n}connect(e){return new Promise((t,r)=>{const s=this.parent.getLatestSecureContext();if(!s)return void r(new Error("Failed to load credentials"));e.closed&&r(new Error("Socket closed while loading credentials"));const i=p(s,this.parent.verifyOptions,this.channelTarget,this.options),o=Object.assign({socket:e},i),a=()=>{r(new Error("Socket closed"))},c=e=>{r(e)},l=(0,n.connect)(o,()=>{var e;l.removeListener("close",a),l.removeListener("error",c),null!==(e=this.parent.verifyOptions.rejectUnauthorized)&&void 0!==e&&!e||l.authorized?t({socket:l,secure:!0}):r(l.authorizationError)});l.once("close",a),l.once("error",c)})}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};class y extends u{constructor(e,t){if(super(),this.channelCredentials=e,this.callCredentials=t,!e._isSecure())throw new Error("Cannot compose insecure credentials")}compose(e){const t=this.callCredentials.compose(e);return new y(this.channelCredentials,t)}_isSecure(){return!0}_equals(e){return this===e||e instanceof y&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}_createSecureConnector(e,t,r){const n=this.callCredentials.compose(null!=r?r:s.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,t,n)}}},7476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},7521:e=>{"use strict";e.exports=/^#!(.*)/},7567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&(0,s.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const a=o(i,"then"),c=o(i,"else");if(!a&&!c)return;const l=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),a&&c){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(d,u("then",r),u("else",r))}else a?t.if(d,u("then")):t.if((0,n.not)(d),u("else"));function u(r,s){return()=>{const i=e.subschema({keyword:r},d);t.assign(l,d),e.mergeValidEvaluated(i,l),s?t.assign(s,n._`${r}`):e.setParams({ifClause:r})}}e.pass(l,()=>e.error(!0))}};function o(e,t){const r=e.schema[t];return void 0!==r&&!(0,s.alwaysValidSchema)(e,r)}t.default=i},7595:(e,t,r)=>{"use strict";e.exports=s;var n=r(3610);function s(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(s.prototype=Object.create(n.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,r,s,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,s,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof s))try{r=s[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)})}catch(e){return a.emit("error",e,t),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(9810);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var s=r(3789);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const i=r(9598),o=r(303),a=r(7476),c=r(5219),l=r(3789),d=r(3043),u=r(8840),h=r(7083),p=r(7301),f=r(6976),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(e){var t,r,n,s,i,o,a,c,l,d,u,h,p,g,y,v,_,b,w,S,E,C,T,k,P;const $=e.strict,O=null===(t=e.code)||void 0===t?void 0:t.optimize,x=!0===O||void 0===O?1:O||0,N=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:m,R=null!==(s=e.uriResolver)&&void 0!==s?s:f.default;return{strictSchema:null===(o=null!==(i=e.strictSchema)&&void 0!==i?i:$)||void 0===o||o,strictNumbers:null===(c=null!==(a=e.strictNumbers)&&void 0!==a?a:$)||void 0===c||c,strictTypes:null!==(d=null!==(l=e.strictTypes)&&void 0!==l?l:$)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:$)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(p=e.strictRequired)&&void 0!==p?p:$)&&void 0!==g&&g,code:e.code?{...e.code,optimize:x,regExp:N}:{optimize:x,regExp:N},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(w=e.inlineRefs)||void 0===w||w,schemaId:null!==(S=e.schemaId)&&void 0!==S?S:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(C=e.validateSchema)||void 0===C||C,validateFormats:null===(T=e.validateFormats)||void 0===T||T,unicodeRegExp:null===(k=e.unicodeRegExp)||void 0===k||k,int32range:null===(P=e.int32range)||void 0===P||P,uriResolver:R}}class w{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...b(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return $;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),S.call(this,v,e,"NOT SUPPORTED"),S.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=P.call(this),e.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),C.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=p;"id"===r&&(n={...p},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await s.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function s(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return a.call(this,t),await c.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const r=await l.call(this,e);this.refs[e]||await s.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=E.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new c.SchemaEnv({schema:{},schemaId:r});if(t=c.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=E.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,d.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,r,t),!t)return(0,h.eachItem)(r,e=>N.call(this,e)),this;I.call(this,t);const n={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(r,0===n.type.length?e=>N.call(this,e,n):e=>n.type.forEach(t=>N.call(this,e,n,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,i=s[e];n&&i&&(s[e]=M(i))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;const{schemaId:o}=this.opts;if("object"==typeof e)i=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;r=(0,d.normalizeId)(i||r);const l=d.getSchemaRefs.call(this,e,r);return a=new c.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:r,localRefs:l}),this._cache.set(a.schema,a),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),n&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function S(e,t,r,n="error"){for(const s in e){const i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function E(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function C(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function T(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function P(){const e={...this.opts};for(const t of g)delete e[t];return e}w.ValidationError=i.default,w.MissingRefError=o.default,t.default=w;const $={log(){},warn(){},error(){}},O=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){const{RULES:r}=this;if((0,h.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!O.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function N(e,t,r){var n;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let o=s?i.post:i.rules.find(({type:e})=>e===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?R.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach(e=>this.addKeyword(e))}function R(e,t,r){const n=e.rules.findIndex(e=>e.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function I(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=M(t)),e.validateSchema=this.compile(t,!0))}const A={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function M(e){return{anyOf:[e,A]}}},7705:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:i,it:o}=e;if((0,s.alwaysValidSchema)(o,r))return;const a=t.name("valid");t.forIn("key",i,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,n.not)(a),()=>{e.error(!0),o.allErrors||t.break()})}),e.ok(a)}};t.default=i},7728:(e,t,r)=>{"use strict";e.exports=function(e){for(var t=i.codegen(["r","l","e"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,l="m"+i.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==s.defaults[a.keyType]?t("k=%j",s.defaults[a.keyType]):t("k=null"),void 0!==s.defaults[c]?t("value=%j",s.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===s.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==s.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==s.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===s.basic[c]?t(a.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,c)):void 0===s.basic[c]?t(a.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,c),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var d=e._fieldsArray[r];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return t("return m")};var n=r(5643),s=r(361),i=r(3262);function o(e){return"missing required '"+e.name+"'"}},7757:function(e,t,r){"use strict";var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.XcodeBuildMcpManager=void 0;const a=o(r(6928)),c=o(r(9896)),l=r(3953),d=r(8539);t.XcodeBuildMcpManager=class{constructor(e,t){this.logger=e,this.extensionPath=t,this.status="not_started",this.client=null,this.transport=null,this.startPromise=null}getStatus(){return this.status}async start(){if("ready"!==this.status)if(this.startPromise)await this.startPromise;else{this.startPromise=this.doStart();try{await this.startPromise}finally{this.startPromise=null}}}async doStart(){this.status="starting",this.logger.info("Starting XcodeBuildMCP server...");try{const e=this.findXcodeBuildMcpBinary();if(!e)throw new Error("XcodeBuildMCP binary not found in node_modules");this.logger.info(`Using XcodeBuildMCP binary: ${e}`),this.transport=new d.StdioClientTransport({command:"node",args:[e],env:{...process.env,XCODEBUILDMCP_DYNAMIC_TOOLS:"false"},stderr:"pipe"}),this.transport&&(this.transport.onerror=e=>{this.logger.error("XcodeBuildMCP transport error",e)},this.transport.onclose=()=>{this.logger.info("XcodeBuildMCP transport closed"),this.status="stopped",this.client=null,this.transport=null}),this.client=new l.Client({name:"cursor-ios-simulator-connect",version:"1.0.0"},{capabilities:{}}),await this.client.connect(this.transport),this.status="ready",this.logger.info("XcodeBuildMCP server started successfully")}catch(e){throw this.status="error",this.logger.error("Failed to start XcodeBuildMCP server",e),e}}findXcodeBuildMcpBinary(){const e=[a.join(this.extensionPath,"node_modules","xcodebuildmcp","build","index.js"),a.join(this.extensionPath,"node_modules",".bin","xcodebuildmcp")];for(const t of e)if(c.existsSync(t))return t;return null}async listTools(){if("ready"!==this.status||!this.client)return[];try{let e;const t=[];for(;;){const r=await this.client.listTools({cursor:e});if(t.push(...r.tools.map(e=>({name:e.name,description:e.description??"",parameters:JSON.stringify(e.inputSchema??{})}))),e=r.nextCursor,void 0===e)break}return t}catch(e){return this.logger.error("Failed to list tools from XcodeBuildMCP",e),[]}}async listPrompts(){if("ready"!==this.status||!this.client)return[];try{let e;const t=[];for(;;){const r=await this.client.listPrompts({cursor:e});if(r?.prompts&&t.push(...r.prompts.map(e=>({name:e.name,description:e.description??"",parameters:JSON.stringify(e.arguments??[])}))),e=r.nextCursor,void 0===e)break}return t}catch(e){return this.logger.warn("Failed to list prompts from XcodeBuildMCP",e),[]}}async listResources(){if("ready"!==this.status||!this.client)return[];try{let e;const t=[];for(;;){const r=await this.client.listResources({cursor:e});if(r?.resources&&t.push(...r.resources.map(e=>({uri:e.uri,name:e.name,description:e.description,mimeType:e.mimeType}))),e=r.nextCursor,void 0===e)break}return t}catch(e){return this.logger.warn("Failed to list resources from XcodeBuildMCP",e),[]}}async callTool(e,t){if("ready"!==this.status||!this.client)throw new Error("XcodeBuildMCP server is not ready");try{const r=await this.client.callTool({name:e,arguments:t});return{content:r.content,isError:r.isError}}catch(t){throw this.logger.error(`Failed to call tool ${e}`,t),t}}async getInstructions(){if("ready"===this.status&&this.client)try{return await this.client.getInstructions()}catch(e){return void this.logger.warn("Failed to get instructions from XcodeBuildMCP",e)}}async stop(){if("stopped"!==this.status&&"not_started"!==this.status){if(this.logger.info("Stopping XcodeBuildMCP server..."),this.client){try{await this.client.close()}catch(e){this.logger.warn("Error closing XcodeBuildMCP client",e)}this.client=null}if(this.transport){try{await this.transport.close()}catch(e){this.logger.warn("Error closing XcodeBuildMCP transport",e)}this.transport=null}this.status="stopped",this.logger.info("XcodeBuildMCP server stopped")}}async dispose(){await this.stop()}}},7803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCIDR=f,t.mapProxyName=function(e,t){var r;const o={target:e,extraOptions:{}};if(0===(null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1))return o;if("unix"===e.scheme)return o;const a=function(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(s.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(s.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let i=null;e.username&&(e.password?((0,n.log)(s.LogVerbosity.INFO,"userinfo found in proxy URI"),i=decodeURIComponent(`${e.username}:${e.password}`)):i=e.username);const o=e.hostname;let a=e.port;""===a&&(a="80");const c={address:`${o}:${a}`};return i&&(c.creds=i),p("Proxy server "+c.address+" set by environment variable "+r),c}();if(!a.address)return o;const c=(0,l.splitHostPort)(e.path);if(!c)return o;if(function(e){for(const t of function(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return e||(e=process.env.no_proxy,t="no_proxy"),e?(p("No proxy server list set by environment variable "+t),e.split(",")):[]}()){const r=f(t);if((0,i.isIPv4)(e)&&r&&g(r,e))return!0;if(e.endsWith(t))return!0}return!1}(c.host))return p("Not using proxy for target in no_proxy list: "+(0,l.uriToString)(e)),o;const u={"grpc.http_connect_target":(0,l.uriToString)(e)};return a.creds&&(u["grpc.http_connect_creds"]=a.creds),{target:{scheme:"dns",path:a.address},extraOptions:u}},t.getProxiedConnection=function(e,t){var r;if(!("grpc.http_connect_target"in t))return Promise.resolve(null);const i=t["grpc.http_connect_target"],a=(0,l.parseUri)(i);if(null===a)return Promise.resolve(null);const d=(0,l.splitHostPort)(a.path);if(null===d)return Promise.resolve(null);const h=`${d.host}:${null!==(r=d.port)&&void 0!==r?r:u.DEFAULT_PORT}`,f={method:"CONNECT",path:h},m={Host:h};(0,c.isTcpSubchannelAddress)(e)?(f.host=e.host,f.port=e.port):f.socketPath=e.path,"grpc.http_connect_creds"in t&&(m["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),f.headers=m;const g=(0,c.subchannelAddressToString)(e);return p("Using proxy "+g+" to connect to "+f.path),new Promise((e,t)=>{const r=o.request(f);r.once("connect",(i,o,a)=>{r.removeAllListeners(),o.removeAllListeners(),200===i.statusCode?(p("Successfully connected to "+f.path+" through proxy "+g),a.length>0&&o.unshift(a),p("Successfully established a plaintext connection to "+f.path+" through proxy "+g),e(o)):((0,n.log)(s.LogVerbosity.ERROR,"Failed to connect to "+f.path+" through proxy "+g+" with status "+i.statusCode),t())}),r.once("error",e=>{r.removeAllListeners(),(0,n.log)(s.LogVerbosity.ERROR,"Failed to connect to proxy "+g+" with error "+e.message),t()}),r.end()})};const n=r(267),s=r(131),i=r(9278),o=r(8611),a=r(267),c=r(8996),l=r(3822),d=r(7016),u=r(6700),h="proxy";function p(e){a.trace(s.LogVerbosity.DEBUG,h,e)}function f(e){const t=e.split("/");if(2!==t.length)return null;const r=parseInt(t[1],10);return!(0,i.isIPv4)(t[0])||Number.isNaN(r)||r<0||r>32?null:{ip:m(t[0]),prefixLength:r}}function m(e){return e.split(".").reduce((e,t)=>(e<<8)+parseInt(t,10),0)}function g(e,t){const r=e.ip,n=-1<<32-e.prefixLength;return(m(t)&n)===(r&n)}},7879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=r(9048),i=r(1980),o=r(8592),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,(0,s.alwaysValidSchema)(n,t)||(a?(0,o.validateAdditionalItems)(e,a):e.ok((0,i.validateArray)(e)))}};t.default=a},7882:(e,t,r)=>{"use strict";e.exports=v;var n=r(1304);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var s=r(5643),i=r(1457),o=r(1344),a=r(8252),c=r(9687),l=r(2551),d=r(6237),u=r(3449),h=r(3262),p=r(1080),f=r(7728),m=r(420),g=r(744),y=r(6434);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var l=Object.keys(t.fields),d=0;d<l.length;++d)r.add((void 0!==t.fields[l[d]].keyType?a.fromJSON:o.fromJSON)(l[d],t.fields[l[d]]));if(t.oneofs)for(l=Object.keys(t.oneofs),d=0;d<l.length;++d)r.add(i.fromJSON(l[d],t.oneofs[l[d]]));if(t.nested)for(l=Object.keys(t.nested),d=0;d<l.length;++d){var u=t.nested[l[d]];r.add((void 0!==u.id?o.fromJSON:void 0!==u.fields?v.fromJSON:void 0!==u.values?s.fromJSON:void 0!==u.methods?c.fromJSON:n.fromJSON)(l[d],u))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return h.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;n.prototype.resolveAll.call(this);var e=this.oneofsArray;for(r=0;r<e.length;)e[r++].resolve();for(var t=this.fieldsArray,r=0;r<t.length;)t[r++].resolve();return this},v.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,n.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)}),this):this},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:u,types:t,util:h}),this.decode=f(this)({Reader:d,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var n=y[e];if(n){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(s),s.toObject=this.toObject,this.toObject=n.toObject.bind(s)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},8013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1085),s=r(3789),i=r(7083),o=r(7083),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:c,it:l}=e,{opts:d}=l,u=(0,n.allSchemaProperties)(r),h=u.filter(e=>(0,i.alwaysValidSchema)(l,r[e]));if(0===u.length||h.length===u.length&&(!l.opts.unevaluated||!0===l.props))return;const p=d.strictSchema&&!d.allowMatchingProperties&&c.properties,f=t.name("valid");!0===l.props||l.props instanceof s.Name||(l.props=(0,o.evaluatedPropsToName)(t,l.props));const{props:m}=l;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,i.checkStrictMode)(l,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(r){t.forIn("key",a,i=>{t.if(s._`${(0,n.usePattern)(e,r)}.test(${i})`,()=>{const n=h.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:o.Type.Str},f),l.opts.unevaluated&&!0!==m?t.assign(s._`${m}[${i}]`,!0):n||l.allErrors||t.if((0,s.not)(f),()=>t.break())})})}!function(){for(const e of u)p&&g(e),l.allErrors?y(e):(t.var(f,!0),y(e),t.if(f))}()}};t.default=a},8045:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,s=2,i=!0;s<arguments.length;)r[n++]=arguments[s++];return new Promise(function(s,o){r[n]=function(e){if(i)if(i=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];s.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,o(e))}})}},8094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${i} ${s}`)}};t.default=s},8171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6519),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=s},8182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4018),s=r(6461),i=r(3789),o=new i.Name("fullFormats"),a=new i.Name("fastFormats"),c=(e,t={keywords:!0})=>{if(Array.isArray(t))return l(e,t,n.fullFormats,o),e;const[r,i]="fast"===t.mode?[n.fastFormats,a]:[n.fullFormats,o];return l(e,t.formats||n.formatNames,r,i),t.keywords&&(0,s.default)(e),e};function l(e,t,r,n){var s,o;null!==(s=(o=e.opts.code).formats)&&void 0!==s||(o.formats=i._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}c.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c},8252:(e,t,r)=>{"use strict";e.exports=o;var n=r(1344);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var s=r(361),i=r(3262);function o(e,t,r,s,o,a){if(n.call(this,e,t,s,void 0,void 0,o,a),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===s.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,s){i.decorateType(n.constructor).add(new o(s,e,t,r))}}},8343:(e,t,r)=>{"use strict";const{normalizeIPv6:n,removeDotSegments:s,recomposeAuthority:i,normalizeComponentEncoding:o,isIPv4:a,nonSimpleDomain:c}=r(4834),{SCHEMES:l,getSchemeHandler:d}=r(343);function u(e,t,r,n){const i={};return n||(e=f(h(e,r),r),t=f(h(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=s(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=s(t.path||""),i.query=t.query):(t.path?("/"===t.path[0]?i.path=s(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=s(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function h(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),o=[],a=d(n.scheme||r.scheme);a&&a.serialize&&a.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&o.push(r.scheme,":");const c=i(r);if(void 0!==c&&("suffix"!==n.reference&&o.push("//"),o.push(c),r.path&&"/"!==r.path[0]&&o.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||a&&a.absolutePath||(e=s(e)),void 0===c&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),o.push(e)}return void 0!==r.query&&o.push("?",r.query),void 0!==r.fragment&&o.push("#",r.fragment),o.join("")}const p=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(e,t){const r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;"suffix"===r.reference&&(e=r.scheme?r.scheme+":"+e:"//"+e);const o=e.match(p);if(o){if(s.scheme=o[1],s.userinfo=o[3],s.host=o[4],s.port=parseInt(o[5],10),s.path=o[6]||"",s.query=o[7],s.fragment=o[8],isNaN(s.port)&&(s.port=o[5]),s.host)if(!1===a(s.host)){const e=n(s.host);s.host=e.host.toLowerCase(),i=e.isIPV6}else i=!0;void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||void 0!==s.query||s.path?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");const t=d(r.scheme||s.scheme);if(!(r.unicodeSupport||t&&t.unicodeSupport)&&s.host&&(r.domainHost||t&&t.domainHost)&&!1===i&&c(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==s.scheme&&(s.scheme=unescape(s.scheme)),void 0!==s.host&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),t&&t.parse&&t.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}const m={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=h(f(e,t),t):"object"==typeof e&&(e=f(h(e,t),t)),e},resolve:function(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=u(f(e,n),f(t,n),n,!0);return n.skipEscape=!0,h(s,n)},resolveComponent:u,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=h(o(f(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=h(o(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=h(o(f(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=h(o(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:h,parse:f};e.exports=m,e.exports.default=m,e.exports.fastUri=m},8377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionLogger=void 0,t.ExtensionLogger=class{constructor(e){this.outputChannel=e}formatTimestamp(){return(new Date).toISOString()}formatMessage(e,t,r){let n=`[${this.formatTimestamp()}] [${e}] ${t}`;if(void 0!==r)try{n+=` ${JSON.stringify(r,null,2)}`}catch{n+=" [Unserializable data]"}return n}info(e,t){const r=this.formatMessage("INFO",e,t);this.outputChannel.appendLine(r),console.log(r)}warn(e,t){const r=this.formatMessage("WARN",e,t);this.outputChannel.appendLine(r),console.warn(r)}error(e,t){let r;if(t instanceof Error)r=`${t.message}\n${t.stack??""}`;else if(void 0!==t)try{r=JSON.stringify(t,null,2)}catch{r=String(t)}const n=this.formatMessage("ERROR",e,r);this.outputChannel.appendLine(n),console.error(n)}debug(e,t){const r=this.formatMessage("DEBUG",e,t);this.outputChannel.appendLine(r),console.debug(r)}show(){this.outputChannel.show()}}},8392:function(e,t,r){"use strict";var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SimulatorWebviewPanel=void 0;const a=o(r(1398));class c{constructor(e,t,r,n){this.extensionUri=e,this.controller=t,this.logger=r,this.disposables=[],this.streaming=!1,this.idbVideoStreamHandle=null,this.screenInfo={width:430,height:932},this.targetFps=30,this.inputLogCount=0,this.currentVideoScaleFactor=1,this.inputMappingMode="auto",this._onDidDispose=new a.EventEmitter,this.onDispose=this._onDidDispose.event,this.isDisposed=!1,this.panel=n;const s=a.workspace.getConfiguration("cursor.iosSimulator");this.targetFps=s.get("dockedView.fps",30),this.inputMappingMode=s.get("dockedView.inputMapping","auto"),this.logger.info("iOS Simulator docked view input mapping mode",{mode:this.inputMappingMode}),this.disposables.push(this.panel.webview.onDidReceiveMessage(e=>this.handleWebviewMessage(e),void 0,this.disposables)),this.disposables.push(this.panel.onDidDispose(()=>{this.isDisposed||(this.isDisposed=!0,this.stopStreaming(),this._onDidDispose.fire(),this._onDidDispose.dispose())})),this.disposables.push(this.panel.onDidChangeViewState(e=>{e.webviewPanel.visible?this.startStreaming():this.stopStreaming()})),this.panel.webview.html=this.getHtmlContent()}static create(e,t,r){const n=a.window.createWebviewPanel(c.viewType,"iOS Simulator",a.ViewColumn.Active,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[a.Uri.joinPath(e,"media")]});return new c(e,t,r,n)}static restore(e,t,r,n){return e.webview.options={enableScripts:!0,localResourceRoots:[a.Uri.joinPath(t,"media")]},new c(t,r,n,e)}reveal(){this.panel.reveal()}dispose(){if(!this.isDisposed){this.isDisposed=!0,this.stopStreaming(),this._onDidDispose.fire(),this._onDidDispose.dispose();for(const e of this.disposables)e.dispose();this.panel.dispose()}}async handleWebviewMessage(e){try{switch(e.type){case"ready":this.startStreaming();break;case"frameInfo":this.updateScreenInfoFromFrame(e.width,e.height);break;case"tap":{const t=e.x*this.screenInfo.width,r=e.y*this.screenInfo.height,n=this.clampToScreen(t,this.screenInfo.width),s=this.clampToScreen(r,this.screenInfo.height);this.inputLogCount<25&&(this.inputLogCount++,this.logger.info("ios_simulator_docked_input: tap",{norm:{x:e.x,y:e.y},screen:this.screenInfo,mapped:{x:n,y:s}})),await this.controller.tap({x:n,y:s,holdMs:e.holdMs});break}case"swipe":{const t=e.startX*this.screenInfo.width,r=e.startY*this.screenInfo.height,n=e.endX*this.screenInfo.width,s=e.endY*this.screenInfo.height,i=this.clampToScreen(t,this.screenInfo.width),o=this.clampToScreen(r,this.screenInfo.height),a=this.clampToScreen(n,this.screenInfo.width),c=this.clampToScreen(s,this.screenInfo.height);this.inputLogCount<25&&(this.inputLogCount++,this.logger.info("ios_simulator_docked_input: swipe",{norm:{startX:e.startX,startY:e.startY,endX:e.endX,endY:e.endY},screen:this.screenInfo,mapped:{startX:i,startY:o,endX:a,endY:c}})),await this.controller.swipe({startX:i,startY:o,endX:a,endY:c,durationMs:e.durationMs});break}case"key":{const t={Enter:"return",Backspace:"backspace",Delete:"delete",Tab:"tab",Escape:"escape",ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",Home:"home",End:"end",PageUp:"pageup",PageDown:"pagedown"," ":"space"}[e.key];t?await this.controller.pressKey(t):1===e.key.length&&await this.controller.typeText({text:e.key});break}case"text":await this.controller.typeText({text:e.text});break;case"home":await this.controller.pressKey("home")}}catch(e){this.logger.error("Error handling webview message",e)}}async startStreaming(){this.streaming||(this.streaming=!0,this.logger.info("Starting iOS Simulator streaming"),await this.startIdbVideoStreaming()||(this.logger.info("idb video streaming not available, falling back to screenshots"),await this.startScreenshotStreaming()))}async startIdbVideoStreaming(){this.logger.info("Attempting idb video streaming...");let e=0;const t=Date.now();try{this.currentVideoScaleFactor=.5;const r=await this.controller.startIdbVideoStream({fps:this.targetFps,quality:.5,scale:this.currentVideoScaleFactor},(r,n)=>{if(this.streaming&&this.panel.visible){if(e++,1===e&&this.logger.info("First idb video frame received"),e%100==0){const r=(Date.now()-t)/1e3,n=(e/r).toFixed(1);this.logger.info(`idb video streaming: ${e} frames, ${n} FPS`)}this.panel.webview.postMessage({type:"frame",data:r,mimeType:n,timestamp:Date.now()})}});return r?(this.idbVideoStreamHandle=r,this.logger.info("idb video streaming started successfully"),!0):(this.logger.warn("idb video streaming failed to start"),!1)}catch(e){return this.logger.warn("idb video streaming error",e),!1}}async startScreenshotStreaming(){this.currentVideoScaleFactor=1;let e=0,t=0,r=0,n=0,s=0,i=0;for(this.logger.info("Starting screenshot-based streaming");this.streaming&&this.panel.visible;){try{const o=Date.now();let a=await this.controller.captureScreenshotViaIdb();const c=Date.now()-o;if(a)r++,s+=c,1===r&&this.logger.info(`First idb screenshot: ${c}ms`);else{0===r&&0===n&&this.logger.info("idb screenshot failed, trying simctl...");const e=Date.now();a=await this.controller.captureScreenshotFast();const t=Date.now()-e;n++,i+=t,1===n&&this.logger.info(`First simctl screenshot: ${t}ms`)}if(a){if(e=0,t++,t%20==0){const e=r>0?(s/r).toFixed(0):"N/A",o=n>0?(i/n).toFixed(0):"N/A",a=(1e3*t/(s+i)).toFixed(1);this.logger.info(`Screenshot stats: ${t} frames, idb=${r}@${e}ms, simctl=${n}@${o}ms, ~${a} FPS`)}this.panel.webview.postMessage({type:"frame",data:a.base64Data,mimeType:a.mimeType,timestamp:Date.now()})}else e++,await this.sleep(50)}catch(t){e++,3===e&&this.logger.warn("Screenshot capture failing repeatedly",t),await this.sleep(100)}e>5&&await this.sleep(500)}}stopStreaming(){this.streaming=!1,this.idbVideoStreamHandle&&(this.idbVideoStreamHandle.stop(),this.idbVideoStreamHandle=null),this.logger.info("Stopped iOS Simulator streaming")}sleep(e){return new Promise(t=>setTimeout(t,e))}updateScreenInfoFromFrame(e,t){if(!Number.isFinite(e)||!Number.isFinite(t)||e<=0||t<=0)return;const r=this.currentVideoScaleFactor;let n=e,s=t,i={mode:"frame",scale:r};switch(this.inputMappingMode){case"auto":{const o=this.inferLogicalScreenFromFrame({frameWidth:e,frameHeight:t,scale:r});if(!o){n=e,s=t,i={mode:"auto_fallback_frame",scale:r};break}n=o.width,s=o.height,i={mode:"auto",scale:r,dpr:o.dpr,score:o.score};break}case"frame":n=e,s=t,i={mode:"frame",scale:r};break;case"frame_div_scale":n=r>0?e/r:e,s=r>0?t/r:t,i={mode:"frame_div_scale",scale:r};break;case"legacy_default":return;default:return this.inputMappingMode}if(!Number.isFinite(n)||!Number.isFinite(s)||n<=0||s<=0)return;const o=this.screenInfo;this.screenInfo={width:n,height:s},this.logger.info("ios_simulator_docked_input: updated screen from frame",{prev:o,next:this.screenInfo,frame:{width:e,height:t},inference:i})}inferLogicalScreenFromFrame(e){const{frameWidth:t,frameHeight:r}=e,n=Number.isFinite(e.scale)&&e.scale>0?e.scale:1,s=[3,2,1],i=e=>{const s=t/(n*e),i=r/(n*e);if(!Number.isFinite(s)||!Number.isFinite(i)||s<=0||i<=0)return null;if(s<250||s>500)return null;if(i<450||i>1300)return null;const o=s/i;if(o<.25||o>.9)return null;const a=Math.abs(s-Math.round(s))+Math.abs(i-Math.round(i))+Math.max(0,Math.round(s)-460)/100;return{width:Math.round(s),height:Math.round(i),dpr:e,score:a}};let o=null;for(const e of s){const t=i(e);t&&(!o||t.score<o.score)&&(o=t)}return o}clampToScreen(e,t){return!Number.isFinite(e)||!Number.isFinite(t)||t<=0||e<0?0:e>t?t:e}getHtmlContent(){const e=this.getNonce(),t=this.panel.webview.asWebviewUri(a.Uri.joinPath(this.extensionUri,"media","simulatorView.js")),r=this.panel.webview.asWebviewUri(a.Uri.joinPath(this.extensionUri,"media","simulatorView.css")),n=this.panel.webview.cspSource;return`<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n\t<meta http-equiv="Content-Security-Policy" content="\n\t\tdefault-src 'none';\n\t\timg-src ${n} data:;\n\t\tscript-src 'nonce-${e}';\n\t\tstyle-src ${n} 'unsafe-inline';\n\t">\n\t<link rel="stylesheet" href="${r}">\n\t<title>iOS Simulator</title>\n</head>\n<body>\n\t<div class="simulator-wrapper" id="simulator-wrapper">\n\t\t<canvas id="simulator-canvas"></canvas>\n\t\t<div class="loading" id="loading">\n\t\t\t<div class="spinner"></div>\n\t\t\t<span>Waiting for simulator...</span>\n\t\t</div>\n\t</div>\n\t<div class="controls-bar">\n\t\t<button id="home-btn" class="control-btn" title="Home">\n\t\t\t<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n\t\t\t\t<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>\n\t\t\t\t<polyline points="9 22 9 12 15 12 15 22"></polyline>\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n\t<script nonce="${e}" src="${t}"><\/script>\n</body>\n</html>`}getNonce(){let e="";for(let t=0;t<32;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}}t.SimulatorWebviewPanel=c,c.viewType="cursor.iosSimulator.dockedView"},8446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;const n=r(2267),s=r(131),i=r(6308),o=r(4097),a=r(267),c=r(6067);t.ResolvingCall=class{constructor(e,t,r,o,a){this.channel=e,this.method=t,this.filterStackFactory=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=n.CallCredentials.createEmpty(),this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&s.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(s.Status.CANCELLED,"Cancelled by parent call")}),r.flags&s.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,i.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(s.LogVerbosity.DEBUG,"resolving_call","["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0,i.deadlineToString)(this.deadline));const e=(0,i.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");const t=()=>{if(!this.deadlineStartTime)return void this.cancelWithStatus(s.Status.DEADLINE_EXCEEDED,"Deadline exceeded");const e=[],t=new Date;e.push(`Deadline exceeded after ${(0,i.formatDateDifference)(this.deadlineStartTime,t)}`),this.configReceivedTime?(this.configReceivedTime>this.deadlineStartTime&&e.push(`name resolution: ${(0,i.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`),this.childStartTime?this.childStartTime>this.configReceivedTime&&e.push(`metadata filters: ${(0,i.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`):e.push("waiting for metadata filters")):e.push("waiting for name resolution"),this.child&&e.push(...this.child.getDeadlineInfo()),this.cancelWithStatus(s.Status.DEADLINE_EXCEEDED,e.join(","))};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");const r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");const e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));this.configReceivedTime=new Date;const t=e.config;if(t.status!==s.Status.OK){const{code:e,details:r}=(0,c.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);return void this.outputStatus({code:e,details:r,metadata:new o.Metadata})}if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,i.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createRetryingCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new o.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=e}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}}},8451:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},8539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_INHERITED_ENV_VARS:()=>c,StdioClientTransport:()=>d,getDefaultEnvironment:()=>l});var n=r(4993);const s=require("node:process"),i=require("node:stream");var o=r(2876);class a{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;const e=this._buffer.indexOf("\n");if(-1===e)return null;const t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),function(e){return o.OR.parse(JSON.parse(e))}(t)}clear(){this._buffer=void 0}}const c="win32"===s.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function l(){const e={};for(const t of c){const r=s.env[t];void 0!==r&&(r.startsWith("()")||(e[t]=r))}return e}class d{constructor(e){this._readBuffer=new a,this._stderrStream=null,this._serverParams=e,"pipe"!==e.stderr&&"overlapped"!==e.stderr||(this._stderrStream=new i.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{this._process=n(this._serverParams.command,this._serverParams.args??[],{env:{...l(),...this._serverParams.env},stdio:["pipe","pipe",this._serverParams.stderr??"inherit"],shell:!1,windowsHide:"win32"===s.platform&&""in s,cwd:this._serverParams.cwd}),this._process.on("error",e=>{t(e),this.onerror?.(e)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{this._process=void 0,this.onclose?.()}),this._process.stdin?.on("error",e=>{this.onerror?.(e)}),this._process.stdout?.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),this._process.stdout?.on("error",e=>{this.onerror?.(e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){return this._stderrStream?this._stderrStream:this._process?.stderr??null}get pid(){return this._process?.pid??null}processReadBuffer(){for(;;)try{const e=this._readBuffer.readMessage();if(null===e)break;this.onmessage?.(e)}catch(e){this.onerror?.(e)}}async close(){if(this._process){const e=this._process;this._process=void 0;const t=new Promise(t=>{e.once("close",()=>{t()})});try{e.stdin?.end()}catch{}if(await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())]),null===e.exitCode){try{e.kill("SIGTERM")}catch{}await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())])}if(null===e.exitCode)try{e.kill("SIGKILL")}catch{}}this._readBuffer.clear()}send(e){return new Promise(t=>{if(!this._process?.stdin)throw new Error("Not connected");const r=function(e){return JSON.stringify(e)+"\n"}(e);this._process.stdin.write(r)?t():this._process.stdin.once("drain",t)})}}},8561:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function s(e){if("string"!=typeof e){var r=i();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var o=Object.keys(e),a=new Array(o.length+1),c=new Array(o.length),l=0;l<o.length;)a[l]=o[l],c[l]=e[o[l++]];return a[l]=r,Function.apply(null,a).apply(null,c)}return Function(r)()}for(var d=new Array(arguments.length-1),u=0;u<d.length;)d[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=d[u++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),u!==d.length)throw Error("parameter count mismatch");return n.push(e),s}function i(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return s.toString=i,s}e.exports=t,t.verbose=!1},8592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(6596),s=r(9048),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?o(e,n):(0,s.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function o(e,t){const{gen:r,schema:i,data:o,keyword:a,it:c}=e;c.items=!0;const l=r.const("len",n._`${o}.length`);if(!1===i)e.setParams({len:t.length}),e.pass(n._`${l} <= ${t.length}`);else if("object"==typeof i&&!(0,s.alwaysValidSchema)(c,i)){const i=r.var("valid",n._`${l} <= ${t.length}`);r.if((0,n.not)(i),()=>function(i){r.forRange("i",t.length,l,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:s.Type.Num},i),c.allErrors||r.if((0,n.not)(i),()=>r.break())})}(i)),e.ok(i)}}t.validateAdditionalItems=o,t.default=i},8611:e=>{"use strict";e.exports=require("http")},8692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0,t.createCertificateProviderServerCredentials=function(e,t,r){return new a(e,t,r)},t.createServerCredentialsWithInterceptors=function(e,t){return new c(e,t)};const n=r(9167);class s{constructor(e,t){this.serverConstructorOptions=e,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=null!=t?t:null}_addWatcher(e){this.watchers.add(e)}_removeWatcher(e){this.watchers.delete(e)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(const e of this.watchers)e(this.latestContextOptions)}_isSecure(){return null!==this.serverConstructorOptions}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new i}static createSsl(e,t,r=!1){var s;if(null!==e&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw new TypeError("checkClientCertificate must be a boolean");const i=[],a=[];for(let e=0;e<t.length;e++){const r=t[e];if(null===r||"object"!=typeof r)throw new TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),a.push(r.private_key)}return new o({requestCert:r,ciphers:n.CIPHER_SUITES},{ca:null!==(s=null!=e?e:(0,n.getDefaultRootsData)())&&void 0!==s?s:void 0,cert:i,key:a})}}t.ServerCredentials=s;class i extends s{constructor(){super(null)}_getSettings(){return null}_equals(e){return e instanceof i}}class o extends s{constructor(e,t){super(e,t),this.options=Object.assign(Object.assign({},e),t)}_equals(e){if(this===e)return!0;if(!(e instanceof o))return!1;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca))return!1}else if(this.options.ca!==e.options.ca)return!1;if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length)return!1;for(let t=0;t<this.options.cert.length;t++){const r=this.options.cert[t],n=e.options.cert[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n))return!1}else if(r!==n)return!1}}else if(this.options.cert!==e.options.cert)return!1;if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length)return!1;for(let t=0;t<this.options.key.length;t++){const r=this.options.key[t],n=e.options.key[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n))return!1}else if(r!==n)return!1}}else if(this.options.key!==e.options.key)return!1;return this.options.requestCert===e.options.requestCert}}class a extends s{constructor(e,t,r){super({requestCert:null!==t,rejectUnauthorized:r,ciphers:n.CIPHER_SUITES}),this.identityCertificateProvider=e,this.caCertificateProvider=t,this.requireClientCertificate=r,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(e){var t;0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)),super._addWatcher(e)}_removeWatcher(e){var t;super._removeWatcher(e),0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_equals(e){return this===e||e instanceof a&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate}calculateSecureContextOptions(){var e;return null===this.latestIdentityUpdate||null!==this.caCertificateProvider&&null===this.latestCaUpdate?null:{ca:null===(e=this.latestCaUpdate)||void 0===e?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){const e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e)}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.finalizeUpdate()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.finalizeUpdate()}}class c extends s{constructor(e,t){super({}),this.childCredentials=e,this.interceptors=t}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof c))return!1;if(!this.childCredentials._equals(e.childCredentials))return!1;if(this.interceptors.length!==e.interceptors.length)return!1;for(let t=0;t<this.interceptors.length;t++)if(this.interceptors[t]!==e.interceptors[t])return!1;return!0}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e)}_removeWatcher(e){this.childCredentials._removeWatcher(e)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}}},8811:(e,t,r)=>{"use strict";e.exports=i;var n=r(7209);((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var s=r(3262);function i(e,t,r,i,o,a,c,l,d){if(s.isObject(o)?(c=o,o=a=void 0):s.isObject(a)&&(c=a,a=void 0),void 0!==t&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(r))throw TypeError("requestType must be a string");if(!s.isString(i))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=d}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},8839:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),s=new Array(123),i=0;i<64;)s[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var s,i=null,o=[],a=0,c=0;t<r;){var l=e[t++];switch(c){case 0:o[a++]=n[l>>2],s=(3&l)<<4,c=1;break;case 1:o[a++]=n[s|l>>4],s=(15&l)<<2,c=2;break;case 2:o[a++]=n[s|l>>6],o[a++]=n[63&l],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=n[s],o[a++]=61,1===c&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=s[l]))throw Error(o);switch(a){case 0:n=l,a=1;break;case 1:t[r++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:t[r++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:t[r++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(o);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},8840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(7476),s=r(5335),i=r(2796),o=r(3789),a=r(7083);var c;function l(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(c||(t.DataType=c={})),t.getSchemaTypes=function(e){const t=l(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=l,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:i}=e,a=function(e,t){return t?e.filter(e=>d.has(e)||"array"===t&&"array"===e):[]}(t,i.coerceTypes),l=t.length>0&&!(0===a.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(l){const s=h(t,n,i.strictNumbers,c.Wrong);r.if(s,()=>{a.length?function(e,t,r){const{gen:n,data:s,opts:i}=e,a=n.let("dataType",o._`typeof ${s}`),c=n.let("coerced",o._`undefined`);"array"===i.coerceTypes&&n.if(o._`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,o._`${s}[0]`).assign(a,o._`typeof ${s}`).if(h(t,s,i.strictNumbers),()=>n.assign(c,s))),n.if(o._`${c} !== undefined`);for(const e of r)(d.has(e)||"array"===e&&"array"===i.coerceTypes)&&l(e);function l(e){switch(e){case"string":return void n.elseIf(o._`${a} == "number" || ${a} == "boolean"`).assign(c,o._`"" + ${s}`).elseIf(o._`${s} === null`).assign(c,o._`""`);case"number":return void n.elseIf(o._`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(c,o._`+${s}`);case"integer":return void n.elseIf(o._`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,o._`+${s}`);case"boolean":return void n.elseIf(o._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf(o._`${s} === "true" || ${s} === 1`).assign(c,!0);case"null":return n.elseIf(o._`${s} === "" || ${s} === 0 || ${s} === false`),void n.assign(c,null);case"array":n.elseIf(o._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(c,o._`[${s}]`)}}n.else(),f(e),n.endIf(),n.if(o._`${c} !== undefined`,()=>{n.assign(s,c),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(o._`${t} !== undefined`,()=>e.assign(o._`${t}[${r}]`,n))}(e,c)})}(e,t,a):f(e)})}return l};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,r,n=c.Correct){const s=n===c.Correct?o.operators.EQ:o.operators.NEQ;let i;switch(e){case"null":return o._`${t} ${s} null`;case"array":i=o._`Array.isArray(${t})`;break;case"object":i=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return o._`typeof ${t} ${s} ${e}`}return n===c.Correct?i:(0,o.not)(i);function a(e=o.nil){return(0,o.and)(o._`typeof ${t} == "number"`,e,r?o._`isFinite(${t})`:o.nil)}}function h(e,t,r,n){if(1===e.length)return u(e[0],t,r,n);let s;const i=(0,a.toHash)(e);if(i.array&&i.object){const e=o._`typeof ${t} != "object"`;s=i.null?e:o._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=o.nil;i.number&&delete i.integer;for(const e in i)s=(0,o.and)(s,u(e,t,r,n));return s}t.checkDataType=u,t.checkDataTypes=h;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:r,schema:n}=e,s=(0,a.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}(e);(0,i.reportError)(t,p)}t.reportTypeError=f},8851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6596),s=n.operators,i={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},o={message:({keyword:e,schemaCode:t})=>n.str`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${i[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data(n._`${r} ${i[t].fail} ${s} || isNaN(${r})`)}};t.default=a},8899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;const n=r(7434),s=r(4973),i=r(5716),o=r(178),a=r(4097),c=r(131),l=r(1703),d=r(4987),u=r(9302),h=r(267),p=r(7803),f=r(3822),m=r(463),g=r(9503),y=r(2611),v=r(6308),_=r(8446),b=r(5572),w=r(6067),S=r(3135),E=r(2379),C=new Map;class T extends E.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,s)=>{t.throttleKeepalive(s)}}ref(){0===this.refCount&&(this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this)),this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class k{pick(e){return{pickResultType:o.PickResultType.DROP,status:{code:c.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new a.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}}t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";class P{constructor(e){this.target=e,this.trace=new g.ChannelzTrace,this.callTracker=new g.ChannelzCallTracker,this.childrenTracker=new g.ChannelzChildrenTracker,this.state=m.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}}t.InternalChannel=class{constructor(e,r,a){var y,v,_,b,E,k;if(this.credentials=r,this.options=a,this.connectivityState=m.ConnectivityState.IDLE,this.currentPicker=new o.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),"string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(r instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(a&&"object"!=typeof a)throw new TypeError("Channel options must be an object");this.channelzInfoTracker=new P(e);const $=(0,f.parseUri)(e);if(null===$)throw new Error(`Could not parse target name "${e}"`);const O=(0,u.mapUriDefaultScheme)($);if(null===O)throw new Error(`Could not find a default scheme for target name "${e}"`);0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,g.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,u.getDefaultAuthority)(O);const x=(0,p.mapProxyName)(O,a);this.target=x.target,this.options=Object.assign({},this.options,x.extraOptions),this.subchannelPool=(0,i.getSubchannelPool)(0===(null!==(y=this.options["grpc.use_local_subchannel_pool"])&&void 0!==y?y:0)),this.retryBufferTracker=new S.MessageBufferTracker(null!==(v=this.options["grpc.retry_buffer_size"])&&void 0!==v?v:16777216,null!==(_=this.options["grpc.per_rpc_retry_buffer_size"])&&void 0!==_?_:1048576),this.keepaliveTime=null!==(b=this.options["grpc.keepalive_time_ms"])&&void 0!==b?b:-1,this.idleTimeoutMs=Math.max(null!==(E=this.options["grpc.client_idle_timeout_ms"])&&void 0!==E?E:18e5,1e3);const N={createSubchannel:(e,r)=>{const n={};for(const[e,s]of Object.entries(r))e.startsWith(t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)||(n[e]=s);const s=this.subchannelPool.getOrCreateSubchannel(this.target,e,n,this.credentials);return s.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",s.getChannelzRef()),new T(s,this)},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[],r.length>0&&this.callRefTimerUnref();for(const e of r)e.doPick();this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new s.ResolvingLoadBalancer(this.target,N,this.options,(e,t)=>{var r;e.retryThrottling?C.set(this.getTarget(),new S.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,C.get(this.getTarget()))):C.delete(this.getTarget()),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded"),null===(r=this.configSelector)||void 0===r||r.unref(),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref();for(const t of e)t.getConfig()})},e=>{this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,w.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));const t=this.configSelectionQueue;this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref();for(const r of t)r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new d.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(a,void 0,2));const R=new Error;(0,h.isTracerEnabled)("channel_stacktrace")&&(0,h.trace)(c.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(k=R.stack)||void 0===k?void 0:k.substring(R.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}trace(e,t){(0,h.trace)(null!=t?t:c.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;this.callRefTimer||(this.callRefTimer=setInterval(()=>{},2147483647)),(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t,r;(null===(e=this.callRefTimer)||void 0===e?void 0:e.hasRef)&&!this.callRefTimer.hasRef()||(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(r=null===(t=this.callRefTimer)||void 0===t?void 0:t.unref)||void 0===r||r.call(t))}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,h.trace)(c.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+m.ConnectivityState[this.connectivityState]+" -> "+m.ConnectivityState[e]),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+m.ConnectivityState[e]),this.connectivityState=e,this.channelzInfoTracker.state=e;const t=this.connectivityStateWatchers.slice();for(const r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==m.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels)t.throttleKeepalive(e)}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.connectivityState!==m.ConnectivityState.SHUTDOWN&&this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector.invoke(e,t,this.randomChannelId)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(m.ConnectivityState.IDLE),this.currentPicker=new o.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.callRefTimer&&(clearInterval(this.callRefTimer),this.callRefTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);const e=(new Date).valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null===(r=(t=this.idleTimer).unref)||void 0===r||r.call(t)}maybeStartIdleTimer(){this.connectivityState===m.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.channelzInfoTracker.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===c.Status.OK?this.channelzInfoTracker.callTracker.addCallSucceeded():this.channelzInfoTracker.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,s){const i=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+i+'] method="'+t+'"'),new y.LoadBalancingCall(this,e,t,r,n,s,i)}createRetryingCall(e,t,r,n,s){const i=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+i+'] method="'+t+'"'),new S.RetryingCall(this,e,t,r,n,s,i,this.retryBufferTracker,C.get(this.getTarget()))}createResolvingCall(e,t,r,n,s){const i=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+i+'] method="'+e+'", deadline='+(0,v.deadlineToString)(t));const o={deadline:t,flags:null!=s?s:c.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},a=new _.ResolvingCall(this,e,o,this.filterStackFactory.clone(),i);return this.onCallStart(),a.addStatusWatcher(e=>{this.onCallEnd(e)}),a}close(){var e;this.resolvingLoadBalancer.destroy(),this.updateState(m.ConnectivityState.SHUTDOWN),this.currentPicker=new k;for(const e of this.configSelectionQueue)e.cancelWithStatus(c.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(const e of this.pickQueue)e.cancelWithStatus(c.Status.UNAVAILABLE,"Channel closed before call started");this.pickQueue=[],this.callRefTimer&&clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,g.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels(),null===(e=this.configSelector)||void 0===e||e.unref(),this.configSelector=null}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===m.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let n=null;if(t!==1/0){const e=t instanceof Date?t:new Date(t),i=new Date;if(t===-1/0||e<=i)return void process.nextTick(r,new Error("Deadline passed without connectivity state change"));n=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},e.getTime()-i.getTime())}const s={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,s){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===m.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,s)}getOptions(){return this.options}}},8923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChildChannelControlHelper=function(e,t){var r,n,s,i,o,a,c,l,d,u;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(i=null===(s=t.updateState)||void 0===s?void 0:s.bind(t))&&void 0!==i?i:e.updateState.bind(e),requestReresolution:null!==(a=null===(o=t.requestReresolution)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:e.requestReresolution.bind(e),addChannelzChild:null!==(l=null===(c=t.addChannelzChild)||void 0===c?void 0:c.bind(t))&&void 0!==l?l:e.addChannelzChild.bind(e),removeChannelzChild:null!==(u=null===(d=t.removeChannelzChild)||void 0===d?void 0:d.bind(t))&&void 0!==u?u:e.removeChannelzChild.bind(e)}},t.registerLoadBalancerType=function(e,t,r){i[e]={LoadBalancer:t,LoadBalancingConfig:r}},t.registerDefaultLoadBalancerType=function(e){o=e},t.createLoadBalancer=function(e,t){const r=e.getLoadBalancerName();return r in i?new i[r].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in i},t.parseLoadBalancingConfig=a,t.getDefaultConfig=function(){if(!o)throw new Error("No default load balancer type registered");return new i[o].LoadBalancingConfig},t.selectLbConfigFromList=function(e,t=!1){for(const t of e)try{return a(t)}catch(e){(0,n.log)(s.LogVerbosity.DEBUG,"Config parsing failed with error",e.message);continue}return t&&o?new i[o].LoadBalancingConfig:null};const n=r(267),s=r(131),i={};let o=null;function a(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Provided load balancing config has multiple conflicting entries");const r=t[0];if(!(r in i))throw new Error(`Unrecognized load balancing config name ${r}`);try{return i[r].LoadBalancingConfig.createFromJson(e[r])}catch(e){throw new Error(`${r}: ${e.message}`)}}},8996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointMap=void 0,t.isTcpSubchannelAddress=s,t.subchannelAddressEqual=i,t.subchannelAddressToString=o,t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:a}:{path:e}},t.endpointEqual=function(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(let r=0;r<e.addresses.length;r++)if(!i(e.addresses[r],t.addresses[r]))return!1;return!0},t.endpointToString=function(e){return"["+e.addresses.map(o).join(", ")+"]"},t.endpointHasAddress=c;const n=r(9278);function s(e){return"port"in e}function i(e,t){return!e&&!t||!(!e||!t)&&(s(e)?s(t)&&e.host===t.host&&e.port===t.port:!s(t)&&e.path===t.path)}function o(e){return s(e)?(0,n.isIPv6)(e.host)?"["+e.host+"]:"+e.port:e.host+":"+e.port:e.path}const a=443;function c(e,t){for(const r of e.addresses)if(i(r,t))return!0;return!1}function l(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(const r of e.addresses){let e=!1;for(const n of t.addresses)if(i(r,n)){e=!0;break}if(!e)return!1}return!0}t.EndpointMap=class{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(e){for(const t of this.map)if(c(t.key,e))return t.value}deleteMissing(e){const t=[];for(const r of this.map){let n=!1;for(const t of e)l(t,r.key)&&(n=!0);n||(t.push(r.value),this.map.delete(r))}return t}get(e){for(const t of this.map)if(l(e,t.key))return t.value}set(e,t){for(const r of this.map)if(l(e,r.key))return void(r.value=t);this.map.add({key:e,value:t})}delete(e){for(const t of this.map)if(l(e,t.key))return void this.map.delete(t)}has(e){for(const t of this.map)if(l(e,t.key))return!0;return!1}clear(){this.map.clear()}*keys(){for(const e of this.map)yield e.key}*values(){for(const e of this.map)yield e.value}*entries(){for(const e of this.map)yield[e.key,e.value]}}},9004:function(e,t,r){"use strict";var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.IosSimulatorController=void 0;const a=o(r(5317)),c=o(r(1943)),l=o(r(857)),d=o(r(6928)),u=r(9023),h=r(3529),p=(0,u.promisify)(a.execFile);t.IosSimulatorController=class{constructor(e,t){this.logger=e,this.context=t,this.tempDir=d.join(l.tmpdir(),"cursor-ios-simulator-connect"),this.idbManager=new h.IdbManager(e,t.globalStorageUri.fsPath,t.extensionUri.fsPath)}async initialize(){try{await this.idbManager.ensureInstalled()}catch(e){this.logger.error("Failed to initialize idb_companion",e)}}async captureScreenshot(e="png"){this.ensureDarwin(),await this.ensureTempDir(),await this.ensureSimulatorIsBooted();const t=(new Date).toISOString().replace(/[:.]/g,"-"),r=d.join(this.tempDir,`simulator-${t}.${e}`),n=["simctl","io","booted","screenshot",`--type=${e}`,r];await this.runCommand("xcrun",n);const s=await c.readFile(r),i="png"===e?"image/png":"image/jpeg";return await c.unlink(r).catch(()=>{}),{filePath:r,base64Data:s.toString("base64"),mimeType:i,capturedAt:(new Date).toISOString()}}async captureScreenshotFast(){this.ensureDarwin();try{const e=(await p("xcrun",["simctl","io","booted","screenshot","--type=jpeg","-"],{encoding:"buffer",maxBuffer:10485760,timeout:2e3})).stdout;return e&&0!==e.length?{base64Data:e.toString("base64"),mimeType:"image/jpeg"}:null}catch(e){return null}}async tap(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.tap(e.x,e.y,e.holdMs??0);return{success:t.success,x:e.x,y:e.y,method:t.method,error:t.error}}async swipe(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.swipe(e.startX,e.startY,e.endX,e.endY,e.durationMs??300);return{success:t.success,startX:e.startX,startY:e.startY,endX:e.endX,endY:e.endY,method:t.method,error:t.error}}async typeText(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.typeText(e.text);return{text:e.text,success:t.success,error:t.error}}async pressKey(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.pressKey(e);return{key:e,success:t.success,error:t.error}}async accessibilitySnapshot(e={}){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=e.maxDepth??4,r=e.maxChildrenPerNode??24,n=await this.idbManager.getAccessibilityTree(t,r);return n.error?{capturedAt:(new Date).toISOString(),tree:{role:null,name:null,value:null,bounds:null},error:n.error}:{capturedAt:n.capturedAt??(new Date).toISOString(),tree:n.tree}}async getBootedDevices(){this.ensureDarwin();const e=await this.idbManager.listDevices();if(e.length>0)return e;const{stdout:t}=await this.runCommand("xcrun",["simctl","list","devices","--json"]),r=JSON.parse(t),n=[];for(const e of Object.values(r.devices))for(const t of e)"Booted"===t.state&&n.push(t);return n}async bootFirstAvailableSimulator(){return this.ensureDarwin(),this.idbManager.bootFirstAvailableSimulator()}ensureDarwin(){if("darwin"!==process.platform)throw new Error("The iOS simulator tools only work on macOS because they rely on Apple APIs.")}async ensureTempDir(){await c.mkdir(this.tempDir,{recursive:!0})}async ensureSimulatorIsBooted(){try{const{stdout:e}=await this.runCommand("xcrun",["simctl","list","devices","booted"]);if(!e||!e.includes("Booted"))throw new Error("No booted simulator device detected. Launch an iOS Simulator from Xcode first.")}catch(e){throw this.logger.error("Failed to confirm simulator state",e),e instanceof Error?e:new Error(String(e))}}async runCommand(e,t,r){try{const n=await p(e,t,r);return{stdout:n.stdout?n.stdout.toString():"",stderr:n.stderr?n.stderr.toString():""}}catch(t){throw this.logger.error(`Command ${e} failed`,t),t instanceof Error?t:new Error(String(t))}}async captureScreenshotViaIdb(){this.ensureDarwin();try{const e=await this.idbManager.screenshot();return e?{base64Data:e.imageData.toString("base64"),mimeType:`image/${e.imageFormat.toLowerCase()}`}:null}catch(e){return this.logger.warn("idb screenshot failed, will use simctl",e),null}}async startIdbVideoStream(e,t){this.ensureDarwin(),this.logger.info(`Starting idb video stream: fps=${e.fps??30}`);try{const r=await this.idbManager.startVideoStream({fps:e.fps??30,format:"mjpeg",quality:e.quality??.5,scale:e.scale??1},e=>{t(e.toString("base64"),"image/jpeg")});return r?(this.logger.info("idb video stream started successfully"),r):(this.logger.warn("idb video stream failed to start"),null)}catch(e){return this.logger.error("Failed to start idb video stream",e),null}}async dispose(){await this.idbManager.dispose();try{await c.rm(this.tempDir,{recursive:!0,force:!0})}catch{}}}},9012:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0,t.setup=function(){g&&(0,a.registerLoadBalancerType)(m,k,S)};const s=r(463),i=r(131),o=r(4700),a=r(342),c=r(8923),l=r(533),d=r(178),u=r(8996),h=r(2379),p=r(267);function f(e){p.trace(i.LogVerbosity.DEBUG,"outlier_detection",e)}const m="outlier_detection",g="true"===(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true"),y={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},v={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function _(e,t,r,n){if(t in e&&void 0!==e[t]&&typeof e[t]!==r)throw new Error(`outlier detection config ${n?`${n}.${t}`:t} parse error: expected ${r}, got ${typeof e[t]}`)}function b(e,t,r){const n=r?`${r}.${t}`:t;if(t in e&&void 0!==e[t]){if(!(0,o.isDuration)(e[t]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function w(e,t,r){const n=r?`${r}.${t}`:t;if(_(e,t,"number",r),t in e&&void 0!==e[t]&&!(e[t]>=0&&e[t]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class S{constructor(e,t,r,n,s,i,o){if(this.childPolicy=o,"pick_first"===o.getLoadBalancerName())throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=s?Object.assign(Object.assign({},y),s):null,this.failurePercentageEjection=i?Object.assign(Object.assign({},v),i):null}getLoadBalancerName(){return m}toJsonObject(){var e,t;return{outlier_detection:{interval:(0,o.msToDuration)(this.intervalMs),base_ejection_time:(0,o.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,o.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:null!==(e=this.successRateEjection)&&void 0!==e?e:void 0,failure_percentage_ejection:null!==(t=this.failurePercentageEjection)&&void 0!==t?t:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var t;if(b(e,"interval"),b(e,"base_ejection_time"),b(e,"max_ejection_time"),w(e,"max_ejection_percent"),"success_rate_ejection"in e&&void 0!==e.success_rate_ejection){if("object"!=typeof e.success_rate_ejection)throw new Error("outlier detection config success_rate_ejection must be an object");_(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),w(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),_(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),_(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e&&void 0!==e.failure_percentage_ejection){if("object"!=typeof e.failure_percentage_ejection)throw new Error("outlier detection config failure_percentage_ejection must be an object");w(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),w(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),_(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),_(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in e)||!Array.isArray(e.child_policy))throw new Error("outlier detection config child_policy must be an array");const r=(0,c.selectLbConfigFromList)(e.child_policy);if(!r)throw new Error("outlier detection config child_policy: no valid recognized policy found");return new S(e.interval?(0,o.durationToMs)(e.interval):null,e.base_ejection_time?(0,o.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,o.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,r)}}t.OutlierDetectionLoadBalancingConfig=S;class E extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.refCount=0}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.setHealthy(!1)}uneject(){this.setHealthy(!0)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}class C{constructor(){this.activeBucket={success:0,failure:0},this.inactiveBucket={success:0,failure:0}}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket={success:0,failure:0}}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class T{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===d.PickResultType.COMPLETE){const e=t.subchannel,r=e.getMapEntry();if(r){let n=t.onCallEnded;return this.countCalls&&(n=(e,n,s)=>{var o;e===i.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(o=t.onCallEnded)||void 0===o||o.call(t,e,n,s)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}return t}}class k{constructor(e){this.entryMap=new u.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new l.ChildLoadBalancerHandler((0,a.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r),s=this.entryMap.getForSubchannelAddress(t),i=new E(n,s);return null!==(null==s?void 0:s.currentEjectionTimestamp)&&i.eject(),null==s||s.subchannelWrappers.push(i),i},updateState:(t,r,n)=>{t===s.ConnectivityState.READY?e.updateState(t,new T(r,this.isCountingEnabled()),n):e.updateState(t,r,n)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(const t of this.entryMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;f("Running success rate check");const r=t.request_volume;let n=0;const s=[];for(const[e,t]of this.entryMap.entries()){const i=t.counter.getLastSuccesses(),o=t.counter.getLastFailures();f("Stats for "+(0,u.endpointToString)(e)+": successes="+i+" failures="+o+" targetRequestVolume="+r),i+o>=r&&(n+=1,s.push(i/(i+o)))}if(f("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),n<t.minimum_hosts)return;const i=s.reduce((e,t)=>e+t)/s.length;let o=0;for(const e of s){const t=e-i;o+=t*t}const a=o/s.length,c=Math.sqrt(a),l=i-c*(t.stdev_factor/1e3);f("stdev="+c+" ejectionThreshold="+l);for(const[n,s]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const i=s.counter.getLastSuccesses(),o=s.counter.getLastFailures();if(i+o<r)continue;const a=i/(i+o);if(f("Checking candidate "+n+" successRate="+a),a<l){const r=100*Math.random();f("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(f("Ejecting candidate "+n),this.eject(s,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;f("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.entryMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(const[r,n]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const s=n.counter.getLastSuccesses(),i=n.counter.getLastFailures();if((f("Candidate successes="+s+" failures="+i),!(s+i<t.request_volume))&&100*i/(i+s)>t.threshold){const s=100*Math.random();f("Candidate "+r+" randomNumber="+s+" enforcement_percentage="+t.enforcement_percentage),s<t.enforcement_percentage&&(f("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers)t.eject()}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(const e of this.entryMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){const e=new Date;if(f("Ejection timer running"),this.switchAllBuckets(),this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(const[e,t]of this.entryMap.entries())if(null===t.currentEjectionTimestamp)t.ejectionTimeMultiplier>0&&(t.ejectionTimeMultiplier-=1);else{const r=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),s=new Date(t.currentEjectionTimestamp.getTime());s.setMilliseconds(s.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n))),s<new Date&&(f("Unejecting "+e),this.uneject(t))}}}updateAddressList(e,t,r,n){if(!(t instanceof S))return!1;if(f("Received update with config: "+JSON.stringify(t.toJsonObject(),void 0,2)),e.ok){for(const t of e.value)this.entryMap.has(t)||(f("Adding map entry for "+(0,u.endpointToString)(t)),this.entryMap.set(t,{counter:new C,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));this.entryMap.deleteMissing(e.value)}const s=t.getChildPolicy();if(this.childBalancer.updateAddressList(e,s,r,n),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){f("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else f("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{f("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(const e of this.entryMap.values())this.uneject(e),e.ejectionTimeMultiplier=0}return this.latestConfig=t,!0}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return m}}t.OutlierDetectionLoadBalancer=k},9023:e=>{"use strict";e.exports=require("util")},9045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(303),s=r(1085),i=r(3789),o=r(6735),a=r(5219),c=r(7083),l={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:o,schemaEnv:c,validateName:l,opts:h,self:p}=s,{root:f}=c;if(("#"===r||"#/"===r)&&o===f.baseId)return function(){if(c===f)return u(e,l,c,c.$async);const r=t.scopeValue("root",{ref:f});return u(e,i._`${r}.validate`,f,f.$async)}();const m=a.resolveRef.call(p,f,o,r);if(void 0===m)throw new n.default(s.opts.uriResolver,o,r);return m instanceof a.SchemaEnv?function(t){const r=d(e,t);u(e,r,t,t.$async)}(m):function(n){const s=t.scopeValue("schema",!0===h.code.source?{ref:n,code:(0,i.stringify)(n)}:{ref:n}),o=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:i.nil,topSchemaRef:s,errSchemaPath:r},o);e.mergeEvaluated(a),e.ok(o)}(m)}};function d(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):i._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,r,n){const{gen:a,it:l}=e,{allErrors:d,schemaEnv:u,opts:h}=l,p=h.passContext?o.default.this:i.nil;function f(e){const t=i._`${e}.errors`;a.assign(o.default.vErrors,i._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),a.assign(o.default.errors,i._`${o.default.vErrors}.length`)}function m(e){var t;if(!l.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==l.props)if(n&&!n.dynamicProps)void 0!==n.props&&(l.props=c.mergeEvaluated.props(a,n.props,l.props));else{const t=a.var("props",i._`${e}.evaluated.props`);l.props=c.mergeEvaluated.props(a,t,l.props,i.Name)}if(!0!==l.items)if(n&&!n.dynamicItems)void 0!==n.items&&(l.items=c.mergeEvaluated.items(a,n.items,l.items));else{const t=a.var("items",i._`${e}.evaluated.items`);l.items=c.mergeEvaluated.items(a,t,l.items,i.Name)}}n?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try(()=>{a.code(i._`await ${(0,s.callValidateCode)(e,t,p)}`),m(t),d||a.assign(r,!0)},e=>{a.if(i._`!(${e} instanceof ${l.ValidationError})`,()=>a.throw(e)),f(e),d||a.assign(r,!1)}),e.ok(r)}():e.result((0,s.callValidateCode)(e,t,p),()=>m(t),()=>f(t))}t.getValidate=d,t.callRef=u,t.default=l},9048:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(6596),s=r(3231);function i(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const s=n.RULES.keywords;for(const r in t)s[r]||f(e,`unknown keyword: "${r}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,a,c)=>{const l=void 0===a?o:a instanceof n.Name?(o instanceof n.Name?e(i,o,a):t(i,o,a),a):o instanceof n.Name?(t(i,a,o),o):r(o,a);return c!==n.Name||l instanceof n.Name?l:s(i,l)}}function d(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&u(e,r,t),r}function u(e,t,r){Object.keys(r).forEach(r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!o(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=o,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(s)}`},t.unescapeFragment=function(e){return c(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=c,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:l({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>{e.if(n._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),u(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:l({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var p;function f(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p||(t.Type=p={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const s=t===p.Num;return r?s?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:s?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=f},9100:(e,t,r)=>{"use strict";var n=e.exports=r(5325);n.build="full",n.tokenize=r(527),n.parse=r(4863),n.common=r(5095),n.Root._configure(n.Type,n.parse,n.common)},9167:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CIPHER_SUITES=void 0,t.getDefaultRootsData=function(){return s?(null===i&&(i=n.readFileSync(s)),i):null};const n=r(9896);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const s=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let i=null},9182:(e,t,r)=>{"use strict";const n=r(9896),s=r(1395);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=n.openSync(e,"r"),n.readSync(r,t,0,150,0),n.closeSync(r)}catch(e){}return s(t.toString())}},9207:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},s=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),s="";r&&(s=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return s+t.join("/")};r.resolve=function(e,t,r){return r||(t=s(t)),n(t)?t:(r||(e=s(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?s(e+"/"+t):t)}},9259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s=r(7083),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:i,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(o.opts.discriminator&&i.discriminator)return;const a=r,c=t.let("valid",!1),l=t.let("passing",null),d=t.name("_valid");e.setParams({passing:l}),t.block(function(){a.forEach((r,i)=>{let a;(0,s.alwaysValidSchema)(o,r)?t.var(d,!0):a=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},d),i>0&&t.if(n._`${d} && ${c}`).assign(c,!1).assign(l,n._`[${l}, ${i}]`).else(),t.if(d,()=>{t.assign(c,!0),t.assign(l,i),a&&e.mergeEvaluated(a,n.Name)})})}),e.result(c,()=>e.reset(),()=>e.error(!0))}};t.default=i},9278:e=>{"use strict";e.exports=require("net")},9302:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=void 0,t.registerResolver=function(e,t){s[e]=t},t.registerDefaultScheme=function(e){i=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in s)return new s[e.scheme](e,t,r);throw new Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in s)return s[e.scheme].getDefaultAuthority(e);throw new Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){return void 0!==e.scheme&&e.scheme in s?e:null!==i?{scheme:i,authority:void 0,path:(0,n.uriToString)(e)}:null};const n=r(3822);t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY="grpc.internal.config_selector";const s={};let i=null},9347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3789),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${i} ${s}`)}};t.default=s},9376:e=>{"use strict";const t=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};e.exports=t,e.exports.default=t},9390:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,s=n>>>1,i=null,o=n;return function(r){if(r<1||r>s)return e(r);o+r>n&&(i=e(n),o=0);var a=t.call(i,o,o+=r);return 7&o&&(o=1+(7|o)),a}}},9410:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function s(e,n,s){t[0]=e,n[s]=r[0],n[s+1]=r[1],n[s+2]=r[2],n[s+3]=r[3]}function i(e,n,s){t[0]=e,n[s]=r[3],n[s+1]=r[2],n[s+2]=r[1],n[s+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?s:i,e.writeFloatBE=n?i:s,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,r,n){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((s<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function o(e,t,r){var n=e(t,r),s=2*(n>>31)+1,i=n>>>23&255,o=8388607&n;return 255===i?o?NaN:s*(1/0):0===i?1401298464324817e-60*s*o:s*Math.pow(2,i-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,s),e.readFloatBE=o.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function s(e,n,s){t[0]=e,n[s]=r[0],n[s+1]=r[1],n[s+2]=r[2],n[s+3]=r[3],n[s+4]=r[4],n[s+5]=r[5],n[s+6]=r[6],n[s+7]=r[7]}function i(e,n,s){t[0]=e,n[s]=r[7],n[s+1]=r[6],n[s+2]=r[5],n[s+3]=r[4],n[s+4]=r[3],n[s+5]=r[2],n[s+6]=r[1],n[s+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?s:i,e.writeDoubleBE=n?i:s,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,r,n,s,i){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,s,i+t),e(1/n>0?0:2147483648,s,i+r);else if(isNaN(n))e(0,s,i+t),e(2146959360,s,i+r);else if(n>17976931348623157e292)e(0,s,i+t),e((o<<31|2146435072)>>>0,s,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,s,i+t),e((o<<31|a/4294967296)>>>0,s,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,s,i+t),e((o<<31|c+1023<<20|1048576*a&1048575)>>>0,s,i+r)}}}function o(e,t,r,n,s){var i=e(n,s+t),o=e(n,s+r),a=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+i;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,s,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},9453:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={})),t.StreamDecoder=class{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0;const s=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,s.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,s.push(t)}break;default:throw new Error("Unexpected read state")}return s}}},9503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTrackerStub=t.ChannelzCallTracker=t.ChannelzChildrenTrackerStub=t.ChannelzChildrenTracker=t.ChannelzTrace=t.ChannelzTraceStub=void 0,t.unregisterChannelzRef=function(e){g[e.kind].eraseElementByKey(e.id)},t.getChannelzHandlers=I,t.getChannelzServiceDefinition=M,t.setup=function(){(0,c.registerAdminService)(M,I)};const n=r(9278),s=r(6787),i=r(463),o=r(131),a=r(8996),c=r(2661),l=r(4056);function d(e){return{channel_id:e.id,name:e.name}}function u(e){return{subchannel_id:e.id,name:e.name}}function h(e){return{socket_id:e.id,name:e.name}}const p=100;t.ChannelzTraceStub=class{constructor(){this.events=[],this.creationTimestamp=new Date,this.eventsLogged=0}addTrace(){}getTraceMessage(){return{creation_timestamp:S(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}},t.ChannelzTrace=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:"channel"===(null==r?void 0:r.kind)?r:void 0,childSubchannel:"subchannel"===(null==r?void 0:r.kind)?r:void 0}),this.events.length>=64&&(this.events=this.events.slice(32)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:S(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:S(e.timestamp),channel_ref:e.childChannel?d(e.childChannel):null,subchannel_ref:e.childSubchannel?u(e.childSubchannel):null}))}}};class f{constructor(){this.channelChildren=new s.OrderedMap,this.subchannelChildren=new s.OrderedMap,this.socketChildren=new s.OrderedMap,this.trackerMap={channel:this.channelChildren,subchannel:this.subchannelChildren,socket:this.socketChildren}}refChild(e){const t=this.trackerMap[e.kind],r=t.find(e.id);r.equals(t.end())?t.setElement(e.id,{ref:e,count:1},r):r.pointer[1].count+=1}unrefChild(e){const t=this.trackerMap[e.kind],r=t.getElementByKey(e.id);void 0!==r&&(r.count-=1,0===r.count&&t.eraseElementByKey(e.id))}getChildLists(){return{channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}}t.ChannelzChildrenTracker=f,t.ChannelzChildrenTrackerStub=class extends f{refChild(){}unrefChild(){}};class m{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=m,t.ChannelzCallTrackerStub=class extends m{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}};const g={channel:new s.OrderedMap,subchannel:new s.OrderedMap,server:new s.OrderedMap,socket:new s.OrderedMap},y=e=>{let t=1;const r=g[e];return(n,s,i)=>{const o=t++,a={id:o,name:n,kind:e};return i&&r.setElement(o,{ref:a,getInfo:s}),a}};function v(e){if(""===e)return[];const t=e.split(":").map(e=>function(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}(e));return[].concat(...t)}function _(e){return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))))}function b(e){if((0,n.isIPv4)(e))return _(e);if(function(e){return(0,n.isIPv6)(e)&&e.toLowerCase().startsWith("::ffff:")&&(0,n.isIPv4)(e.substring(7))}(e))return _(e.substring(7));if((0,n.isIPv6)(e)){let t,r;const n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));const s=Buffer.from(v(t)),i=Buffer.from(v(r)),o=Buffer.alloc(16-s.length-i.length,0);return Buffer.concat([s,o,i])}return null}function w(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function S(e){if(!e)return null;const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function E(e){const t=e.getInfo(),r=[],n=[];return t.children.channels.forEach(e=>{r.push(d(e[1].ref))}),t.children.subchannels.forEach(e=>{n.push(u(e[1].ref))}),{ref:d(e.ref),data:{target:t.target,state:w(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:r,subchannel_ref:n}}function C(e,t){const r=parseInt(e.request.channel_id,10),n=g.channel.getElementByKey(r);void 0!==n?t(null,{channel:E(n)}):t({code:o.Status.NOT_FOUND,details:"No channel data found for id "+r})}function T(e,t){const r=parseInt(e.request.max_results,10)||p,n=[],s=parseInt(e.request.start_channel_id,10),i=g.channel;let o;for(o=i.lowerBound(s);!o.equals(i.end())&&n.length<r;o=o.next())n.push(E(o.pointer[1]));t(null,{channel:n,end:o.equals(i.end())})}function k(e){const t=e.getInfo(),r=[];return t.listenerChildren.sockets.forEach(e=>{r.push(h(e[1].ref))}),{ref:(n=e.ref,{server_id:n.id}),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:r};var n}function P(e,t){const r=parseInt(e.request.server_id,10),n=g.server.getElementByKey(r);void 0!==n?t(null,{server:k(n)}):t({code:o.Status.NOT_FOUND,details:"No server data found for id "+r})}function $(e,t){const r=parseInt(e.request.max_results,10)||p,n=parseInt(e.request.start_server_id,10),s=g.server,i=[];let o;for(o=s.lowerBound(n);!o.equals(s.end())&&i.length<r;o=o.next())i.push(k(o.pointer[1]));t(null,{server:i,end:o.equals(s.end())})}function O(e,t){const r=parseInt(e.request.subchannel_id,10),n=g.subchannel.getElementByKey(r);if(void 0===n)return void t({code:o.Status.NOT_FOUND,details:"No subchannel data found for id "+r});const s=n.getInfo(),i=[];s.children.sockets.forEach(e=>{i.push(h(e[1].ref))}),t(null,{subchannel:{ref:u(n.ref),data:{target:s.target,state:w(s.state),calls_started:s.callTracker.callsStarted,calls_succeeded:s.callTracker.callsSucceeded,calls_failed:s.callTracker.callsFailed,last_call_started_timestamp:S(s.callTracker.lastCallStartedTimestamp),trace:s.trace.getTraceMessage()},socket_ref:i}})}function x(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=b(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function N(e,t){var r,n,s,i,a;const c=parseInt(e.request.socket_id,10),l=g.socket.getElementByKey(c);if(void 0===l)return void t({code:o.Status.NOT_FOUND,details:"No socket data found for id "+c});const d=l.getInfo(),u=d.security?{model:"tls",tls:{cipher_suite:d.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=d.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=d.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(s=d.security.localCertificate)&&void 0!==s?s:void 0,remote_certificate:null!==(i=d.security.remoteCertificate)&&void 0!==i?i:void 0}}:null;t(null,{socket:{ref:h(l.ref),local:d.localAddress?x(d.localAddress):null,remote:d.remoteAddress?x(d.remoteAddress):null,remote_name:null!==(a=d.remoteName)&&void 0!==a?a:void 0,security:u,data:{keep_alives_sent:d.keepAlivesSent,streams_started:d.streamsStarted,streams_succeeded:d.streamsSucceeded,streams_failed:d.streamsFailed,last_local_stream_created_timestamp:S(d.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:S(d.lastRemoteStreamCreatedTimestamp),messages_received:d.messagesReceived,messages_sent:d.messagesSent,last_message_received_timestamp:S(d.lastMessageReceivedTimestamp),last_message_sent_timestamp:S(d.lastMessageSentTimestamp),local_flow_control_window:d.localFlowControlWindow?{value:d.localFlowControlWindow}:null,remote_flow_control_window:d.remoteFlowControlWindow?{value:d.remoteFlowControlWindow}:null}}})}function R(e,t){const r=parseInt(e.request.server_id,10),n=g.server.getElementByKey(r);if(void 0===n)return void t({code:o.Status.NOT_FOUND,details:"No server data found for id "+r});const s=parseInt(e.request.start_socket_id,10),i=parseInt(e.request.max_results,10)||p,a=n.getInfo().sessionChildren.sockets,c=[];let l;for(l=a.lowerBound(s);!l.equals(a.end())&&c.length<i;l=l.next())c.push(h(l.pointer[1].ref));t(null,{socket_ref:c,end:l.equals(a.end())})}function I(){return{GetChannel:C,GetTopChannels:T,GetServer:P,GetServers:$,GetSubchannel:O,GetSocket:N,GetServerSockets:R}}t.registerChannelzChannel=y("channel"),t.registerChannelzSubchannel=y("subchannel"),t.registerChannelzServer=y("server"),t.registerChannelzSocket=y("socket");let A=null;function M(){if(A)return A;const e=(0,r(5085).Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]}),t=(0,l.loadPackageDefinition)(e);return A=t.grpc.channelz.v1.Channelz.service,A}},9531:(e,t,r)=>{"use strict";r.d(t,{$X:()=>U,$k:()=>q,A:()=>D,A6:()=>C,BU:()=>h,C0:()=>v,CN:()=>I,CX:()=>B,Cv:()=>w,Ec:()=>x,Fl:()=>y,GC:()=>A,H1:()=>S,In:()=>u,Kj:()=>b,NV:()=>g,NX:()=>m,Q9:()=>L,RH:()=>f,SW:()=>o,Tr:()=>V,Wg:()=>a,Y8:()=>l,Yv:()=>_,aw:()=>E,bq:()=>T,cR:()=>j,cY:()=>O,dO:()=>c,fg:()=>d,fs:()=>F,iC:()=>N,i_:()=>R,jq:()=>P,mh:()=>z,vn:()=>p,xi:()=>k,yq:()=>M,zH:()=>$});var n=r(7153),s=r(2503);const i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=(e,t,r,n)=>{const s=r;s.type="string";const{minimum:o,maximum:a,format:c,patterns:l,contentEncoding:d}=e._zod.bag;if("number"==typeof o&&(s.minLength=o),"number"==typeof a&&(s.maxLength=a),c&&(s.format=i[c]??c,""===s.format&&delete s.format),d&&(s.contentEncoding=d),l&&l.size>0){const e=[...l];1===e.length?s.pattern=e[0].source:e.length>1&&(s.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},a=(e,t,r,n)=>{const s=r,{minimum:i,maximum:o,format:a,multipleOf:c,exclusiveMaximum:l,exclusiveMinimum:d}=e._zod.bag;"string"==typeof a&&a.includes("int")?s.type="integer":s.type="number","number"==typeof d&&("draft-04"===t.target||"openapi-3.0"===t.target?(s.minimum=d,s.exclusiveMinimum=!0):s.exclusiveMinimum=d),"number"==typeof i&&(s.minimum=i,"number"==typeof d&&"draft-04"!==t.target&&(d>=i?delete s.minimum:delete s.exclusiveMinimum)),"number"==typeof l&&("draft-04"===t.target||"openapi-3.0"===t.target?(s.maximum=l,s.exclusiveMaximum=!0):s.exclusiveMaximum=l),"number"==typeof o&&(s.maximum=o,"number"==typeof l&&"draft-04"!==t.target&&(l<=o?delete s.maximum:delete s.exclusiveMaximum)),"number"==typeof c&&(s.multipleOf=c)},c=(e,t,r,n)=>{r.type="boolean"},l=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema")},d=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema")},u=(e,t,r,n)=>{"openapi-3.0"===t.target?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},h=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Undefined cannot be represented in JSON Schema")},p=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Void cannot be represented in JSON Schema")},f=(e,t,r,n)=>{r.not={}},m=(e,t,r,n)=>{},g=(e,t,r,n)=>{},y=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Date cannot be represented in JSON Schema")},v=(e,t,r,n)=>{const i=e._zod.def,o=(0,s.getEnumValues)(i.entries);o.every(e=>"number"==typeof e)&&(r.type="number"),o.every(e=>"string"==typeof e)&&(r.type="string"),r.enum=o},_=(e,t,r,n)=>{const s=e._zod.def,i=[];for(const e of s.values)if(void 0===e){if("throw"===t.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===t.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(e))}else i.push(e);if(0===i.length);else if(1===i.length){const e=i[0];r.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?r.enum=[e]:r.const=e}else i.every(e=>"number"==typeof e)&&(r.type="number"),i.every(e=>"string"==typeof e)&&(r.type="string"),i.every(e=>"boolean"==typeof e)&&(r.type="boolean"),i.every(e=>null===e)&&(r.type="null"),r.enum=i},b=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema")},w=(e,t,r,n)=>{const s=r,i=e._zod.pattern;if(!i)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=i.source},S=(e,t,r,n)=>{const s=r,i={type:"string",format:"binary",contentEncoding:"binary"},{minimum:o,maximum:a,mime:c}=e._zod.bag;void 0!==o&&(i.minLength=o),void 0!==a&&(i.maxLength=a),c?1===c.length?(i.contentMediaType=c[0],Object.assign(s,i)):s.anyOf=c.map(e=>({...i,contentMediaType:e})):Object.assign(s,i)},E=(e,t,r,n)=>{r.type="boolean"},C=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")},T=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Function types cannot be represented in JSON Schema")},k=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema")},P=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Map cannot be represented in JSON Schema")},$=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw new Error("Set cannot be represented in JSON Schema")},O=(e,t,r,s)=>{const i=r,o=e._zod.def,{minimum:a,maximum:c}=e._zod.bag;"number"==typeof a&&(i.minItems=a),"number"==typeof c&&(i.maxItems=c),i.type="array",i.items=(0,n.eh)(o.element,t,{...s,path:[...s.path,"items"]})},x=(e,t,r,s)=>{const i=r,o=e._zod.def;i.type="object",i.properties={};const a=o.shape;for(const e in a)i.properties[e]=(0,n.eh)(a[e],t,{...s,path:[...s.path,"properties",e]});const c=new Set(Object.keys(a)),l=new Set([...c].filter(e=>{const r=o.shape[e]._zod;return"input"===t.io?void 0===r.optin:void 0===r.optout}));l.size>0&&(i.required=Array.from(l)),"never"===o.catchall?._zod.def.type?i.additionalProperties=!1:o.catchall?o.catchall&&(i.additionalProperties=(0,n.eh)(o.catchall,t,{...s,path:[...s.path,"additionalProperties"]})):"output"===t.io&&(i.additionalProperties=!1)},N=(e,t,r,s)=>{const i=e._zod.def,o=!1===i.inclusive,a=i.options.map((e,r)=>(0,n.eh)(e,t,{...s,path:[...s.path,o?"oneOf":"anyOf",r]}));o?r.oneOf=a:r.anyOf=a},R=(e,t,r,s)=>{const i=e._zod.def,o=(0,n.eh)(i.left,t,{...s,path:[...s.path,"allOf",0]}),a=(0,n.eh)(i.right,t,{...s,path:[...s.path,"allOf",1]}),c=e=>"allOf"in e&&1===Object.keys(e).length,l=[...c(o)?o.allOf:[o],...c(a)?a.allOf:[a]];r.allOf=l},I=(e,t,r,s)=>{const i=r,o=e._zod.def;i.type="array";const a="draft-2020-12"===t.target?"prefixItems":"items",c="draft-2020-12"===t.target||"openapi-3.0"===t.target?"items":"additionalItems",l=o.items.map((e,r)=>(0,n.eh)(e,t,{...s,path:[...s.path,a,r]})),d=o.rest?(0,n.eh)(o.rest,t,{...s,path:[...s.path,c,..."openapi-3.0"===t.target?[o.items.length]:[]]}):null;"draft-2020-12"===t.target?(i.prefixItems=l,d&&(i.items=d)):"openapi-3.0"===t.target?(i.items={anyOf:l},d&&i.items.anyOf.push(d),i.minItems=l.length,d||(i.maxItems=l.length)):(i.items=l,d&&(i.additionalItems=d));const{minimum:u,maximum:h}=e._zod.bag;"number"==typeof u&&(i.minItems=u),"number"==typeof h&&(i.maxItems=h)},A=(e,t,r,s)=>{const i=r,o=e._zod.def;i.type="object","draft-07"!==t.target&&"draft-2020-12"!==t.target||(i.propertyNames=(0,n.eh)(o.keyType,t,{...s,path:[...s.path,"propertyNames"]})),i.additionalProperties=(0,n.eh)(o.valueType,t,{...s,path:[...s.path,"additionalProperties"]})},M=(e,t,r,s)=>{const i=e._zod.def,o=(0,n.eh)(i.innerType,t,s),a=t.seen.get(e);"openapi-3.0"===t.target?(a.ref=i.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},j=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType},z=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType,r.default=JSON.parse(JSON.stringify(i.defaultValue))},D=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType,"input"===t.io&&(r._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},L=(e,t,r,s)=>{const i=e._zod.def;let o;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType;try{o=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=o},F=(e,t,r,s)=>{const i=e._zod.def,o="input"===t.io?"transform"===i.in._zod.def.type?i.out:i.in:i.out;(0,n.eh)(o,t,s),t.seen.get(e).ref=o},U=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType,r.readOnly=!0},B=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType},q=(e,t,r,s)=>{const i=e._zod.def;(0,n.eh)(i.innerType,t,s),t.seen.get(e).ref=i.innerType},V=(e,t,r,s)=>{const i=e._zod.innerType;(0,n.eh)(i,t,s),t.seen.get(e).ref=i}},9543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(3789),s=r(7083);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:c}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===r?{schema:i,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===o||void 0===a||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:c,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:o,dataTypes:a,propertyName:c}){if(void 0!==o&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==r){const{errorPath:o,dataPathArr:a,opts:c}=t;d(l.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${o}${(0,s.getErrorPath)(r,i,c.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function d(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==o&&(d(o instanceof n.Name?o:l.let("data",o,!0)),void 0!==c&&(e.propertyName=c)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},9598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},9687:(e,t,r)=>{"use strict";e.exports=a;var n=r(1304);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var s=r(8811),i=r(3262),o=r(5047);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(s.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),t.edition&&(r._edition=t.edition),r.comment=t.comment,r._defaultEdition="proto3",r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;n.prototype.resolve.call(this);for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return this},a.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,n.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,s=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return s}},9752:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},9803:(e,t,r)=>{"use strict";r.d(t,{Gb0:()=>Kt,$ps:()=>tr,Dqv:()=>jt,CQL:()=>zt,BNI:()=>Vt,ITd:()=>Ht,sFi:()=>qt,CI7:()=>It,CnV:()=>At,bl8:()=>wt,Zu1:()=>St,t$E:()=>Mr,QPK:()=>Fe,YYK:()=>Lr,b03:()=>Gr,ZQQ:()=>Ft,o5y:()=>Qt,rvF:()=>Or,P0p:()=>ur,Oyg:()=>Dt,qGO:()=>yt,cG4:()=>_t,cV1:()=>o,VOE:()=>Sr,a$H:()=>u,CTp:()=>Cr,_AQ:()=>Hr,Zc9:()=>mt,Lc$:()=>xt,ZyE:()=>Nt,v1L:()=>Pt,KoL:()=>kt,$Nv:()=>Ot,Ax8:()=>$t,LJA:()=>hr,h80:()=>Lt,GYt:()=>Tt,kU:()=>Wr,nuC:()=>Er,rOG:()=>Rt,eb8:()=>vr,zPy:()=>jr,Pyd:()=>bt,Umr:()=>Yt,N$X:()=>Rr,x89:()=>Gt,ZQr:()=>$r,vzu:()=>Ut,Iab:()=>Bt,waU:()=>or,igI:()=>Pr,_mk:()=>zr,VFw:()=>Nr,hAA:()=>Zr,Sbs:()=>Br,hax:()=>yr,Oie:()=>br,$vM:()=>pt,EYA:()=>ft,Dws:()=>Ar,U5g:()=>Zt,da_:()=>Vr,Wc_:()=>Tr,G3x:()=>mr,W4S:()=>ht,g5t:()=>Et,VYh:()=>vt,Znh:()=>gt,Mvl:()=>Wt,L8w:()=>cr,GPR:()=>Jt,WHP:()=>Xt,TFq:()=>Ct,pm8:()=>dr,xIx:()=>s,KA8:()=>Ln,dZg:()=>bs,rty:()=>vn,cUp:()=>_n,z$y:()=>In,_Le:()=>Rn,UyX:()=>gn,gPm:()=>yn,fsu:()=>cn,BjO:()=>ln,FOv:()=>Ss,YY6:()=>qn,e2D:()=>C,or4:()=>k,KBX:()=>bn,Mue:()=>Xr,aCo:()=>on,MvX:()=>E,GWO:()=>T,ERr:()=>us,K2:()=>ws,HLV:()=>$n,g6z:()=>On,TxR:()=>Wn,qmM:()=>Gn,tB6:()=>Qr,dRF:()=>ls,LKT:()=>Pn,swT:()=>xn,Jg2:()=>An,NyF:()=>pn,$O6:()=>fn,dbS:()=>En,G1$:()=>Sn,f25:()=>Tn,KnZ:()=>Cn,rkn:()=>wn,_zn:()=>hn,YAm:()=>is,hH9:()=>as,AuJ:()=>Hn,Zm2:()=>Zn,R8V:()=>mn,Ebs:()=>ns,vL7:()=>es,GZZ:()=>ps,m9B:()=>ss,Ndf:()=>ts,HiR:()=>Qn,L4d:()=>Vn,Dl9:()=>an,bRU:()=>Jn,G8g:()=>Un,UIm:()=>Xn,ejI:()=>Yn,loG:()=>ms,jwX:()=>Dn,F7R:()=>kn,bS9:()=>fs,Tjm:()=>m,Rb:()=>y,NCA:()=>Kn,Jfo:()=>hs,fUZ:()=>Es,Fkv:()=>os,VSu:()=>$,R3:()=>x,rhe:()=>P,v_W:()=>O,Ody:()=>_,wGr:()=>w,d$Q:()=>rs,TLt:()=>_s,$S2:()=>ds,Rle:()=>Yr,Af7:()=>$s,fIQ:()=>Ps,MBo:()=>Cs,W7i:()=>jn,Ilv:()=>ys,xYx:()=>vs,WN0:()=>gs,Pay:()=>Nn,ii$:()=>Mn,CtB:()=>dn,E4e:()=>zn,emL:()=>Fn,qFb:()=>cs,Fnx:()=>sn,Bem:()=>en,nA:()=>tn,pYI:()=>rn,wAW:()=>nn,OCf:()=>Bn,Pwh:()=>un,o8B:()=>l.clone,$WB:()=>c,q0y:()=>Ts,JMU:()=>p,Wk_:()=>f,fd:()=>Jr.fd,mIj:()=>ks,A$I:()=>n,xLC:()=>b,ZSL:()=>l});var n={};function s(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:o,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);const s=o.prototype,i=Object.keys(s);for(let e=0;e<i.length;e++){const t=i[e];t in r||(r[t]=s[t].bind(r))}}const s=r?.Parent??Object;class i extends s{}function o(e){var t;const s=r?.Parent?new i:this;n(s,e),(t=s._zod).deferred??(t.deferred=[]);for(const e of s._zod.deferred)e();return s}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}r.r(n),r.d(n,{base64:()=>ne,base64url:()=>se,bigint:()=>fe,boolean:()=>ye,browserEmail:()=>K,cidrv4:()=>te,cidrv6:()=>re,cuid:()=>N,cuid2:()=>R,date:()=>le,datetime:()=>he,domain:()=>oe,duration:()=>z,e164:()=>ae,email:()=>V,emoji:()=>Y,extendedDuration:()=>D,guid:()=>L,hex:()=>Se,hostname:()=>ie,html5Email:()=>H,idnEmail:()=>G,integer:()=>me,ipv4:()=>X,ipv6:()=>Q,ksuid:()=>M,lowercase:()=>be,mac:()=>ee,md5_base64:()=>ke,md5_base64url:()=>Pe,md5_hex:()=>Te,nanoid:()=>j,null:()=>ve,number:()=>ge,rfc5322Email:()=>Z,sha1_base64:()=>Oe,sha1_base64url:()=>xe,sha1_hex:()=>$e,sha256_base64:()=>Re,sha256_base64url:()=>Ie,sha256_hex:()=>Ne,sha384_base64:()=>Me,sha384_base64url:()=>je,sha384_hex:()=>Ae,sha512_base64:()=>De,sha512_base64url:()=>Le,sha512_hex:()=>ze,string:()=>pe,time:()=>ue,ulid:()=>I,undefined:()=>_e,unicodeEmail:()=>W,uppercase:()=>we,uuid:()=>F,uuid4:()=>U,uuid6:()=>B,uuid7:()=>q,xid:()=>A}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class i extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class o extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const a={};function c(e){return e&&Object.assign(a,e),a}var l=r(2503);const d=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,l.jsonStringifyReplacer,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},u=s("$ZodError",d),h=s("$ZodError",d,{Parent:Error});function p(e,t=e=>e.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function f(e,t=e=>e.message){const r={_errors:[]},n=e=>{for(const s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>n({issues:e}));else if("invalid_key"===s.code)n({issues:s.issues});else if("invalid_element"===s.code)n({issues:s.issues});else if(0===s.path.length)r._errors.push(t(s));else{let e=r,n=0;for(;n<s.path.length;){const r=s.path[n];n===s.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(s))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}const m=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new i;if(a.issues.length){const t=new(s?.Err??e)(a.issues.map(e=>l.finalizeIssue(e,o,c())));throw l.captureStackTrace(t,s?.callee),t}return a.value},g=m(h),y=e=>async(t,r,n,s)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const t=new(s?.Err??e)(o.issues.map(e=>l.finalizeIssue(e,i,c())));throw l.captureStackTrace(t,s?.callee),t}return o.value},v=y(h),_=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new i;return o.issues.length?{success:!1,error:new(e??u)(o.issues.map(e=>l.finalizeIssue(e,s,c())))}:{success:!0,data:o.value}},b=_(h),w=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>l.finalizeIssue(e,s,c())))}:{success:!0,data:i.value}},S=w(h),E=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return m(e)(t,r,s)},C=e=>(t,r,n)=>m(e)(t,r,n),T=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return y(e)(t,r,s)},k=e=>async(t,r,n)=>y(e)(t,r,n),P=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return _(e)(t,r,s)},$=e=>(t,r,n)=>_(e)(t,r,n),O=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return w(e)(t,r,s)},x=e=>async(t,r,n)=>w(e)(t,r,n),N=/^[cC][^\s-]{8,}$/,R=/^[0-9a-z]+$/,I=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,A=/^[0-9a-vA-V]{20}$/,M=/^[A-Za-z0-9]{27}$/,j=/^[a-zA-Z0-9_-]{21}$/,z=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,D=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,L=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,F=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,U=F(4),B=F(6),q=F(7),V=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,H=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,W=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,G=W,K=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,J="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Y(){return new RegExp(J,"u")}const X=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Q=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ee=e=>{const t=l.escapeRegex(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},te=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,re=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ne=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,se=/^[A-Za-z0-9_-]*$/,ie=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,oe=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,ae=/^\+(?:[0-9]){6,14}[0-9]$/,ce="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",le=new RegExp(`^${ce}$`);function de(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ue(e){return new RegExp(`^${de(e)}$`)}function he(e){const t=de({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ce}T(?:${n})$`)}const pe=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),fe=/^-?\d+n?$/,me=/^-?\d+$/,ge=/^-?\d+(?:\.\d+)?/,ye=/^(?:true|false)$/i,ve=/^null$/i,_e=/^undefined$/i,be=/^[^A-Z]*$/,we=/^[^a-z]*$/,Se=/^[0-9a-fA-F]*$/;function Ee(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function Ce(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const Te=/^[0-9a-fA-F]{32}$/,ke=Ee(22,"=="),Pe=Ce(22),$e=/^[0-9a-fA-F]{40}$/,Oe=Ee(27,"="),xe=Ce(27),Ne=/^[0-9a-fA-F]{64}$/,Re=Ee(43,"="),Ie=Ce(43),Ae=/^[0-9a-fA-F]{96}$/,Me=Ee(64,""),je=Ce(64),ze=/^[0-9a-fA-F]{128}$/,De=Ee(86,"=="),Le=Ce(86),Fe=s("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Ue={number:"number",bigint:"bigint",object:"date"},Be=s("$ZodCheckLessThan",(e,t)=>{Fe.init(e,t);const r=Ue[typeof t.value];e._zod.onattach.push(e=>{const r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qe=s("$ZodCheckGreaterThan",(e,t)=>{Fe.init(e,t);const r=Ue[typeof t.value];e._zod.onattach.push(e=>{const r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ve=s("$ZodCheckMultipleOf",(e,t)=>{Fe.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===l.floatSafeRemainder(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),He=s("$ZodCheckNumberFormat",(e,t)=>{Fe.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[s,i]=l.NUMBER_FORMAT_RANGES[t.format];e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,n.minimum=s,n.maximum=i,r&&(n.pattern=me)}),e._zod.check=o=>{const a=o.value;if(r){if(!Number.isInteger(a))return void o.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}a<s&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),a>i&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),Ze=s("$ZodCheckBigIntFormat",(e,t)=>{Fe.init(e,t);const[r,n]=l.BIGINT_FORMAT_RANGES[t.format];e._zod.onattach.push(e=>{const s=e._zod.bag;s.format=t.format,s.minimum=r,s.maximum=n}),e._zod.check=s=>{const i=s.value;i<r&&s.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),i>n&&s.issues.push({origin:"bigint",input:i,code:"too_big",maximum:n,inst:e})}}),We=s("$ZodCheckMaxSize",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const n=r.value;n.size<=t.maximum||r.issues.push({origin:l.getSizableOrigin(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Ge=s("$ZodCheckMinSize",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const n=r.value;n.size>=t.minimum||r.issues.push({origin:l.getSizableOrigin(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Ke=s("$ZodCheckSizeEquals",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{const n=r.value,s=n.size;if(s===t.size)return;const i=s>t.size;r.issues.push({origin:l.getSizableOrigin(n),...i?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Je=s("$ZodCheckMaxLength",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const n=r.value;if(n.length<=t.maximum)return;const s=l.getLengthableOrigin(n);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Ye=s("$ZodCheckMinLength",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const n=r.value;if(n.length>=t.minimum)return;const s=l.getLengthableOrigin(n);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Xe=s("$ZodCheckLengthEquals",(e,t)=>{var r;Fe.init(e,t),(r=e._zod.def).when??(r.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{const n=r.value,s=n.length;if(s===t.length)return;const i=l.getLengthableOrigin(n),o=s>t.length;r.issues.push({origin:i,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Qe=s("$ZodCheckStringFormat",(e,t)=>{var r,n;Fe.init(e,t),e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),et=s("$ZodCheckRegex",(e,t)=>{Qe.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),tt=s("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=be),Qe.init(e,t)}),rt=s("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=we),Qe.init(e,t)}),nt=s("$ZodCheckIncludes",(e,t)=>{Fe.init(e,t);const r=l.escapeRegex(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),st=s("$ZodCheckStartsWith",(e,t)=>{Fe.init(e,t);const r=new RegExp(`^${l.escapeRegex(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),it=s("$ZodCheckEndsWith",(e,t)=>{Fe.init(e,t);const r=new RegExp(`.*${l.escapeRegex(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function ot(e,t,r){e.issues.length&&t.issues.push(...l.prefixIssues(r,e.issues))}const at=s("$ZodCheckProperty",(e,t)=>{Fe.init(e,t),e._zod.check=e=>{const r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>ot(r,e,t.property));ot(r,e,t.property)}}),ct=s("$ZodCheckMimeType",(e,t)=>{Fe.init(e,t);const r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),lt=s("$ZodCheckOverwrite",(e,t)=>{Fe.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class dt{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),n=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(const e of n)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const ut={major:4,minor:2,patch:1},ht=s("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ut;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const t of n)for(const r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,r)=>{let n,s=l.aborted(e);for(const o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(s)continue;const t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&!1===r?.async)throw new i;if(n||a instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(s||(s=l.aborted(e,t)))});else{if(e.issues.length===t)continue;s||(s=l.aborted(e,t))}}return n?n.then(()=>e):e},r=(r,s,o)=>{if(l.aborted(r))return r.aborted=!0,r;const a=t(s,n,o);if(a instanceof Promise){if(!1===o.async)throw new i;return a.then(t=>e._zod.parse(t,o))}return e._zod.parse(a,o)};e._zod.run=(s,o)=>{if(o.skipChecks)return e._zod.parse(s,o);if("backward"===o.direction){const t=e._zod.parse({value:s.value,issues:[]},{...o,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,s,o)):r(t,s,o)}const a=e._zod.parse(s,o);if(a instanceof Promise){if(!1===o.async)throw new i;return a.then(e=>t(e,n,o))}return t(a,n,o)}}e["~standard"]={validate:t=>{try{const r=b(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return S(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),pt=s("$ZodString",(e,t)=>{ht.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??pe(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(n){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),ft=s("$ZodStringFormat",(e,t)=>{Qe.init(e,t),pt.init(e,t)}),mt=s("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=L),ft.init(e,t)}),gt=s("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=F(e))}else t.pattern??(t.pattern=F());ft.init(e,t)}),yt=s("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=V),ft.init(e,t)}),vt=s("$ZodURL",(e,t)=>{ft.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),void(t.normalize?r.value=s.href:r.value=n)}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),_t=s("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Y()),ft.init(e,t)}),bt=s("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=j),ft.init(e,t)}),wt=s("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=N),ft.init(e,t)}),St=s("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=R),ft.init(e,t)}),Et=s("$ZodULID",(e,t)=>{t.pattern??(t.pattern=I),ft.init(e,t)}),Ct=s("$ZodXID",(e,t)=>{t.pattern??(t.pattern=A),ft.init(e,t)}),Tt=s("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=M),ft.init(e,t)}),kt=s("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=he(t)),ft.init(e,t)}),Pt=s("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=le),ft.init(e,t)}),$t=s("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ue(t)),ft.init(e,t)}),Ot=s("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=z),ft.init(e,t)}),xt=s("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=X),ft.init(e,t),e._zod.bag.format="ipv4"}),Nt=s("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Q),ft.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Rt=s("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=ee(t.delimiter)),ft.init(e,t),e._zod.bag.format="mac"}),It=s("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=te),ft.init(e,t)}),At=s("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=re),ft.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(2!==n.length)throw new Error;const[e,t]=n;if(!t)throw new Error;const r=Number(t);if(`${r}`!==t)throw new Error;if(r<0||r>128)throw new Error;new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Mt(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const jt=s("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ne),ft.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{Mt(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}}),zt=s("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=se),ft.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{(function(e){if(!se.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Mt(t.padEnd(4*Math.ceil(t.length/4),"="))})(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Dt=s("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ae),ft.init(e,t)}),Lt=s("$ZodJWT",(e,t)=>{ft.init(e,t),e._zod.check=r=>{(function(e,t=null){try{const r=e.split(".");if(3!==r.length)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&"JWT"!==s?.typ||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}})(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Ft=s("$ZodCustomStringFormat",(e,t)=>{ft.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),Ut=s("$ZodNumber",(e,t)=>{ht.init(e,t),e._zod.pattern=e._zod.bag.pattern??ge,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}const s=r.value;if("number"==typeof s&&!Number.isNaN(s)&&Number.isFinite(s))return r;const i="number"==typeof s?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...i?{received:i}:{}}),r}}),Bt=s("$ZodNumberFormat",(e,t)=>{He.init(e,t),Ut.init(e,t)}),qt=s("$ZodBoolean",(e,t)=>{ht.init(e,t),e._zod.pattern=ye,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Boolean(r.value)}catch(e){}const s=r.value;return"boolean"==typeof s||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),Vt=s("$ZodBigInt",(e,t)=>{ht.init(e,t),e._zod.pattern=fe,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),Ht=s("$ZodBigIntFormat",(e,t)=>{Ze.init(e,t),Vt.init(e,t)}),Zt=s("$ZodSymbol",(e,t)=>{ht.init(e,t),e._zod.parse=(t,r)=>{const n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),Wt=s("$ZodUndefined",(e,t)=>{ht.init(e,t),e._zod.pattern=_e,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{const n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),Gt=s("$ZodNull",(e,t)=>{ht.init(e,t),e._zod.pattern=ve,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{const n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),Kt=s("$ZodAny",(e,t)=>{ht.init(e,t),e._zod.parse=e=>e}),Jt=s("$ZodUnknown",(e,t)=>{ht.init(e,t),e._zod.parse=e=>e}),Yt=s("$ZodNever",(e,t)=>{ht.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),Xt=s("$ZodVoid",(e,t)=>{ht.init(e,t),e._zod.parse=(t,r)=>{const n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),Qt=s("$ZodDate",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}const s=r.value,i=s instanceof Date;return i&&!Number.isNaN(s.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:s,...i?{received:"Invalid Date"}:{},inst:e}),r}});function er(e,t,r){e.issues.length&&t.issues.push(...l.prefixIssues(r,e.issues)),t.value[r]=e.value}const tr=s("$ZodArray",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const i=[];for(let e=0;e<s.length;e++){const o=s[e],a=t.element._zod.run({value:o,issues:[]},n);a instanceof Promise?i.push(a.then(t=>er(t,r,e))):er(a,r,e)}return i.length?Promise.all(i).then(()=>r):r}});function rr(e,t,r,n){e.issues.length&&t.issues.push(...l.prefixIssues(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function nr(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const r=l.optionalKeys(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function sr(e,t,r,n,s,i){const o=[],a=s.keySet,c=s.catchall._zod,l=c.def.type;for(const s in t){if(a.has(s))continue;if("never"===l){o.push(s);continue}const i=c.run({value:t[s],issues:[]},n);i instanceof Promise?e.push(i.then(e=>rr(e,r,s,t))):rr(i,r,s,t)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}const ir=s("$ZodObject",(e,t)=>{ht.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!r?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}const n=l.cached(()=>nr(t));l.defineLazy(e._zod,"propValues",()=>{const e=t.shape,r={};for(const t in e){const n=e[t]._zod;if(n.values){r[t]??(r[t]=new Set);for(const e of n.values)r[t].add(e)}}return r});const s=l.isObject,i=t.catchall;let o;e._zod.parse=(t,r)=>{o??(o=n.value);const a=t.value;if(!s(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};const c=[],l=o.shape;for(const e of o.keys){const n=l[e]._zod.run({value:a[e],issues:[]},r);n instanceof Promise?c.push(n.then(r=>rr(r,t,e,a))):rr(n,t,e,a)}return i?sr(c,a,t,r,n.value,e):c.length?Promise.all(c).then(()=>t):t}}),or=s("$ZodObjectJIT",(e,t)=>{ir.init(e,t);const r=e._zod.parse,n=l.cached(()=>nr(t));let s;const i=l.isObject,o=!a.jitless,c=l.allowsEval,d=o&&c.value,u=t.catchall;let h;e._zod.parse=(a,c)=>{h??(h=n.value);const p=a.value;return i(p)?o&&d&&!1===c?.async&&!0!==c.jitless?(s||(s=(e=>{const t=new dt(["shape","payload","ctx"]),r=n.value,s=e=>{const t=l.esc(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let o=0;for(const e of r.keys)i[e]="key_"+o++;t.write("const newResult = {};");for(const e of r.keys){const r=i[e],n=l.esc(e);t.write(`const ${r} = ${s(e)};`),t.write(`\n        if (${r}.issues.length) {\n          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${n}, ...iss.path] : [${n}]\n          })));\n        }\n        \n        \n        if (${r}.value === undefined) {\n          if (${n} in input) {\n            newResult[${n}] = undefined;\n          }\n        } else {\n          newResult[${n}] = ${r}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const a=t.compile();return(t,r)=>a(e,t,r)})(t.shape)),a=s(a,c),u?sr([],p,a,c,h,e):a):r(a,c):(a.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),a)}});function ar(e,t,r,n){for(const r of e)if(0===r.issues.length)return t.value=r.value,t;const s=e.filter(e=>!l.aborted(e));return 1===s.length?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>l.finalizeIssue(e,n,c())))}),t)}const cr=s("$ZodUnion",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),l.defineLazy(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),l.defineLazy(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),l.defineLazy(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>l.cleanRegex(e.source)).join("|")})$`)}});const r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:s.value,issues:[]},i);if(t instanceof Promise)a.push(t),o=!0;else{if(0===t.issues.length)return t;a.push(t)}}return o?Promise.all(a).then(t=>ar(t,s,e,i)):ar(a,s,e,i)}});function lr(e,t,r,n){const s=e.filter(e=>0===e.issues.length);return 1===s.length?(t.value=s[0].value,t):(0===s.length?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>l.finalizeIssue(e,n,c())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t)}const dr=s("$ZodXor",(e,t)=>{cr.init(e,t),t.inclusive=!1;const r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(s,i)=>{if(r)return n(s,i);let o=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:s.value,issues:[]},i);t instanceof Promise?(a.push(t),o=!0):a.push(t)}return o?Promise.all(a).then(t=>lr(t,s,e,i)):lr(a,s,e,i)}}),ur=s("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,cr.init(e,t);const r=e._zod.parse;l.defineLazy(e._zod,"propValues",()=>{const e={};for(const r of t.options){const n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const[t,r]of Object.entries(n)){e[t]||(e[t]=new Set);for(const n of r)e[t].add(n)}}return e});const n=l.cached(()=>{const e=t.options,r=new Map;for(const n of e){const e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const t of e){if(r.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(s,i)=>{const o=s.value;if(!l.isObject(o))return s.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),s;const a=n.value.get(o?.[t.discriminator]);return a?a._zod.run(s,i):t.unionFallback?r(s,i):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),s)}}),hr=s("$ZodIntersection",(e,t)=>{ht.init(e,t),e._zod.parse=(e,r)=>{const n=e.value,s=t.left._zod.run({value:n,issues:[]},r),i=t.right._zod.run({value:n,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([t,r])=>fr(e,t,r)):fr(e,s,i)}});function pr(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(l.isPlainObject(e)&&l.isPlainObject(t)){const r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),s={...e,...t};for(const r of n){const n=pr(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};s[r]=n.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=pr(e[n],t[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function fr(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),l.aborted(e))return e;const n=pr(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const mr=s("$ZodTuple",(e,t)=>{ht.init(e,t);const r=t.items;e._zod.parse=(n,s)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({input:i,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];const o=[],a=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),c=-1===a?0:r.length-a;if(!t.rest){const t=i.length>r.length,s=i.length<c-1;if(t||s)return n.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:e,origin:"array"}),n}let l=-1;for(const e of r){if(l++,l>=i.length&&l>=c)continue;const t=e._zod.run({value:i[l],issues:[]},s);t instanceof Promise?o.push(t.then(e=>gr(e,n,l))):gr(t,n,l)}if(t.rest){const e=i.slice(r.length);for(const r of e){l++;const e=t.rest._zod.run({value:r,issues:[]},s);e instanceof Promise?o.push(e.then(e=>gr(e,n,l))):gr(e,n,l)}}return o.length?Promise.all(o).then(()=>n):n}});function gr(e,t,r){e.issues.length&&t.issues.push(...l.prefixIssues(r,e.issues)),t.value[r]=e.value}const yr=s("$ZodRecord",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!l.isPlainObject(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const i=[],o=t.keyType._zod.values;if(o){r.value={};const a=new Set;for(const e of o)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){a.add("number"==typeof e?e.toString():e);const o=t.valueType._zod.run({value:s[e],issues:[]},n);o instanceof Promise?i.push(o.then(t=>{t.issues.length&&r.issues.push(...l.prefixIssues(e,t.issues)),r.value[e]=t.value})):(o.issues.length&&r.issues.push(...l.prefixIssues(e,o.issues)),r.value[e]=o.value)}let c;for(const e in s)a.has(e)||(c=c??[],c.push(e));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:c})}else{r.value={};for(const o of Reflect.ownKeys(s)){if("__proto__"===o)continue;const a=t.keyType._zod.run({value:o,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){"loose"===t.mode?r.value[o]=s[o]:r.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(e=>l.finalizeIssue(e,n,c())),input:o,path:[o],inst:e});continue}const d=t.valueType._zod.run({value:s[o],issues:[]},n);d instanceof Promise?i.push(d.then(e=>{e.issues.length&&r.issues.push(...l.prefixIssues(o,e.issues)),r.value[a.value]=e.value})):(d.issues.length&&r.issues.push(...l.prefixIssues(o,d.issues)),r.value[a.value]=d.value)}}return i.length?Promise.all(i).then(()=>r):r}}),vr=s("$ZodMap",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!(s instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:s,inst:e}),r;const i=[];r.value=new Map;for(const[o,a]of s){const c=t.keyType._zod.run({value:o,issues:[]},n),l=t.valueType._zod.run({value:a,issues:[]},n);c instanceof Promise||l instanceof Promise?i.push(Promise.all([c,l]).then(([t,i])=>{_r(t,i,r,o,s,e,n)})):_r(c,l,r,o,s,e,n)}return i.length?Promise.all(i).then(()=>r):r}});function _r(e,t,r,n,s,i,o){e.issues.length&&(l.propertyKeyTypes.has(typeof n)?r.issues.push(...l.prefixIssues(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:s,inst:i,issues:e.issues.map(e=>l.finalizeIssue(e,o,c()))})),t.issues.length&&(l.propertyKeyTypes.has(typeof n)?r.issues.push(...l.prefixIssues(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:s,inst:i,key:n,issues:t.issues.map(e=>l.finalizeIssue(e,o,c()))})),r.value.set(e.value,t.value)}const br=s("$ZodSet",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!(s instanceof Set))return r.issues.push({input:s,inst:e,expected:"set",code:"invalid_type"}),r;const i=[];r.value=new Set;for(const e of s){const s=t.valueType._zod.run({value:e,issues:[]},n);s instanceof Promise?i.push(s.then(e=>wr(e,r))):wr(s,r)}return i.length?Promise.all(i).then(()=>r):r}});function wr(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const Sr=s("$ZodEnum",(e,t)=>{ht.init(e,t);const r=l.getEnumValues(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(e=>l.propertyKeyTypes.has(typeof e)).map(e=>"string"==typeof e?l.escapeRegex(e):e.toString()).join("|")})$`),e._zod.parse=(t,s)=>{const i=t.value;return n.has(i)||t.issues.push({code:"invalid_value",values:r,input:i,inst:e}),t}}),Er=s("$ZodLiteral",(e,t)=>{if(ht.init(e,t),0===t.values.length)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?l.escapeRegex(e):e?l.escapeRegex(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,s)=>{const i=n.value;return r.has(i)||n.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),n}}),Cr=s("$ZodFile",(e,t)=>{ht.init(e,t),e._zod.parse=(t,r)=>{const n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),Tr=s("$ZodTransform",(e,t)=>{ht.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new o(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(e=>(r.value=e,r));if(s instanceof Promise)throw new i;return r.value=s,r}});function kr(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const Pr=s("$ZodOptional",(e,t)=>{ht.init(e,t),e._zod.optin="optional",e._zod.optout="optional",l.defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),l.defineLazy(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${l.cleanRegex(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>kr(t,e.value)):kr(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),$r=s("$ZodNullable",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),l.defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),l.defineLazy(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${l.cleanRegex(e.source)}|null)$`):void 0}),l.defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),Or=s("$ZodDefault",(e,t)=>{ht.init(e,t),e._zod.optin="optional",l.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>xr(e,t)):xr(n,t)}});function xr(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Nr=s("$ZodPrefault",(e,t)=>{ht.init(e,t),e._zod.optin="optional",l.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),Rr=s("$ZodNonOptional",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(t=>Ir(t,e)):Ir(s,e)}});function Ir(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Ar=s("$ZodSuccess",(e,t)=>{ht.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new o("ZodSuccess");const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),Mr=s("$ZodCatch",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),l.defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),l.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>l.finalizeIssue(e,r,c()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>l.finalizeIssue(e,r,c()))},input:e.value}),e.issues=[]),e)}}),jr=s("$ZodNaN",(e,t)=>{ht.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),zr=s("$ZodPipe",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"values",()=>t.in._zod.values),l.defineLazy(e._zod,"optin",()=>t.in._zod.optin),l.defineLazy(e._zod,"optout",()=>t.out._zod.optout),l.defineLazy(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){const n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>Dr(e,t.in,r)):Dr(n,t.in,r)}const n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>Dr(e,t.out,r)):Dr(n,t.out,r)}});function Dr(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Lr=s("$ZodCodec",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"values",()=>t.in._zod.values),l.defineLazy(e._zod,"optin",()=>t.in._zod.optin),l.defineLazy(e._zod,"optout",()=>t.out._zod.optout),l.defineLazy(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){const n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>Fr(e,t,r)):Fr(n,t,r)}{const n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>Fr(e,t,r)):Fr(n,t,r)}}});function Fr(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){const n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>Ur(e,n,t.out,r)):Ur(e,n,t.out,r)}{const n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>Ur(e,n,t.in,r)):Ur(e,n,t.in,r)}}function Ur(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}const Br=s("$ZodReadonly",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"propValues",()=>t.innerType._zod.propValues),l.defineLazy(e._zod,"values",()=>t.innerType._zod.values),l.defineLazy(e._zod,"optin",()=>t.innerType?._zod?.optin),l.defineLazy(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);const n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(qr):qr(n)}});function qr(e){return e.value=Object.freeze(e.value),e}const Vr=s("$ZodTemplateLiteral",(e,t)=>{ht.init(e,t);const r=[];for(const e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);const t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${e._zod.traits}`);const n=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,s))}else{if(null!==e&&!l.primitiveTypes.has(typeof e))throw new Error(`Invalid template literal part: ${e}`);r.push(l.escapeRegex(`${e}`))}e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>"string"!=typeof r.value?(r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}),r):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),r)}),Hr=s("$ZodFunction",(e,t)=>(ht.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw new Error("implement() must be called with a function");return function(...r){const n=e._def.input?g(e._def.input,r):r,s=Reflect.apply(t,this,n);return e._def.output?g(e._def.output,s):s}},e.implementAsync=t=>{if("function"!=typeof t)throw new Error("implementAsync() must be called with a function");return async function(...r){const n=e._def.input?await v(e._def.input,r):r,s=await Reflect.apply(t,this,n);return e._def.output?await v(e._def.output,s):s}},e._zod.parse=(t,r)=>{if("function"!=typeof t.value)return t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}),t;const n=e._def.output&&"promise"===e._def.output._zod.def.type;return t.value=n?e.implementAsync(t.value):e.implement(t.value),t},e.input=(...t)=>{const r=e.constructor;return Array.isArray(t[0])?new r({type:"function",input:new mr({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}):new r({type:"function",input:t[0],output:e._def.output})},e.output=t=>new(0,e.constructor)({type:"function",input:e._def.input,output:t}),e)),Zr=s("$ZodPromise",(e,t)=>{ht.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),Wr=s("$ZodLazy",(e,t)=>{ht.init(e,t),l.defineLazy(e._zod,"innerType",()=>t.getter()),l.defineLazy(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),l.defineLazy(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),l.defineLazy(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),l.defineLazy(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),Gr=s("$ZodCustom",(e,t)=>{Fe.init(e,t),ht.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(t=>Kr(t,r,n,e));Kr(s,r,n,e)}});function Kr(e,t,r,n){if(!e){const e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(l.issue(e))}}r(3549);var Jr=r(1584);function Yr(e,t){return new e({type:"string",...l.normalizeParams(t)})}function Xr(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...l.normalizeParams(t)})}function Qr(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function en(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function tn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...l.normalizeParams(t)})}function rn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...l.normalizeParams(t)})}function nn(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...l.normalizeParams(t)})}function sn(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...l.normalizeParams(t)})}function on(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...l.normalizeParams(t)})}function an(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function cn(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function ln(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...l.normalizeParams(t)})}function dn(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function un(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function hn(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...l.normalizeParams(t)})}function pn(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...l.normalizeParams(t)})}function fn(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...l.normalizeParams(t)})}function mn(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...l.normalizeParams(t)})}function gn(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...l.normalizeParams(t)})}function yn(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...l.normalizeParams(t)})}function vn(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...l.normalizeParams(t)})}function _n(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...l.normalizeParams(t)})}function bn(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...l.normalizeParams(t)})}function wn(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...l.normalizeParams(t)})}function Sn(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...l.normalizeParams(t)})}function En(e,t){return new e({type:"string",format:"date",check:"string_format",...l.normalizeParams(t)})}function Cn(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...l.normalizeParams(t)})}function Tn(e,t){return new e({type:"string",format:"duration",check:"string_format",...l.normalizeParams(t)})}function kn(e,t){return new e({type:"number",checks:[],...l.normalizeParams(t)})}function Pn(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...l.normalizeParams(t)})}function $n(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...l.normalizeParams(t)})}function On(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...l.normalizeParams(t)})}function xn(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...l.normalizeParams(t)})}function Nn(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...l.normalizeParams(t)})}function Rn(e,t){return new e({type:"boolean",...l.normalizeParams(t)})}function In(e,t){return new e({type:"bigint",...l.normalizeParams(t)})}function An(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...l.normalizeParams(t)})}function Mn(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...l.normalizeParams(t)})}function jn(e,t){return new e({type:"symbol",...l.normalizeParams(t)})}function zn(e,t){return new e({type:"undefined",...l.normalizeParams(t)})}function Dn(e,t){return new e({type:"null",...l.normalizeParams(t)})}function Ln(e){return new e({type:"any"})}function Fn(e){return new e({type:"unknown"})}function Un(e,t){return new e({type:"never",...l.normalizeParams(t)})}function Bn(e,t){return new e({type:"void",...l.normalizeParams(t)})}function qn(e,t){return new e({type:"date",...l.normalizeParams(t)})}function Vn(e,t){return new e({type:"nan",...l.normalizeParams(t)})}function Hn(e,t){return new Be({check:"less_than",...l.normalizeParams(t),value:e,inclusive:!1})}function Zn(e,t){return new Be({check:"less_than",...l.normalizeParams(t),value:e,inclusive:!0})}function Wn(e,t){return new qe({check:"greater_than",...l.normalizeParams(t),value:e,inclusive:!1})}function Gn(e,t){return new qe({check:"greater_than",...l.normalizeParams(t),value:e,inclusive:!0})}function Kn(e){return Wn(0,e)}function Jn(e){return Hn(0,e)}function Yn(e){return Zn(0,e)}function Xn(e){return Gn(0,e)}function Qn(e,t){return new Ve({check:"multiple_of",...l.normalizeParams(t),value:e})}function es(e,t){return new We({check:"max_size",...l.normalizeParams(t),maximum:e})}function ts(e,t){return new Ge({check:"min_size",...l.normalizeParams(t),minimum:e})}function rs(e,t){return new Ke({check:"size_equals",...l.normalizeParams(t),size:e})}function ns(e,t){return new Je({check:"max_length",...l.normalizeParams(t),maximum:e})}function ss(e,t){return new Ye({check:"min_length",...l.normalizeParams(t),minimum:e})}function is(e,t){return new Xe({check:"length_equals",...l.normalizeParams(t),length:e})}function os(e,t){return new et({check:"string_format",format:"regex",...l.normalizeParams(t),pattern:e})}function as(e){return new tt({check:"string_format",format:"lowercase",...l.normalizeParams(e)})}function cs(e){return new rt({check:"string_format",format:"uppercase",...l.normalizeParams(e)})}function ls(e,t){return new nt({check:"string_format",format:"includes",...l.normalizeParams(t),includes:e})}function ds(e,t){return new st({check:"string_format",format:"starts_with",...l.normalizeParams(t),prefix:e})}function us(e,t){return new it({check:"string_format",format:"ends_with",...l.normalizeParams(t),suffix:e})}function hs(e,t,r){return new at({check:"property",property:e,schema:t,...l.normalizeParams(r)})}function ps(e,t){return new ct({check:"mime_type",mime:e,...l.normalizeParams(t)})}function fs(e){return new lt({check:"overwrite",tx:e})}function ms(e){return fs(t=>t.normalize(e))}function gs(){return fs(e=>e.trim())}function ys(){return fs(e=>e.toLowerCase())}function vs(){return fs(e=>e.toUpperCase())}function _s(){return fs(e=>l.slugify(e))}function bs(e,t,r){return new e({type:"array",element:t,...l.normalizeParams(r)})}function ws(e,t){return new e({type:"file",...l.normalizeParams(t)})}function Ss(e,t,r){const n=l.normalizeParams(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function Es(e,t,r){return new e({type:"custom",check:"custom",fn:t,...l.normalizeParams(r)})}function Cs(e){const t=function(e){const t=new Fe({check:"custom",...l.normalizeParams(void 0)});return t._zod.check=e,t}(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(l.issue(e,r.value,t._zod.def));else{const n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(l.issue(n))}},e(r.value,r)));return t}function Ts(e){const t=new Fe({check:"describe"});return t._zod.onattach=[t=>{const r=Jr.fd.get(t)??{};Jr.fd.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function ks(e){const t=new Fe({check:"meta"});return t._zod.onattach=[t=>{const r=Jr.fd.get(t)??{};Jr.fd.add(t,{...r,...e})}],t._zod.check=()=>{},t}function Ps(e,t){const r=l.normalizeParams(t);let n=r.truthy??["true","1","yes","on","y","enabled"],s=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),s=s.map(e=>"string"==typeof e?e.toLowerCase():e));const i=new Set(n),o=new Set(s),a=e.Codec??Lr,c=e.Boolean??qt,d=new a({type:"pipe",in:new(e.String??pt)({type:"string",error:r.error}),out:new c({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!i.has(n)||!o.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...o],input:t.value,inst:d,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":s[0]||"false",error:r.error});return d}function $s(e,t,r,n={}){const s=l.normalizeParams(n),i={...l.normalizeParams(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...s};return r instanceof RegExp&&(i.pattern=r),new e(i)}r(7153),r(9531)},9810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(5583),s=r(8840),i=r(5335),o=r(8840),a=r(5590),c=r(2657),l=r(9543),d=r(3789),u=r(6735),h=r(3043),p=r(7083),f=r(2796);function m({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,n.$async,()=>{e.code(d._`"use strict"; ${g(r,s)}`),function(e,t){e.if(u.default.valCxt,()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)})}(e,s),e.code(i)}):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(s)}`,n.$async,()=>e.code(g(r,s)).code(i))}function g(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?d._`/*# sourceURL=${r} */`:d.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function _(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function b(e,t){if(e.opts.jtd)return S(e,[],!1,t);const r=(0,s.getSchemaTypes)(e.schema);S(e,r,!(0,s.coerceAndCheckDataType)(e,r),t)}function w({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(!0===s.$comment)e.code(d._`${u.default.self}.logger.log(${i})`);else if("function"==typeof s.$comment){const r=d.str`${n}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${i}, ${r}, ${s}.schema)`)}}function S(e,t,r,n){const{gen:s,schema:a,data:c,allErrors:l,opts:h,self:f}=e,{RULES:m}=f;function g(p){(0,i.shouldUseGroup)(a,p)&&(p.type?(s.if((0,o.checkDataType)(p.type,c,h.strictNumbers)),E(e,p),1===t.length&&t[0]===p.type&&r&&(s.else(),(0,o.reportTypeError)(e)),s.endIf()):E(e,p),l||s.if(d._`${u.default.errors} === ${n||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(a,m)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{C(e.dataTypes,t)||T(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const r=[];for(const n of e.dataTypes)C(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&T(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if("object"==typeof s&&(0,i.shouldUseRule)(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some(e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n})&&T(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),s.block(()=>{for(const e of m.rules)g(e);g(m.post)})):s.block(()=>P(e,"$ref",m.all.$ref.definition))}function E(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,i.shouldUseRule)(n,r)&&P(e,r.keyword,r.definition,t.type)})}function C(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function T(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(_(e),y(e))?function(e){const{schema:t,opts:r,gen:n}=e;m(e,()=>{r.$comment&&t.$comment&&w(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(u.default.vErrors,null),n.let(u.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",d._`${r}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`)),t.if(d._`${e.evaluated}.dynamicItems`,()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`))}(e),b(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if(d._`${u.default.errors} === 0`,()=>t.return(u.default.data),()=>t.throw(d._`new ${s}(${u.default.vErrors})`)):(t.assign(d._`${n}.errors`,u.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof d.Name&&e.assign(d._`${t}.props`,r),n instanceof d.Name&&e.assign(d._`${t}.items`,n)}(e),t.return(d._`${u.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,n.topBoolOrEmptySchema)(e))};class k{constructor(e,t,r){if((0,c.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",x(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,r){this.failResult((0,d.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=d.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:s,def:i}=this;r.if((0,d.or)(d._`${n} === undefined`,t)),e!==d.nil&&r.assign(e,!0),(s.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:s}=this;return(0,d.or)(function(){if(r.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return d._`${(0,o.checkDataTypes)(e,t,s.opts.strictNumbers,o.DataType.Wrong)}`}return d.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return d._`!${r}(${t})`}return d.nil}())}subschema(e,t){const r=(0,l.getSubschema)(this.it,e);(0,l.extendSubschemaData)(r,this.it,e),(0,l.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return function(e,t){v(e)&&(_(e),y(e))?function(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&w(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=n.const("_errs",u.default.errors);b(e,i),n.var(t,d._`${i} === ${u.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=p.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=p.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,d.Name)),!0}}function P(e,t,r,n){const s=new k(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,c.funcKeywordCode)(s,r):"macro"in r?(0,c.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,c.funcKeywordCode)(s,r)}t.KeywordCxt=k;const $=/^\/(?:[^~]|~0|~1)*$/,O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(""===e)return u.default.rootData;if("/"===e[0]){if(!$.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=u.default.rootData}else{const o=O.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+o[1];if(s=o[2],"#"===s){if(a>=t)throw new Error(c("property/index",a));return n[t-a]}if(a>t)throw new Error(c("data",a));if(i=r[t-a],!s)return i}let o=i;const a=s.split("/");for(const e of a)e&&(i=d._`${i}${(0,d.getProperty)((0,p.unescapeJsonPointer)(e))}`,o=d._`${o} && ${i}`);return o;function c(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=x},9877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(513),s=r(1140),i=r(4971),o=r(6596),a=r(9048);var c;function l(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(c||(t.DataType=c={})),t.getSchemaTypes=function(e){const t=l(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=l,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:i}=e,a=function(e,t){return t?e.filter(e=>d.has(e)||"array"===t&&"array"===e):[]}(t,i.coerceTypes),l=t.length>0&&!(0===a.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(l){const s=h(t,n,i.strictNumbers,c.Wrong);r.if(s,()=>{a.length?function(e,t,r){const{gen:n,data:s,opts:i}=e,a=n.let("dataType",o._`typeof ${s}`),c=n.let("coerced",o._`undefined`);"array"===i.coerceTypes&&n.if(o._`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,o._`${s}[0]`).assign(a,o._`typeof ${s}`).if(h(t,s,i.strictNumbers),()=>n.assign(c,s))),n.if(o._`${c} !== undefined`);for(const e of r)(d.has(e)||"array"===e&&"array"===i.coerceTypes)&&l(e);function l(e){switch(e){case"string":return void n.elseIf(o._`${a} == "number" || ${a} == "boolean"`).assign(c,o._`"" + ${s}`).elseIf(o._`${s} === null`).assign(c,o._`""`);case"number":return void n.elseIf(o._`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(c,o._`+${s}`);case"integer":return void n.elseIf(o._`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,o._`+${s}`);case"boolean":return void n.elseIf(o._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf(o._`${s} === "true" || ${s} === 1`).assign(c,!0);case"null":return n.elseIf(o._`${s} === "" || ${s} === 0 || ${s} === false`),void n.assign(c,null);case"array":n.elseIf(o._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(c,o._`[${s}]`)}}n.else(),f(e),n.endIf(),n.if(o._`${c} !== undefined`,()=>{n.assign(s,c),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(o._`${t} !== undefined`,()=>e.assign(o._`${t}[${r}]`,n))}(e,c)})}(e,t,a):f(e)})}return l};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,r,n=c.Correct){const s=n===c.Correct?o.operators.EQ:o.operators.NEQ;let i;switch(e){case"null":return o._`${t} ${s} null`;case"array":i=o._`Array.isArray(${t})`;break;case"object":i=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return o._`typeof ${t} ${s} ${e}`}return n===c.Correct?i:(0,o.not)(i);function a(e=o.nil){return(0,o.and)(o._`typeof ${t} == "number"`,e,r?o._`isFinite(${t})`:o.nil)}}function h(e,t,r,n){if(1===e.length)return u(e[0],t,r,n);let s;const i=(0,a.toHash)(e);if(i.array&&i.object){const e=o._`typeof ${t} != "object"`;s=i.null?e:o._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=o.nil;i.number&&delete i.integer;for(const e in i)s=(0,o.and)(s,u(e,t,r,n));return s}t.checkDataType=u,t.checkDataTypes=h;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:r,schema:n}=e,s=(0,a.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}(e);(0,i.reportError)(t,p)}t.reportTypeError=f},9896:e=>{"use strict";e.exports=require("fs")},9943:e=>{"use strict";e.exports={rE:"1.14.3"}},9952:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2503);const s=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){return e[t]??null}const r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${n.stringifyPrimitive(e.values[0])}`:`Invalid option: expected one of ${n.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Too big: expected ${e.origin??"value"} to have ${r}${e.maximum.toString()} ${n.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Too small: expected ${e.origin} to have ${r}${e.minimum.toString()} ${n.unit}`:`Too small: expected ${e.origin} to be ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function i(){return{localeError:s()}}},9981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(3697);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var s=r(6596);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const i=r(3781),o=r(7346),a=r(513),c=r(1430),l=r(6596),d=r(978),u=r(9877),h=r(9048),p=r(1808),f=r(6501),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(e){var t,r,n,s,i,o,a,c,l,d,u,h,p,g,y,v,_,b,w,S,E,C,T,k,P;const $=e.strict,O=null===(t=e.code)||void 0===t?void 0:t.optimize,x=!0===O||void 0===O?1:O||0,N=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:m,R=null!==(s=e.uriResolver)&&void 0!==s?s:f.default;return{strictSchema:null===(o=null!==(i=e.strictSchema)&&void 0!==i?i:$)||void 0===o||o,strictNumbers:null===(c=null!==(a=e.strictNumbers)&&void 0!==a?a:$)||void 0===c||c,strictTypes:null!==(d=null!==(l=e.strictTypes)&&void 0!==l?l:$)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:$)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(p=e.strictRequired)&&void 0!==p?p:$)&&void 0!==g&&g,code:e.code?{...e.code,optimize:x,regExp:N}:{optimize:x,regExp:N},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(w=e.inlineRefs)||void 0===w||w,schemaId:null!==(S=e.schemaId)&&void 0!==S?S:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(C=e.validateSchema)||void 0===C||C,validateFormats:null===(T=e.validateFormats)||void 0===T||T,unicodeRegExp:null===(k=e.unicodeRegExp)||void 0===k||k,int32range:null===(P=e.int32range)||void 0===P||P,uriResolver:R}}class w{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...b(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return $;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),S.call(this,v,e,"NOT SUPPORTED"),S.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=P.call(this),e.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),C.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=p;"id"===r&&(n={...p},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await s.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function s(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return a.call(this,t),await c.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const r=await l.call(this,e);this.refs[e]||await s.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=E.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new c.SchemaEnv({schema:{},schemaId:r});if(t=c.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=E.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,d.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,r,t),!t)return(0,h.eachItem)(r,e=>N.call(this,e)),this;I.call(this,t);const n={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(r,0===n.type.length?e=>N.call(this,e,n):e=>n.type.forEach(t=>N.call(this,e,n,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,i=s[e];n&&i&&(s[e]=M(i))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;const{schemaId:o}=this.opts;if("object"==typeof e)i=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;r=(0,d.normalizeId)(i||r);const l=d.getSchemaRefs.call(this,e,r);return a=new c.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:r,localRefs:l}),this._cache.set(a.schema,a),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),n&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function S(e,t,r,n="error"){for(const s in e){const i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function E(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function C(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function T(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function P(){const e={...this.opts};for(const t of g)delete e[t];return e}w.ValidationError=i.default,w.MissingRefError=o.default,t.default=w;const $={log(){},warn(){},error(){}},O=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){const{RULES:r}=this;if((0,h.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!O.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function N(e,t,r){var n;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let o=s?i.post:i.rules.find(({type:e})=>e===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?R.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach(e=>this.addKeyword(e))}function R(e,t,r){const n=e.rules.findIndex(e=>e.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function I(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=M(t)),e.validateSchema=this.compile(t,!0))}const A={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function M(e){return{anyOf:[e,A]}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1184),__webpack_export_target__=exports;for(var __webpack_i__ in __webpack_exports__)__webpack_export_target__[__webpack_i__]=__webpack_exports__[__webpack_i__];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=http://go/sourcemap/sourcemaps/3578107fdf149b00059ddad37048220e41681000/extensions/cursor-ios-simulator-connect/dist/main.js.map